% \makeatletter
% \def\input@path{{../}}
% \makeatother
% %
% \documentclass[../00_Thesis.tex]{subfiles}
% %
% \overfullrule=2cm
% %
% %
% \begin{document}

\chapter{Generalities on gradings}\label{sec:generalities}
% ==================================================

The purpose of this section is to fix notation and terminology concerning graded algebras and graded modules. We should warn the reader that some terms appearing in Section \ref{ssec:universal_group} are not used consistently in the literature (see discussion in \cite[\S 2.7]{GS}); here we follow \cite{livromicha}.

% --------------------------------------------------
\section{Gradings on vector spaces and (bi)modules}\label{subsec:graded-bimodules}
% --------------------------------------------------

% Def: Graded vector space + Def: Shift by g
Let $G$ be a group. By a \emph{$G$-grading} on a vector space $V$ we mean simply a vector space decomposition $\Gamma:\,V = \bigoplus_{g \in G} V_g$ where the summands are labeled by elements of $G$. If $\Gamma$ is fixed, $V$ is referred to as a {\em $G$-graded vector space}. A subspace $W \subseteq V$ is said to be \emph{graded} if $W = \bigoplus_{g \in G} (W \cap V_g)$. We will refer to $\ZZ_2$-graded vector spaces as \emph{superspaces} and their graded subspaces as \emph{subsuperspaces}.

An element $v$ in a graded vector space $V = \bigoplus_{g \in G} V_g$ is said to be \emph{homogeneous} if $v\in V_g$ for some $g\in G$. 
If $0\ne v\in V_g$, we will say that $g$ is the \emph{degree} of $v$ and write $\deg v = g$. 
In reference to the canonical $\ZZ_2$-grading of a superspace, we will instead speak of the \emph{parity} of $v$ and write $|v| = g$.
Every time we write $\deg v$ or $|v|$, it should be understood that $v$ is a nonzero homogeneous element.

% Def: Grading on tensor product
\begin{defi}
	Given two $G$-graded vector spaces, $V=\bigoplus_{g\in G} V_g$ and $W=\bigoplus_{g\in G} W_g$, we define their tensor product to be the vector space $V\otimes W$
	together with the $G$-grading given by $(V \otimes W)_g = \bigoplus_{ab=g} V_{a} \otimes W_{b}$.
\end{defi}

The concept of grading on a vector space is connected to gradings on algebras by means of the following:

% Def: Homogeneous Map
\begin{defi}
	If $V=\bigoplus_{g\in G} V_{g}$ and $W=\bigoplus_{g\in G} W_{g}$ are two graded vector spaces and $T: V\rightarrow W$ is a linear map, we say that $T$ is \emph{homogeneous of degree $t$}, for some $t\in G$, if $T(V_g)\subseteq W_{tg}$ for all $g\in G$.
\end{defi}

% Def: Homogeneous Transformations
If $S: U\rightarrow V$ and $T: V\rightarrow W$ are homogeneous linear maps of degrees $s$ and $t$, respectively, 
then the composition $T\circ S$ is homogeneous of degree $ts$.
% Def: Space of Homogeneous Transformations
We define the {\em space of graded linear transformations} from $V$ to $W$ to be:
%
\[ \Hom^{\text{gr}} (V,W) = \bigoplus_{g\in G} \Hom (V,W)_{g}\]
%
% Prop: End(V) is a graded algebra
where $\Hom (V,W)_{g}$ denotes the set of all linear maps from $V$ to $W$ that are homogeneous of degree $g$. 
If we assume $V$ to be finite-dimensional then we have $\Hom(V,W)=\Hom^{\gr}(V,W)$ and, in particular, $\End (V) = \bigoplus_{g\in G} \End (V)_g$ is a graded algebra.
% Prop: V is a graded module
We also note that $V$ becomes a graded module over $\End(V)$ in the following sense:

% Def: graded module
\begin{defi}
	Let $A$ be a $G$-graded algebra (associative or Lie) and let $V$ be a (left) module over $A$ that is also a $G$-graded vector space. We say that $V$ is a \emph{graded $A$-module} if $A_g \cdot V_h \subseteq V_{gh}$, for all $g$,$h\in G$. The concept of $G$-\emph{graded bimodule} is defined similarly.
\end{defi}

% L1 is a graded module over L0
If we have a $G$-grading on a Lie superalgebra $L=L\even \oplus L\odd$ then, in particular, we have a grading on the Lie algebra $L\even$ and a grading on the space $L\odd$ that makes it a graded $L\even$-module. If we have a $G$-grading on an associative superalgebra $C=C\even \oplus C\odd$, then $C\odd$ becomes a graded bimodule over $C\even$.

If $ \Gamma$ is a $G$-grading on a vector space $V$ and $g\in G$, we denote by $\Gamma^{[g]} $ the grading given by relabeling the component 
$V_h$ as $V_{hg}$, for all $h \in G$. This is called the \emph{(right) shift of the grading $\Gamma$ by $g$}. 
We denote the graded space $(V, \,  \Gamma^{[g]})$ by $V^{[g]}$.

% Lemma: Shifts on (bi)modules
From now on, we assume that $G$ is abelian.
If $V$ is a graded module over a graded algebra (or a graded bimodule over a pair of graded algebras), then $V^{[g]}$ is also a graded (bi)module. 
We will make use of the following partial converse (see e.g. \cite[Proposition 3.5]{paper-Qn}):

\begin{lemma}\label{lemma:simplebimodule}
	Let $A$ and $B$ be $G$-graded algebras and let $V$ be a finite-dimensional (ungraded) simple $A$-module or $(A,B)$-bimodule.  If $\Gamma$ and $\Gamma'$ are  two $G$-gradings that make $V$ a graded (bi)module, then $\Gamma'$ is a  shift of $\Gamma$.\qed
\end{lemma}

Certain shifts of grading may be applied to graded $\ZZ$- or $\ZZ_2$-superalgebras. In the case of a $\ZZ$-superalgebra $L=L^{-1}\oplus L^{0}\oplus L^{1}$, we have the following:

% Lemma: opposite directions
\begin{lemma}\label{lemma:opposite-directions}
	Let $L=L^{-1}\oplus L^0\oplus L^1$ be a $\ZZ$-superalgebra such that $L^1\, L^{-1}\neq 0$. If we shift the grading on $L^1$ by $g\in G$ and the grading on $L^{-1}$ by $g' \in G$, then we have a grading on $L$ if and only if $g' = g^{-1}$. \qed
\end{lemma}

We will describe this situation as \emph{shift in opposite directions}.

% --------------------------------------------------
\section{Universal grading group, equivalence and isomorphism of gradings}\label{ssec:universal_group}
% --------------------------------------------------

% Def: Set gradings and Universal Group
There is a concept of grading not involving groups. A \emph{set grading} on a (super)algebra $A$ is a decomposition $\Gamma:\,A=\bigoplus_{s\in S}A_s$ as a direct sum of sub\-(su\-per)\-spa\-ces indexed by a set $S$ and having the property that, for any $s_1,s_2\in S$ with $A_{s_1}A_{s_2}\ne 0$, there exists $s_3\in S$ such that $A_{s_1}A_{s_2}\subseteq A_{s_3}$. The \emph{support} of $\Gamma$ (or of $A$) is defined to be the set $\supp(\Gamma) := \{s\in S \mid A_s \neq 0\}$.
Similarly, $\supp_\bz(\Gamma) := \{s\in S \mid A_s^\bz \neq 0\}$ and $\supp_\bo(\Gamma) := \{s\in S \mid A_s^\bo \neq 0\}$.

For a set grading $\Gamma:\,A=\bigoplus_{s\in S}A_s$, there may or may not exist a group $G$ containing $\supp(\Gamma)$ that makes $\Gamma$ a $G$-grading. 
If such a group exists, $\Gamma$ is said to be a {\em group grading}. (As already mentioned, we only consider abelian group gradings in this paper.) 
However, $G$ is usually not unique even if we require that it should be generated by $\supp(\Gamma)$. 
The {\em universal (abelian) grading group of $\Gamma$} \cite{PZ} is generated by $\supp(\Gamma)$ and has the defining relations 
$s_1s_2=s_3$ for all $s_1,s_2,s_3\in S$ such that $0\neq A_{s_1}A_{s_2}\subseteq A_{s_3}$. 
This group is universal among all (abelian) groups that realize the grading $\Gamma$ (see e.g. \cite[Chapter 1]{livromicha} for details).

% Def: Equivalence and Isomorphism
Let $\Gamma:\,A=\bigoplus_{g\in G} A_g$ and $\Delta:\,B=\bigoplus_{h\in H} B_h$ be two group gradings on the (super)algebras $A$ and $B$, with supports $S$ and $T$, respectively.
We say that $\Gamma$ and $\Delta$ are {\em equivalent} if there exists an isomorphism of (super)algebras $\vphi: A\to B$ and a bijection $\alpha: S\to T$ such that $\vphi(A_s)=B_{\alpha(s)}$ for all $s\in S$. If $G$ and $H$ are universal grading groups then $\alpha$ extends to an isomorphism $G\to H$. In the case $G=H$, the $G$-gradings $\Gamma$ and $\Delta$ are {\em isomorphic} if $A$ and $B$ are isomorphic as $G$-graded (super)algebras, i.e., if there exists an isomorphism of (super)algebras $\vphi: A\to B$ such that $\vphi(A_g)=B_g$ for all $g\in G$.

% Def: Coarsening and refinement
If $\Gamma:\,A=\bigoplus_{g\in G} A_g$ and $\Gamma':\,A=\bigoplus_{h\in H} A'_h$ are two gradings on the same (super)algebra $A$, with supports $S$ and $T$, respectively, then we will say that $\Gamma'$ is a {\em refinement} of $\Gamma$ (or $\Gamma$ is a {\em coarsening} of $\Gamma'$) if, for any $t\in T$, there exists (unique) $s\in S$ such that $A'_t\subseteq A_s$. If, moreover, $A'_t\ne A_s$ for at least one $t\in T$, then the refinement is said to be {\em proper}. A grading $\Gamma$ is said to be {\em fine} if it does not admit any proper refinements. 
Note that if $A$ is a superalgebra then $A=\bigoplus_{(g,i)\in G\times\mathbb{Z}_2}A_g^i$ is a refinement of $\Gamma$. 
It follows that if $\Gamma$ is fine then the sets $\supp_\bz(\Gamma)$ and $\supp_\bo(\Gamma)$ are disjoint. 
If, moreover, $G$ is the universal group of $\Gamma$, then the superalgebra structure on $A$ is given by the unique homomorphism $p: G \to \ZZ_2$ 
that sends $\supp_\bz(\Gamma)$ to $\bar 0$ and $\supp_\bo(\Gamma)$ to $\bar 1$.
% Def: Coarsening by homomorphism

\begin{defi}
	Let $G$ and $H$ be groups, $\alpha:G\to H$ be a group homomorphism and $\Gamma:\,A=\bigoplus_{g\in G} A_g$ be a $G$-grading. The \emph{coarsening of $\Gamma$ induced by $\alpha$} is the $H$-grading ${}^\alpha \Gamma: A= \bigoplus_{h\in H} B_h$ where
	$ B_h = \bigoplus_{g\in \alpha\inv (h)} A_g$. (This coarsening is not necessarily proper.)
\end{defi}

The following result appears to be ``folklore''. We include a proof for completeness.

% Lemma
\begin{lemma}\label{lemma:universal-grp}
	Let $\mathcal{F}=\{\Gamma_i\}_{i\in I}$, be a family of pairwise nonequivalent fine (abelian) group gradings on a (super)algebra $A$, where $\Gamma_i$ is a $G_i$-grading and $G_i$ is generated by $\supp(\Gamma_i)$. Suppose that $\mathcal{F}$ has the following property: 
	for any grading $\Gamma$ on $A$ by an (abelian) group $H$, there exists $i\in I$ and a homomorphism $\alpha:G_i\to H$ such that $\Gamma$ 
	is isomorphic to ${}^\alpha\Gamma_i$. Then
	%
	\begin{enumerate}[(i)]
		\item every fine (abelian) group grading on $A$ is equivalent to a unique $\Gamma_i$;
		\item for all $i$, $G_i$ is the universal (abelian) group of $\Gamma_i$.
	\end{enumerate}
\end{lemma}

\begin{proof}
	Let $\Gamma$ be a fine grading on $A$, realized over its universal group $H$. Then there is $i\in I$ and $\alpha: G_i \to H$ such that ${}^\alpha \Gamma_i \iso \Gamma$. Writing $\Gamma_i: A = \bigoplus_{g\in G_i} A_g$ and $\Gamma: A = \bigoplus_{h\in H} B_h$, we then have $\vphi \in \Aut(A)$ such that
	\[
		\vphi\,\big( \bigoplus_{g\in \alpha\inv (h)} A_g \big) = B_h
	\]
	for all $h\in H$. Since $\Gamma$ is fine, we must have $B_h \neq 0$ if, and only if, there is a unique $g\in G_i$ such that $\alpha(g) = h$, $A_g\neq 0$ and $\vphi(A_g) = B_h$. Equivalently, $\alpha$ restricts to a bijection $\supp(\Gamma_i) \to \supp(\Gamma)$ and $\vphi(A_g) = B_{\alpha(g)}$ for all $g \in S_i:= \supp (\Gamma_i)$. This proves assertion $(i)$.

	Let $G$ be the universal group of $\Gamma_i$. It follows that, for all $s_1, s_2, s_3 \in S_i$,
	%
	\begin{equation*} \label{eq:relations-unvrsl-grp}
		\begin{split}
			& s_1s_2 = s_3 \text{ is a defining relation of } G \\
									 \iff & 0 \neq A_{s_1} A_{s_2} \subseteq A_{s_3}\\
									 \iff & 0 \neq B_{\alpha(s_1)} B_{\alpha(s_2)} \subseteq B_{\alpha (s_3)}\\
									 \iff & \alpha(s_1)\alpha(s_2) = \alpha(s_3) \text{ is a defining relation of } H.
		\end{split}
	\end{equation*}
	%
	Therefore, the bijection $\alpha\restriction_{S_i}$ extends uniquely to an isomorphism $\widetilde{\alpha}: G\rightarrow H$.

	By the universal property of $G$, there is a unique homomorphism $\sigma: G\to G_i$ that restricts to the identity on $S_i$. Hence, the following diagram commutes:
	%
	\begin{center}
		\begin{tikzcd}
			G \arrow[to=Gi, "\sigma"] \arrow[to = H, "\widetilde{\alpha}"]&&\\
			&& |[alias=H]|H\\
			|[alias=Gi]|G_i \arrow[to=H, "\alpha"]&&
		\end{tikzcd}
	\end{center}
	%

	Since $\widetilde{\alpha}$ is an isomorphism, $\sigma$ must be injective. But $\sigma$ is also surjective since $S_i$ generates $G_i$. Hence $G_i$ is isomorphic to $G$. Since $\Gamma$ was an arbitrary fine grading, for each given $j\in I$, we can take $\Gamma = \Gamma_j$ (hence, $i=j$ and $H=G$). This concludes the proof of $(ii)$.
\end{proof}

\begin{defi}[\cite{PZ}]
	Let $\Gamma$ be a grading on an algebra $A$. We define $\Aut(\Gamma)$ as the group of all self-equivalences of $\Gamma$, i.e., automorphisms of $A$ that 
	permute the components of $\Gamma$. Let $\operatorname{Stab}(\Gamma)$ be the subgroup of $\Aut(\Gamma)$ consisting of the automorphisms that fix 
	each component of $\Gamma$. Clearly, $\operatorname{Stab}(\Gamma)$ is a normal subgroup of $\Aut(\Gamma)$, so we can define the \emph{Weil group} of 
	$\Gamma$ by $\operatorname W (\Gamma) := \frac{\Aut(\Gamma)}{\operatorname{Stab}(\Gamma)}$. The group $\operatorname W (\Gamma)$ can be seen as a subgroup
	of the permutation group of the support and also as a subgroup of the automorphism group of the universal group of $\Gamma$.
\end{defi}


% \section{Gradings on matrix algebras}
% \label{sec:gradings-on-matrix-algebras}

% In this section we will recall the classification of gradings on matrix algebras \cite{BSZ01, BZ02, BK10}. We will follow the exposition of \cite[Chapter 2]{livromicha} but use slightly different notation, which will be extended to superalgebras in Section~??%\ref{sec:Mmn}.

% The following is the graded version of a classical result (see e.g. \cite[Theorem 2.6]{livromicha}). 
% We recall that a \emph{graded division algebra} is a graded unital associative algebra such that every nonzero homogeneous element is invertible.

% \begin{thm}\label{thm:End-over-D}
% 	Let $G$ be a group and let $R$ be a $G$-graded associative algebra that has no nontrivial graded ideals and satisfies the descending chain condition on 
% 	graded left ideals. Then there is a $G$-graded division algebra $\D$ and a graded (right) $\D$-module $\mc{V}$ such that $R \simeq \End_{\D} (\mc{V})$ as graded algebras.\qed
% \end{thm}

% We apply this result to the algebra $R=M_n(\FF)$ equipped with a grading by an \emph{abelian} group $G$. We will now introduce the parameters that determine 
% $\mc D$ and $\mc V$, and give an explicit isomorphism $\End_{\D} (\mc{V})\simeq M_n(\FF)$ (see Definition \ref{def:explicit-grd-assoc}). It should be mentioned that a classification of $G$-gradings on $M_n(\FF)$ is known for non-abelian $G$ but it is less explicit and involves cohomological data (see \cite[Corollary 2.22]{livromicha} and \cite[Theorem 1.3]{GS}); here we restrict ourselves to the abelian case.

% Let $\D$ be a finite-dimensional $G$-graded division algebra. It is easy to see that $T= \supp \D$ is a finite subgroup of $G$. 
% Also, since we are over an algebraically closed field, each homogeneous component $\D_t$, for $t\in T$, is one-dimensional. We can choose a generator $X_t$ for each $\D_t$. It follows that, for every $u,v\in T$, there is a unique nonzero scalar $\beta (u,v)$ such that $X_u X_v = \beta (u,v) X_v X_u$. Clearly, $\beta (u,v)$ does not depend on the choice of $X_u$ and $X_v$.
% The map $\beta: T\times T \rightarrow \FF^{\times}$ is a \emph{bicharacter}, \ie, both maps $\beta(t,\cdot)$ and $\beta(\cdot,t)$ are characters for every $t \in T$. It is also \emph{alternating} in the sense that $\beta (t,t) = 1$ for all $t\in T$. We define the \emph{radical} of $\beta$ as the set $\rad \beta = \{ t\in T \mid \beta(t, T) = 1 \}$. In the case we are interested in, where $\D$ is simple as an algebra, the bicharacter $\beta$ is \emph{nondegenerate}, \ie, $\rad \beta = \{e\} $. The isomorphism classes of $G$-graded division algebras that are finite-dimensional and simple as algebras are in one-to-one correspondence with the pairs $(T,\beta)$ where $T$ is a finite subgroup of $G$ and $\beta$ is an alternating nondegenerate bicharacter on $T$ (see e.g. \cite[Section 2.2]{livromicha} for a proof).

% Using that the bicharacter $\beta$ is nondegenerate, we can decompose the group $T$ as $A\times B$, where the restrictions of $\beta$ to each of the subgroups $A$ and $B$ is trivial, and hence $A$ and $B$ are in duality by $\beta$. We can choose the elements $X_t\in \D_t$ in a convenient way (see \cite[Remark 2.16]{livromicha} and 
% \cite[Remark 18]{EK15}) such that $X_{ab}=X_aX_b$ for all $a\in A$ and $b\in B$. Using this choice, we can define an action of $\D$ on the vector space underlying the group algebra $\FF B$, by declaring $X_a\cdot e_{b'} = \beta(a, b') e_{b'}$ and $X_b\cdot e_{b'} = e_{bb'}$. 
% This action allows us to identify $\D$ with $\End{(\FF B)}$. Using the basis $\{e_{b}\mid b\in B\}$ in $\FF B$, we can see it as a matrix algebra, where
% %
% \[X_{ab}= \sum_{b'\in B} \beta(a, bb') E_{bb', b'}\]
% %
% and $E_{b'', b'}$ with $b'$, $b'' \in B$, is a matrix unit, namely, the matrix of the operator that sends $e_{b'}$ to $e_{b''}$ and sends all other basis elements to zero.

% \begin{defi}
% 	We will refer to these matrix models of $\mc D$ as its \emph{standard realizations}.
% \end{defi}

% \begin{remark}\label{rmk:2-grp-transp}
% 	The matrix transposition is always an involution of the algebra structure. As to the grading, we have
% 	%
% 	\[
% 	X_{ab}\transp = \sum_{b'\in B} \beta(a, bb') E_{b',bb'}
% 	   = \beta(a,b) \sum_{b''\in B} \beta(a, b^{-1}b'') E_{b^{-1}b'', b''} = \beta(a,b) X_{ab^{-1}}.
% 	\]
% 	%
% 	It follows that if $T$ is an elementary 2-group, then the transposition preserves the degree. 
% 	In this case, we will use it to fix an identification between the graded algebras $\D$ and $\D\op$.
% \end{remark}


% %\subsubsection{Graded modules over $\D$}

% Graded modules over a graded division algebra $\mc D$ behave similarly to vector spaces. The usual proof that every vector space has a basis, with obvious modifications, shows that every graded $\mc D$-module has a \emph{homogeneous basis}, \ie, a basis formed by homogeneous elements.
% Let $\mc V$ be such a module of finite rank $k$, fix a homogeneous basis $\mc B = \{v_1, \ldots, v_k\}$ and let $g_i := \operatorname{deg} v_i$. We then have $\mc{V}\iso \ \D^{[g_1]}\oplus\cdots\oplus\D^{[g_k]}$, so, the graded $\mc D$-module $\mc V$ is determined by the $k$-tuple $\gamma = (g_1,\ldots, g_k)$. The tuple $\gamma$ is not unique. To capture the precise information that determines the isomorphism class of $\mc V$, we use the concept of \emph{multiset}, \ie, a set together with a map from it to the set of positive integers. If $\gamma = (g_1,\ldots, g_k)$ and $T=\supp \D$, we denote by $\Xi(\gamma)$ the multiset whose underlying set is $\{g_1 T,\ldots, g_k T\} \subseteq G/T$ and the multiplicity of $g_i T$, for $1\leq i\leq k$, is the number of entries of $\gamma$ that are congruent to $g_i$ modulo $T$.

% Using $\mc B$ to represent the linear maps by matrices in $M_k(\D) = M_k(\FF)\tensor \D$, we now construct an explicit matrix model for $\End_{\D}(\mc V)$.

% \begin{defi}\label{def:explicit-grd-assoc}
% 	Let $T \subseteq G$ be a finite subgroup, $\beta$ a nondegenerate alternating bicharacter on $T$, and $\gamma = (g_1, \ldots, g_k)$ a $k$-tuple of elements of $G$. Let $\D$ be a standard realization of a graded division algebra associated to $(T, \beta)$. Identify $M_k(\FF)\tensor \D \iso M_n(\FF)$ by means of the Kronecker product, where $n=k\sqrt{|T|}$. We will denote by $\Gamma(T, \beta, \gamma)$ the grading on $M_n(\FF)$ given by $\deg (E_{ij} \tensor d) := g_i (\deg d) g_j\inv$ for $i,j\in \{1, \ldots , k\}$ and homogeneous $d\in \D$, where $E_{ij}$ is the $(i,j)$-th matrix unit.
% \end{defi}

% If $\End(V)$, equipped with a grading, is isomorphic to $M_n(\FF)$ with $\Gamma(T, \beta, \gamma)$, we may abuse notation and also denote the grading on $\End(V)$ by $\Gamma(T,\beta,\gamma)$.
% We restate \cite[Theorem 2.27]{livromicha} (see also \cite[Theorem 2.6]{BK10}) using our notation:

% \begin{thm}\label{thm:classification-matrix}%3.5
% 	Two gradings, $\Gamma(T,\beta,\gamma)$ and $\Gamma(T',\beta',\gamma')$, on the algebra $M_n(\FF)$ are isomorphic if, and only if, $T=T'$, $\beta=\beta'$ and there is an element $g\in G$ such that $g \Xi(\gamma)=\Xi(\gamma')$.\qed
% \end{thm}

% The proof of this theorem is based on the following result (see Theorem 2.10 and Proposition 2.18 from \cite{livromicha}), which will also be needed:

% \begin{prop}\label{prop:inner-automorphism}
% 	If $\phi: \End_\D (\mc V) \rightarrow \End_\D (\mc V')$ is an isomorphism of graded algebras, then there is a homogeneous invertible 
% 	$\D$-linear map $\psi: \mc V\rightarrow \mc V'$ such that $\phi(r)=\psi \circ r \circ \psi\inv$, for all $r\in \End_\D (\mc V)$.\qed
% \end{prop}

% \end{document}