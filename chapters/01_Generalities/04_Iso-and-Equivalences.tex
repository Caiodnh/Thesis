
\section{Refinement, coarsening and equivalence}\label{ssec:universal_group}
% ---

In this section, we will introduce some concepts that do not involve a fixed grading group. 
For these, it is useful to have a ``group free'' notion of grading:

\begin{defi}\label{defi:set-grading}
    A \emph{set grading $\Gamma$ on a vector space $V$} is a vector space decomposition indexed by elements of a set $S$, \ie, 
    $\Gamma : V = \bigoplus_{s\in S} V_s$. 
    % \[ 
    %     \Gamma : V = \bigoplus_{s\in S} V_s.
    % \]
    If $V$ is a superspace, we further impose that each component $V_s$ is a subsuperspace. 
    When endowed with a fixed set grading $\Gamma$, we say that $V$ is a \emph{set graded vector space}. 
\end{defi}

\begin{defi}\label{defi:ref-coars}
    Let $\Gamma : V = \bigoplus_{s\in S} V_s$ and $\Delta : V = \bigoplus_{t \in T} V_{t}$ be set gradings on a vector space $V$. 
    We say that $\Gamma$ is a \emph{refinement} of $\Delta$, or that $\Delta$ is a \emph{coarsening} of $\Gamma$, if for every $s \in S$ there is $t \in T$ such that $V_s \subseteq V_t$. 
    If, for some $s \in S$, this inclusion is strict, we say that the refinement/coarsening is \emph{proper}. 
\end{defi}


As in \cref{support}, we define the \emph{support} of a set grading $\Gamma : V = \bigoplus_{s\in S} V_s$ to be the set $\supp \Gamma \coloneqq \{ s \in S \mid V_s \neq 0 \}$. 
Note that we can always replace $S$ by $\supp \Gamma$. 
If $\Delta$ is a coarsening of $\Gamma$ as above and $s\in \supp \Gamma$, then there is a unique element $t \in T$ such that $V_s \subseteq V_t$. 
This motivates the following:

\begin{defi}\label{coars-induced}
    Let $V$ be a vector space and let $\Gamma : V = \bigoplus_{s\in S} V_s$ be set grading. 
    Given a set $T$ and a map $\alpha\from S \to T$, the \emph{coarsening of $\Gamma$ induced by $\alpha$} is the set grading 
    \[
        {}^{\alpha}\Gamma : V = \bigoplus_{t\in T} V_t,
    \]
    where 
    \[
        V_t \coloneqq \bigoplus_{s \in \alpha\inv (t)} V_s.
    \]
\end{defi}

Before defining set gradings on $\Omega$-algebras, we need the following:

\begin{defi}\label{defi:graded-map}
    Let $V = \bigoplus_{s\in S} V_s$ and $W = \bigoplus_{t\in T} W_t$ be set graded vector spaces. 
    %
    A linear map $f\from V \to W$ is said to be  \emph{graded} if for any $s \in S$, there is $t \in T$ such that $f(V_s) \subseteq W_t$. 
\end{defi}

Note that, by definition, a grading $\Gamma$ is a refinement of a grading $\Delta$ on a vector space $V$ \IFF the identity map seen as $(V, \Gamma) \to (V, \Delta)$ is a graded map. 

\begin{defi}
    Let $V = \bigoplus_{s\in S} V_s$ and $W = \bigoplus_{t\in T} W_t$ be set graded vector spaces. 
    The \emph{tensor product} of $V$ and $W$ is the the vector space $V \tensor W$ endowed with the grading
    \[
        \Gamma : V \tensor W = \bigoplus_{(s,t) \in S \times T} V_s \tensor W_t. 
    \]
\end{defi}

% \begin{remark}
    We note that the $G$-grading on the tensor product of two  vector spaces (\cref{defi:tensorProduct}) is the coarsening of the set grading in \cref{defi:graded-map} induced by the map $\alpha\from G\times G \to G$ given by $\alpha (g,h) \coloneqq gh$, for all $g,h \in G$. 
% \end{remark}

\begin{defi}
    A \emph{set grading on an $\Omega$-algebra $A$} is a set grading $\Gamma : A = \bigoplus_{s\in S} A_s$ on the underlying vector space of $A$ such that $\omega^A\from A^{\tensor n} \to A$ is a graded linear map for all $\omega \in \Omega$. 
\end{defi}

In particular, if $A$ is an algebra in the usual sense, a set grading on $A$ is a vector space decomposition $\Gamma : A = \bigoplus s_{s\in S} A_s$ such that, for any $s_1,s_2\in S$ there exists $s_3\in S$ such that $A_{s_1} A_{s_2} \subseteq A_{s_3}$.

\begin{defi}\label{defi:equivalence}
    Let $A$ and $B$ be $\Omega$-algebras endowed, respectively, with set gradings ${\Gamma : A = \bigoplus_{s \in S} A_{s}}$ and ${\Delta = \bigoplus_{t \in T} A_{t}}$. 
    An \emph{equivalence} $\psi\from A \to B$ is an isomorphism of $\Omega$-algebras such that both $\psi$ and $\psi\inv$ are graded maps. 
    If $A = B$ and there is an equivalence $\psi\from (A, \Gamma) \to (A, \Delta)$, we say that $\Gamma$ and $\Delta$ are \emph{equivalent gradings}. 
\end{defi}

Note that an equivalence $\psi\from A \to B$ determines a bijection $\alpha \from \supp \Gamma \to \supp \Delta$ by $\vphi(A_s) = B_{\alpha(s)}$. 

We will now bring groups and group gradings back to the picture:

\begin{defi}
    We say that a set grading $\Gamma$ on an $\Omega$-algebra $A$ can be \emph{realized as an (abelian) group grading} if there is an (abelian) group $G$ and a injective map $\alpha\from \supp \Gamma \to G$ such that ${}^{\alpha}\Gamma$ is a $G$-grading on $A$. 
\end{defi}

\begin{defi}\label{defi:fine-grading}
    Let $A$ be an $\Omega$-algebra and let $\Gamma$ be a set grading on $A$. 
    We say that $\Gamma$ is a \emph{fine (abelian) group grading} if it can be realized as an (abelian) group grading but no proper refinement of $\Gamma$ can. 
\end{defi}

When a grading can be realized as an (abelian) group grading, it can be done in many different ways. 
But there is a special realization that has a universal property:

\begin{defi}\label{defi:universal-group}
    Let $A$ be an $\Omega$-algebra and let $\Gamma$ be a set grading on $A$. 
    A \emph{universal (abelian) group} of $\Gamma$ is a group $G$ together with a map $\iota\from \supp\Gamma \to G$ such that ${}^{\iota}\Gamma$ is a $G$-grading and, for every (abelian) group $G'$ and map $\iota'\from \supp \Gamma \to G'$ such that ${}^{\iota'}\Gamma$ is a $G'$-grading, there is a unique group homomorphism $\alpha\from G \to G'$ such that $\iota' = \alpha \circ \iota$, \ie, the following diagram commutes:
    %
	\begin{center}
		\begin{tikzcd}
            S \arrow[to = G, "\iota"] \arrow[to = H, "\iota'"]
            && |[alias = G]| G \arrow[to = H, dashed, "\alpha"]\\
            &&\\
            && |[alias = H]| G'
        \end{tikzcd}
	\end{center}
\end{defi}

Clearly, $\Gamma$ can be realized as an (abelian) group grading \IFF the map $\iota$ above is injective. 
Also, we can construct a universal (abelian) group using generators and relations: we take $\supp \Gamma$ as the set of generators and, for each $n\geq 0$ and $\omega \in \Omega_n$, we consider relations $s_1 \cdots s_n = s_{n+1}$ for all $s_1, \ldots, s_n, s_{n+1} \in \supp \Gamma$ such that $0 \neq \omega^A (A_{s_1} \tensor \cdots \tensor A_{s_n}) \subseteq A_{s_{n+1}}$. 

\begin{remark}\label{rmk:coars-grp-induced}
    Let $A$ be an $\Omega$-algebra, $G$ and $G'$ be groups and $\alpha\from G \to G'$ be a group homomorphism. 
    If $\Gamma : A = \bigoplus_{g\in G} A_g$ is a $G$-grading, then it is easy to see that ${}^{\alpha} \Gamma$ is a $G'$-grading. 
    We note that, by \cref{defi:universal-group}, if $G$ is the universal group of $\Gamma$, then every $G'$-grading that is a coarsening of $\Gamma$ is obtained this way.  
\end{remark}

By means of the duality between gradings and actions outlined in \cref{sec:g-hat-action}, the fine abelian group gradings on a finite dimensional algebra $A$ over an algebraically closed field of characteristic $0$ correspond to maximal quasitori in the algebraic group $\Aut(A)$. 
Moreover, the group of algebraic characters of a maximal quasitorus is the universal abelian group of the corresponding grading.  

We conclude this chapter with some comments about the two types of classification mentioned in the \hyperref[intro-equiv]{Introduction}: fine gradings up to equivalence and $G$-gradings up to isomorphism. 
%
Any group grading on a finite dimensional algebra $A$ is a coarsening of a fine group grading. 
So, if we have a classification of fine group gradings on $A$ up to equivalence and know their universal groups, we can obtain any $G$-grading as $^{\alpha}\Gamma$ for some fine grading $\Gamma$ and homomorphism $\alpha$ from the universal group of $\Gamma$ to $G$ (see \cref{defi:universal-group}). 
However, $\Gamma$ and $\alpha$ are not unique and in practice it is difficult to determine when two such induced $G$-gradings $^{\alpha}\Gamma$ and $^{\beta}\Delta$ are isomorphic. 

On the other hand, if we know all $G$-gradings on $A$, for any $G$, we can try to determine which of them are fine and compute their universal groups. 
This was done for simple Lie superalgebras of series $Q$, $P$ and $B$ in \cite{paper-Qn,paper-MAP,Helens_thesis}. 

% ---

% The following result appears to be ``folklore''. We include a proof for completeness.


% \begin{lemma}\label{lemma:universal-grp}
% 	Let $\mathcal{F}=\{\Gamma_i\}_{i\in I}$, be a family of pairwise nonequivalent fine (abelian) group gradings on a $\Omega$-algebra $A$, where $\Gamma_i$ is a $G_i$-grading and $G_i$ is generated by $\supp \Gamma_i$. 
% 	Suppose that $\mathcal{F}$ has the following property:
% 	for any grading $\Gamma$ on $A$ by an (abelian) group $H$, there exists $i\in I$ and a homomorphism $\alpha:G_i\to H$ such that $\Gamma$
% 	is isomorphic to ${}^\alpha\Gamma_i$. Then
% 	%
% 	\begin{enumerate}[(i)]
% 		\item every fine (abelian) group grading on $A$ is equivalent to a unique $\Gamma_i$; \label{item:all-fine}
% 		\item for all $i\in I$, $G_i$ is the universal (abelian) group of $\Gamma_i$. \label{item:Gi-is-univeral}
% 	\end{enumerate}
% \end{lemma}

% \begin{proof}
% 	Let $\Gamma$ be a fine grading on $A$, realized over its universal group $H$. 
% 	Then there is $i\in I$ and $\alpha: G_i \to H$ such that ${}^\alpha \Gamma_i \iso \Gamma$. 
% 	Writing $\Gamma_i: A = \bigoplus_{g\in G_i} A_g$ and $\Gamma: A = \bigoplus_{h\in H} B_h$, we then have $\vphi \in \Aut(A)$ such that
% 	\[
% 		\vphi\,\big( \bigoplus_{g\in \alpha\inv (h)} A_g \big) = B_h
% 	\]
% 	for all $h\in H$. 
% 	Since $\Gamma$ is fine, we must have $B_h \neq 0$ if, and only if, there is a unique $g\in G_i$ such that $\alpha(g) = h$, $A_g\neq 0$ and $\vphi(A_g) = B_h$. 
% 	Equivalently, $\alpha$ restricts to a bijection $\supp(\Gamma_i) \to \supp(\Gamma)$ and $\vphi(A_g) = B_{\alpha(g)}$ for all $g \in S_i:= \supp (\Gamma_i)$. This proves assertion $(i)$.

% 	Let $G$ be the universal group of $\Gamma_i$. 
% 	It follows that, for all $s_1, s_2, s_3 \in S_i$,
% 	%
% 	\begin{equation*} \label{eq:relations-unvrsl-grp}
% 		\begin{split}
% 			& s_1s_2 = s_3 \text{ is a defining relation of } G \\
% 			\iff & 0 \neq A_{s_1} A_{s_2} \subseteq A_{s_3}\\
% 			\iff & 0 \neq B_{\alpha(s_1)} B_{\alpha(s_2)} \subseteq B_{\alpha (s_3)}\\
% 			\iff & \alpha(s_1)\alpha(s_2) = \alpha(s_3) \text{ is a defining relation of } H.
% 		\end{split}
% 	\end{equation*}
% 	%
% 	Therefore, the bijection $\alpha\restriction_{S_i}$ extends uniquely to an isomorphism $\widetilde{\alpha}: G\rightarrow H$.

% 	By the universal property of $G$, there is a unique homomorphism $\sigma: G\to G_i$ that restricts to the identity on $S_i$. Hence, the following diagram commutes:
% 	%
% 	\begin{center}
% 		\begin{tikzcd}
% 			G \arrow[to=Gi, "\sigma"] \arrow[to = H, "\widetilde{\alpha}"]&&\\
% 			&& |[alias=H]|H\\
% 			|[alias=Gi]|G_i \arrow[to=H, "\alpha"]&&
% 		\end{tikzcd}
% 	\end{center}
% 	%

% 	Since $\widetilde{\alpha}$ is an isomorphism, $\sigma$ must be injective. But $\sigma$ is also surjective since $S_i$ generates $G_i$. 
% 	Hence $G_i$ is isomorphic to $G$. Since $\Gamma$ was an arbitrary fine grading, for each given $j\in I$, we can take $\Gamma = \Gamma_j$ (hence, $i=j$ and $H=G$). This concludes the proof of $(ii)$.
% \end{proof}

% \begin{defi}[\cite{PZ}]
% 	Let $\Gamma$ be a grading on an algebra $A$. We define $\Aut(\Gamma)$ as the group of all self-equivalences of $\Gamma$, i.e., automorphisms of $A$ that
% 	permute the components of $\Gamma$. Let $\operatorname{Stab}(\Gamma)$ be the subgroup of $\Aut(\Gamma)$ consisting of the automorphisms that fix
% 	each component of $\Gamma$. Clearly, $\operatorname{Stab}(\Gamma)$ is a normal subgroup of $\Aut(\Gamma)$, so we can define the \emph{Weil group} of
% 	$\Gamma$ by $\operatorname W (\Gamma) := \frac{\Aut(\Gamma)}{\operatorname{Stab}(\Gamma)}$. The group $\operatorname W (\Gamma)$ can be seen as a subgroup
% 	of the permutation group of the support and also as a subgroup of the automorphism group of the universal group of $\Gamma$.
% \end{defi}

