\section[Gradings on superinvolution-simple superalgebras of types  \texorpdfstring{$M\times M\sop$ and $Q\times Q\sop$}{MxMsop and QxQsop}]{Gradings on superinvolution-simple \\ superalgebras of types $M\times M\sop$ and $Q\times Q\sop$}\label{sec:MxM-and-QxQ-associative}

As before, we continue assuming that $\FF$ is algebraically closed and $\Char \FF \neq 2$. 

Let $R \coloneqq S \times S\sop$ where $S$ is a finite dimensional simple superalgebra, and let $\vphi$ denote the exchange superinvolution. 
By \cref{lemma:SxSsop-simple}, $(R, \vphi)$ is a superinvolution-simple superalgebra. 
If we endow $(R, \vphi)$ with a grading, then it becomes, clearly, graded-superinvolution-simple, but not necessarily graded-simple. 

In the case $R$ is not graded-simple, the situation is easier: since the nonzero proper superideals are $S \times \{ 0 \}$ and $\{ 0 \} \times S\sop$, at lest one of them must be a graded superideal, and since $\vphi$ sends graded subsuperspaces onto graded subsuperspaces, $S \times \{ 0 \}$ is a graded superideal if, and only if, so is $\{ 0 \} \times S\sop$. 
Therefore, we can apply  \cref{cor:SxSsop-with-dcc,thm:iso-D-even-ExEsop,thm:iso-D-odd-ExEsop}, in \cref{grd-sinv-simple}, and specialize them to the case of simple superalgebra $S$, as in  \cref{cor:iso-M-even,cor:iso-M-odd,cor:iso-Q}, in \cref{sec:grd-simple-salg}.

\begin{thm}\label{thm:MxM-type-I}
    Let $(R, \vphi)$ be a superinvolution-simple superalgebra of type $M\times M\sop$ endowed with a $G$-grading and suppose it is not graded-simple. 
    % Then there is a finite subgroup $T \subseteq G^\#$ such that: 
    Then $(R, \vphi)$ is isomorphic to either $M(T, \beta, \kappa_\bz, \kappa_\bo) \times M(T, \beta, \kappa_\bz, \kappa_\bo)\sop$ (see \cref{def:Gamma-T-beta-kappa-even}), or to $M (T, \beta, p, \kappa) \times M (T, \beta, p, \kappa)\sop$ (see \cref{def:Gamma-T-beta-kappa-odd}), but not both, where we consider the exchange superinvolution in both cases. 
    
    \noindent
    Moreover, $M(T, \beta, \kappa_\bz, \kappa_\bo) \times M(T, \beta, \kappa_\bz, \kappa_\bo)\sop \iso M(T', \beta', \kappa_\bz', \kappa_\bo') \times M(T', \beta', \kappa_\bz', \kappa_\bo')\sop$ if, and only if, $T = T'$ and one of the following conditions holds:
	\begin{enumerate}[(i)]
	    \item $\beta'=\beta$ and there is $g\in G$ such that such that either $g \cdot \kappa_{\bar 0}'=\kappa_{\bar 0}$ and $g \cdot \kappa_{\bar 1}'=\kappa_{\bar 1}$, or $g \cdot \kappa_{\bar 0}'=\kappa_{\bar 1}$ and $g \cdot \kappa_{\bar 1}'=\kappa_{\bar 0}$; 
	    \item $\beta'=\beta\inv$ and there is $g\in G$ such that either $g \cdot \kappa_{\bar 0}'=\kappa_{\bar 0}\Star$ and $g \cdot \kappa_{\bar 1}'=\kappa_{\bar 1}\Star$, or $g \cdot \kappa_{\bar 0}'=\kappa_{\bar 1}\Star$ and $g \cdot \kappa_{\bar 1}'=\kappa_{\bar 0}\Star$;
	\end{enumerate}
    and $M (T, \beta, p, \kappa) \times M (T, \beta, p, \kappa)\sop \iso M (T', \beta', p', \kappa') \times M (T', \beta', p', \kappa')\sop$ if, and only if, $T = T'$, $p=p'$ and one of the following conditions holds:
    \begin{enumerate}[(i)]
        \setcounter{enumi}{2}
	    \item $\beta'=\beta$ and there is $g\in G$ such that $\kappa' = g \cdot \kappa$;
	    \item $\beta'=\beta\inv$ and there is $g\in G$ such that $\kappa' = g \cdot \kappa\Star$. \qed
	\end{enumerate}
\end{thm}

\begin{thm}\label{thm:QxQ-type-I}
    Let $(R, \vphi)$ be a superinvolution-simple superalgebra of type $Q\times Q\sop$ endowed with a $G$-grading and suppose it is not graded-simple. 
    Then $(R, \vphi)$ is isomorphic to $Q (T^+, \beta^+, h, \kappa) \times Q (T^+, \beta^+, h, \kappa)\sop$ (see \cref{def:Gamma-T-beta-kappa-Q}), where we consider the exchange superinvolution. 
    
    \noindent
    Moreover, $Q (T^+, \beta^+, h, \kappa) \times Q (T^+, \beta^+, h, \kappa)\sop \iso Q (T^+, \beta^+, h, \kappa) \times Q (T^+, \beta^+, h, \kappa)\sop$ if, and only if, $T^+ = T'^+$, $h = h'$ and one of the following conditions holds: 
    \begin{enumerate}[(i)]
	    \item $\beta'^+ = \beta^+$ and there is $g\in G$ such that $\kappa' = g \cdot \kappa$;
	    \item $\beta'^+ = (\beta^+)\inv$ and there is $g\in G$ such that $\kappa' = g \cdot \kappa\Star$. \qed
	\end{enumerate}
\end{thm}

Now let us focus on the graded-simple case. 
By \cref{cor:SxSsop-with-dcc}, if $(R, \vphi)$ is a finite dimensional superalgebra with superinvolution with $R$ graded-simple, then $(R, \vphi) \iso E(\D, \U, B)$ for some triple $(\D, \U, B)$ as in Definition \ref{def:E(D,U,B)}. 
Let $(T, \beta, p, \eta, \kappa, g_0, \delta)$ be the parameters of $(\D, \U, B)$ and let $\vphi_0$ be the superinvolution on $\D$ determined by $\eta$. 

% \begin{lemma}\label{lemma:D-has-same-type-sinv}
%     If $(R, \vphi)$ is superinvolution-simple, then $(\D, \vphi_0)$ is superinvolution-simple of the same type. 
% \end{lemma} 

% \begin{proof}
%     From \cref{prop:vphi-R-simple-D-simple}, we have that $(\D,\vphi_0)$ is superinvolution-simple. 
%     From \cref{prop:R-and-D-have-the-same-center} we can identify $Z(\D)$ with $Z(R)$, and from \cref{prop:types-of-SA-via-center}, the center distinguishes the types.
% \end{proof}

\begin{prop}\label{prop:types-of-D-via-rad-beta}
    The superalgebra with superinvolution $(R, \vphi)$ is superinvolution-simple but not simple if, and only if, $\rad \tilde\beta = \langle f \rangle$, where $f$ has order $2$ and $\eta(f) = -1$.
    If this is the case, then $(R, \vphi)$ has the same type as $(\D, \vphi_0)$, which is $M\times M\sop$ if $\rad \beta = \rad \tilde\beta$ and $Q\times Q\sop$ if $\rad \beta \neq \rad \tilde\beta$. 
\end{prop}

\begin{proof}
    Suppose $(R, \vphi)$ is superinvolution-simple but not simple. 
    \Cref{prop:vphi-R-simple-D-simple,prop:R-simple-iff-D-simple} imply that $(\D, \vphi_0)$ is also superinvolution-simple but not simple. 
    By \cref{prop:R-and-D-have-the-same-center}, $Z(R)$ is isomorphic to $Z(\D)$, and by \cref{prop:types-of-SA-via-center}, different types have nonisomorphic centers, hence $(R, \vphi)$ has the same type as $(\D, \vphi_0)$. 
    
    Define $\vphi_0' \coloneqq \vphi_0$ if $B$ is even and $\vphi_0' \coloneqq \upsilon\vphi_0$ if $B$ is odd, where $\upsilon$ is the parity automorphism. 
    By \cref{prop:R-and-D-have-the-same-center-vphi}, $(Z(R), \vphi)$ is isomorphic to $(Z(\D), \vphi_0')$. 
    Again by  \cref{prop:types-of-SA-via-center} and by \cref{thm:refinement-DxDsop}, 
    $(Z(\D), \vphi_0')$ must be one of the graded-division superalgebras of \cref{ex:now-FZ2-is-division,ex:now-FZ4-is-division}, up to relabeling the homogeneous components. 
    In any case, we get that $\supp Z(\D)\even = (\rad \beta) \cap T^+ = \rad \tilde\beta$ is a cyclic group of order $2$ and $\eta$ has value $-1$ on the generator. 
    
    For the converse, by \cref{prop:vphi-R-simple-D-simple,prop:R-simple-iff-D-simple}, it suffices to prove that $\D$ is $\vphi_0$-simple. 
    Let $\barr \D$ be a graded-division superalgebra associated to $(T / \langle f \rangle, \bar \beta, \bar p)$, where $\bar \beta$ and $\bar p$ are induced by $\beta$ and $p$, respectively. 
    Clearly, the bicharacter induced by $\tilde\beta$ on $T / \langle f \rangle$ is nondegenerate, so, by \cref{cor:tilde-beta-nondeg}, $\barr \D$ is simple as a superalgebra. 
    By \cref{lemma:undoubling-D}, with $\D$ taking the role of $\mc E$ and $\overline{\D}$ taking the role of $\D$, $(\D, \vphi_0)$ is isomorphic to $\barr \D \times \barr \D\sop$, with exchange superinvolution, endowed with a  graded-division refinement of its natural grading.
    We conclude, by \cref{prop:only-SxSsop-is-simple}, that $\D$ is $\vphi_0$-simple, as desired. 
\end{proof}

From now on, let us suppose $(R,\vphi)$ is superinvolution-simple of type $M\times M\sop$ or $Q\times Q\sop$ and get some corollaries from \cref{prop:types-of-D-via-rad-beta}. 

\begin{cor}\label{cor:associative-type-II-odd-m=n}
    If the superalgebra with superinvolution $M(m,n) \times M(m,n)\sop$ admits a grading that makes it graded-simple with $\D$ odd, then $m = n$.
\end{cor}

\begin{proof}
    If $M(m,n) \times M(m,n)\sop$ has an odd division grading, then $\dim (M(m,n) \times M(m,n)\sop)\even = (M(m,n) \times M(m,n)\sop)\odd$. 
    Similarly to \cref{lemma:odd-M-m=n}, this only happens when $m = n$. 
    
    For the general case, by \cref{prop:types-of-D-via-rad-beta}, we have that $M(m,n) \times M(m,n)\sop \iso M(k) \tensor \D$, where $\D \iso M(m',n') \times M(m',n')\sop$ and $m = km'$, $n = kn'$. 
    It follows that $m' = n'$ and, hence, $m = n$. 
\end{proof}

\begin{cor}\label{cor:T+-is-elem-2-grp}
    The subgroup $T^+ \subseteq T$ is $2$-elementary and, for every $t\in T^-$, $t^2 = f$. 
\end{cor}

\begin{proof}
	By \cref{prop:types-of-D-via-rad-beta}, we can write $\rad \tilde\beta = \{ e, f\}$, with $\eta(e) = 1$ and $\eta(f) = -1$.  
	Let $t\in T$. 
	By \cref{cor:super-anti-auto-squares-in-radical}, $t^2 \in \rad\tilde\beta$. 
	If $t$ is even, then $\eta(t^2) = \eta(t)^2 = 1$, hence $t^2 = e$.
	If $t$ is odd, then, $\eta(t^2) = -\eta(t)^2 = -1$, hence $t^2 = f$. 
\end{proof}

For the next results, we recall the notion of parity element (\cref{def:parity-element}). 

\begin{cor}\label{cor:eta-parity-element}
    There are precisely $2$ parity elements in $T$, $t_p$ and $t_p'$, and $\eta(t_p) = - \eta(t_p')$. 
\end{cor}

\begin{proof}
    From \cref{cor:existence-parity-element}, we know that there are $2$ parity elements and that $t_p' = f t_p$. 
    Then $\eta(t_p) = - \eta(t_p')$ since $f\in \rad \tilde\beta$ and $\eta(f) = -1$. 
\end{proof}

% -- fixing \eta --

\begin{defi}\label{def:eta-parity-element}
    We define \emph{the $\eta$-parity element} of $T$ to be the unique parity element $t_p \in T$ such that $\eta(t_p) = 1$. 
\end{defi}

Note that if $T = T^+$, then the $\eta$-parity element is $e \in T$. 

We will now investigate what happens if we change the map $\eta$. 
Let $\eta'\from T \to \pmone$ be another map such that $\mathrm{d}\eta' = \tilde \beta$ and let $\vphi_0'$ be the corresponding superinvolution on $\D$.  

\begin{lemma}\label{lemma:one-eta}
    The graded-division superalgebra with superinvolution $(\D, \vphi_0')$ is super\-in\-vo\-lu\-tion-sim\-ple if, and only if, $\eta' \sim \eta$ (see \cref{def:equiv-eta}). 
\end{lemma}

\begin{proof}
    By \cref{prop:types-of-D-via-rad-beta}, $(\D, \vphi_0')$ is superinvolution-simple if, and only if, $\eta'(f) = -1$.  
    Suppose $\eta' \sim \eta$. 
    Then there is $t\in T$ such that $\eta' = \tilde\beta(t, \cdot) \eta$ and, hence, $\eta'(f) = \tilde\beta(t, f) \eta(f) = -1$. 
    
    Conversely, if $\eta' (f) = -1$, define $\chi\from T \to \pmone$ by $\chi(t) = \eta(t)\eta'(t)$, for all $t\in T$. 
    Since $\mathrm{d}\eta' = \tilde\beta = \mathrm{d}\eta$, $\mathrm{d}\chi = 1$, \ie, $\chi$ is a character of $T$. 
    Also, $\chi(f) = 1$. 
    Hence $\chi$ induces a character of $T/ \langle f \rangle$ and, since $\tilde\beta$ induces a nondegenerate skew-symmetric bicharacter on $T/ \langle f \rangle$, there is $t\in T$ such that $\chi = \tilde\beta(t, \cdot)$. 
    We conclude that $\eta' = \tilde\beta(t, \cdot) \eta$, \ie, $\eta' \sim \eta$.
\end{proof}

The following is straightforward:

\begin{lemma}\label{lemma:2-etas}
    Suppose $\eta' \sim \eta$. 
    Then the $\eta'$-parity element of $T$ is the same as the
    $\eta$-parity element of $T$ if, and only if, $\eta' \sim_\bz \eta$ (see \cref{def:equiv-eta-even}). \qed
\end{lemma} 

% --- end of fixing \eta --- 

\begin{prop}\label{cor:rad-beta+-MxM-QxQ}
    Let $t_p\in T$ be a parity element of $T$. 
    Then: 
    \begin{enumerate}[(a)]
        \item If $(R,\vphi)$ is even of type $M\times M\sop$, then $\rad \beta^+ = \rad \beta = \langle f \rangle \iso \ZZ_2$; 
        \label{item:even-MxM}
        %
        \item If $(R,\vphi)$ is odd of type $M\times M\sop$, then $\rad \beta^+ = \langle f, t_p \rangle \iso \ZZ_2 \times \ZZ_2$ and $\rad \beta = \langle f \rangle \iso \ZZ_2$; 
        \label{item:odd-MxM}
        %
        \item If $(R,\vphi)$ is of type $Q\times Q\sop$, then $\rad \beta^+ = \langle f \rangle \iso \ZZ_2$, $\rad \beta = \langle t_p \rangle \iso \ZZ_4$ and $t_p^2 = f$. 
        \label{item:QxQ}
        %
    \end{enumerate}
\end{prop}

\begin{proof}
    This follows from \cref{cor:radical-with-parity,prop:types-of-D-via-rad-beta,cor:T+-is-elem-2-grp}. 
\end{proof}


\begin{thm}\label{thm:tensor-prd-decomposition}
	Let $(\D, \vphi_0)$ be a finite dimensional superinvolution-simple graded-division superalgebra, not simple as a superalgebra, associated to $(T, \beta, p, \eta)$, and let $t_p$ be its $\eta$-parity element. 
	If $\D$ is odd of type $M\times M\sop$, choose $t_1 \in T^-$.  
	Then there are superinvolution-simple graded-division superalgebras $(\mc C,\vphi_{\mc C})$ and $(\mc M,\vphi_{\mc M})$ such that $(\D, \vphi_0) \iso (\mc C \tensor \mc M, \vphi_{\mc C} \tensor \vphi_{\mc M})$, $(\mc M,\vphi_{\mc M})$ is of type $M$ (and, hence, even) and 
	\begin{enumerate}[(a)]
	    \item If $\D$ is even of type $M\times M\sop$, $\mc C = {}^\alpha (\FF\ZZ_2)$ considered as an even graded-division superalgebra with superinvolution $\vphi_{\mc C}$ as in \cref{ex:now-FZ2-is-division}, and $\alpha\from \ZZ_2 \to \rad \beta^+$ is the unique group isomorphism; 
	    %
	    \item If $\D$ is odd of type $M\times M\sop$, then $\mc C = {}^\alpha \mc O$, 
	    where $\mc O$ is the graded-division superalgebra with superinvolution $\vphi_{\mc C}$ as in \cref{ex:superalgebra-O}, and $\alpha\from \ZZ_2 \times \ZZ_4 \to \langle t_p, t_1 \rangle$ is the group isomorphism given by $\alpha (\bar 1, \bar 0) \coloneqq t_p$ and $\alpha (\bar 0, \bar 1) \coloneqq t_1$; 
	    %
	    \item If $\D$ is of type $Q\times Q\sop$, then $\mc C = {}^\alpha (\FF\ZZ_4)$, 
	    where $\FF\ZZ_4$ is the odd graded-division superalgebra  with superinvolution $\vphi_{\mc C}$ as in \cref{ex:now-FZ4-is-division}, and $\alpha\from \ZZ_4 \to \langle t_p \rangle$ given by $\alpha (\bar 1) \coloneqq t_p$.
	\end{enumerate}
\end{thm}

\begin{proof}
    Since, by \cref{cor:T+-is-elem-2-grp}, $T^+$ is an elementary $2$-group, it is a vector space over the field with $2$ elements. 
    Fix a basis $\mc B$ for $\rad \beta^+$ and complete it to a basis  $\mc B \cup \mc B'$ of $T^+$. 
    In the case $\D$ is odd of type $M\times M\sop$, we can choose $\mc B'$ such that $\tilde\beta(t_1, b) = 1$ for all $b\in \mc B'$. 
    Indeed, if $\tilde\beta(t_1, b) = -1$, we replace $b$ by $t_p b$; note that we still get a complement for $\mc B$ since $t_p \in \rad \beta^+$. 
    
    We define $S \subseteq T^+$ to be the subgroup generated by $\mc B'$. 
    Then $T^+ = (\rad \beta^+) \times S$ and, hence, $\beta^+\restriction_{S\times S} = \beta\restriction_{S\times S}$ is a nondegenerate alternating bicharacter. 
    Let $\mc M$ be a graded division algebra associated to $(S, \beta\restriction_{S\times S})$, and let $\vphi_{\mc M}$ be the superinvolution determined by $\eta\restriction_{S}$. 
    
    For each of the possibilities for $\D$, we can write $T = C \times S$ where $\beta(C, S) = 1$, and then apply \cref{lemma:colour-tensor-product} to finish the proof. 
    If $\D$ is even of type $M\times M\sop$, take $C \coloneqq \rad \beta^+ = \rad \beta \iso \ZZ_2$. 
    If $\D$ is of type $Q\times Q\sop$, take $C \coloneqq \rad \beta = \langle t_p \rangle \iso \ZZ_4$. 
    If $\D$ is odd of type $M\times M\sop$, take $C \coloneqq \langle \rad \beta^+, t_1 \rangle = \langle t_p, t_1 \rangle \iso \ZZ_2 \times \ZZ_4$ (note that here we are using our choice of $\mc B'$ to have $\beta(C, S) = 1$). 
    In every case, it is easy to see that $(\mc C, \vphi_{\mc C})$ as in the statement is a graded-division superalgebra with superinvolution associated to $(C, \beta\restriction_{C \times C}, p\restriction_{C}, \eta\restriction_{C})$. 
\end{proof}

% --- Std Realization --- %
We will now adapt the proof of \cref{thm:tensor-prd-decomposition} to construct standard realizations of superinvolution-simple graded-division superalgebras that are not simple as superalgebras. 

\begin{defi}\label{def:std-realization-MxM-QxQ}
    Let $T \subseteq G^\#$ be a finite subgroup, let $\beta\from T\times T \to \pmone$ be an alternating bicharacter and let $p\from T \subseteq G^\# \to \ZZ_2$ be the restriction of the projection on the $\ZZ_2$ component of $G^\# = G \times \ZZ_2$. 
    Define $T^+, T^- \subseteq T$, $\tilde\beta\from T\times T \to \pmone$ and $\beta^+\from T^+\times T^+ \to \pmone$ as usual (see \cref{ssec:supermodules-over-D,ssec:T-beta-p}).
    Suppose that:
    \begin{itemize}
        \item $\rad \tilde \beta = \langle f \rangle$ for an element $f\in T^+$ of order $2$;
        \item $T^+$ is an elementary $2$-group;
        \item for every $t\in T^-$, $t^2 = f$.
    \end{itemize}
    Under these assumptions, we have precisely $2$ parity elements in $T$. 
    Let $t_p \in T$ one of them, taking $t_p \coloneqq e$ in the case $T = T^+$. 
    Also note that:
    \begin{enumerate}[(a)]
        \item if $t_p =e$, then $T = T^+$ and $\beta^+ = \beta = \tilde\beta$;
        %
        \item if $e \neq t_p \in T^+$, then $\rad \beta^+ = \langle f, t_p \rangle$ and $\rad \beta = \langle f \rangle$;
        %
        \item if $t_p \in T^-$, then $\rad \beta^+ = \langle f \rangle$ and $\rad \beta = \langle t_p \rangle$;
    \end{enumerate}
    where we have used \cref{cor:radical-with-parity} for (b) and (c).
    Then choose:
    \begin{enumerate}[(i)]
        \item an element $t_1 \in T^-$, if we are in case (b);
        \label{item:choose-t_1-std-realization}
        \item a subgroup $K \subseteq T^+$ such that $(\rad \beta^+) \times K = T^+$ and, if we are in case (b), $\beta(t_1, K) = 1$;
        \label{item:K-can-be-orthogonal-to-t_1}
        \item a standard realization $\mc M$ (see     \cref{def:standard-realization}) of a matrix algebra with a division grading  associated to $(K, \beta\restriction_{K\times K})$. 
        \label{item:choose-mc-M}
    \end{enumerate}
    A subgroup $K$ in item \eqref{item:K-can-be-orthogonal-to-t_1} exists because $T^+$ is an elementary $2$-group and, in case (b), the choice of $K$ satisfying $\beta(t, K) = 1$ is possible by the same argument as in the proof of \cref{thm:tensor-prd-decomposition}. 
    A standard realization in item \eqref{item:choose-mc-M} is defined since $\beta\restriction_{K\times K} = \beta^+\restriction_{K\times K}$ is, clearly, nondegenerate. 
    
    Let $\vphi_{\mc M}$ denote the transposition on $\mc M$, and let $(\mc C, \vphi_{\mc C})$ be as in \cref{thm:tensor-prd-decomposition}: item (a) if $t_p =e$, item (b) if $e \neq t_p \in T^+$, and item (c) if $t_p \in T^-$.
    We say that $(\mc C \tensor \mc M, \vphi_{\mc C} \tensor \vphi_{\mc M})$ is a \emph{standard realization} of a graded-division superalgebra with superinvolution associated to $(T, \tilde\beta, t_p)$. 
\end{defi}

Note that for the $\eta$ corresponding to $ \vphi_{\mc C} \tensor \vphi_{\mc M}$, the chosen $t_p$ becomes the $\eta$-parity element of $T$. 
In what follows, for each triple $(T, \tilde\beta, t_p)$, we will fix a standard realization $(\D, \vphi_0)$. 

% --- MxMsop even --- %

\begin{defi}\label{def:model-grd-MxM-even}
    Let $m, n\in \ZZ_{\geq 0}$, not both zero, 
    let $(T, \beta, t_p)$ be as in \cref{def:std-realization-MxM-QxQ} with $T^+ = T$ (so $t_p = e$), 
    let $g_0 \in G^\#$ be any element, and
    let $\kappa_\bz, \kappa_\bo \from G/T \to \ZZ_{\geq 0}$ be  $g_0$-admissible maps (see \cref{inertia-even-and-odd-case}) such that $k_\bz \sqrt{|T|/2} = m$ and $k_\bo \sqrt{|T|/2} = n$, where $k_\bz \coloneqq |\kappa_\bz|$ and $k_\bo \coloneqq |\kappa_\bo|$. 
    
    Choose a graded $\D$-supermodule $\U$ and a sesquilinear form $B\from {\U\times \U} \to \D$ such that $(\U, B)$ has inertia determined by $(\kappa_\bz, \kappa_\bo)$. 
    The graded superalgebra with superinvolution $M^{\mathrm{ex}}(T, \beta, \kappa_\bz, \kappa_\bo, g_0)$ is defined to be $E(\D, \U, \B)$. 
    With a choice of a graded basis for $\U$, this becomes
    the graded superalgebra $M_{k_\bz | k_\bo} (\D)$, endowed with the superinvolution $\vphi$ given by 
    \[
        \vphi(X) \coloneqq \Phi\inv \vphi_0(X\stransp) \Phi,
    \]
    for all $X \in M_{k_\bz | k_\bo} (\D)$, where $\Phi$ is the matrix representing $B$ with respect to the chosen basis. 
\end{defi}

\begin{thm}\label{thm:MxM-even}
    Suppose the superalgebra with superinvolution $M(m,n) \times M(m,n)\sop$ is endowed with an even $G$-grading making it graded-simple. 
    Then it is isomorphic, as a graded superalgebra with superinvolution, to $M^{\mathrm{ex}}(T,\beta, \kappa_\bz, \kappa_\bo, g_0)$ as in \cref{def:model-grd-MxM-even}. 
    Moreover, $M^{\mathrm{ex}} (T, \beta, \kappa_\bz, \kappa_\bo, g_0) \iso M^{\mathrm{ex}} (T', \beta', \kappa_\bz', \kappa_\bo', g_0')$ if, and only if, $T =T'$, $\beta = \beta'$ and there is $g \in G$ such that one of the following conditions holds:
    \begin{enumerate}[(i)]
        \item $\kappa_\bz' = g\cdot\kappa_\bz$, $\kappa_\bo' = g\cdot\kappa_\bo$ and $g_0' = g^{-2}g_0$;
        \item $\kappa_\bz' = g\cdot\kappa_\bo$, $\kappa_\bz' = g\cdot\kappa_\bo$ and $g_0' = fg^{-2}g_0$. 
    \end{enumerate}
\end{thm}

\begin{proof}
    By \cref{thm:vphi-iff-vphi0-and-B,thm:vphi-involution-iff-delta-pm-1}, our graded superalgebra with superinvolution is isomorphic to $E(\D, \U, B)$, with $(\D, \U, B)$ as in Definition \ref{def:E(D,U,B)}. 
    Let $(T, \beta, p, \eta, \kappa, g_0, \delta)$ be the parameters of $(\D, \U, B)$, and define $\kappa_\bz, \kappa_\bo$ from $\kappa$ as usual. 
    Using \cref{thm:iso-(R-vphi)-with-parameters,lemma:one-eta}, we can assume that $\eta$ is the one from the fixed standard realization associated to $(T, \beta, t_p)$, where $t_p = e$. 
    Then $E(\D, \U, B)$ is isomorphic to $M^{\mathrm{ex}} (T, \beta, \kappa_\bz, \kappa_\bo, g_0)$ by \cref{thm:iso-(R-vphi)-with-parameters,prop:after-fixing-delta}. 
    
    The isomorphism condition follows from \cref{thm:iso-(R-vphi)-with-parameters,prop:after-fixing-delta} and the fact that the group $\mc G$ (see \cref{eq:mathcal-G}) is $\big( \{e\} \times (G \times \{ \bar 0 \}) \big) \cup \big( \{f\} \times (G \times \{ \bar 1 \}) \big)$ in our case.
\end{proof}


% --- MxMsop odd --- %

We now classify odd graded superalgebras with superinvolution of types $M\times M\sop$ and $Q \times Q\sop$. 
Recall that in this situation the map $\kappa\from G^\#/T \to \ZZ_{\geq 0}$ carries the same information as a map $G/T^+ \to \ZZ_{\geq 0}$ which, by abuse of notation, is also denoted by $\kappa$ (see \cref{ssec:supermodules-over-D}). 

% @3

\begin{defi}\label{defi:odd-D-kappa-g_0-admissible}
    Let $T^+ \subseteq G$ be a finite subgroup, $\beta^+\from T^+\times T^+ \to \FF^\times$ be an alternating bicharacter let $\eta^+\from T^+ \to \pmone$ be a map such that $\mathrm{d}\eta^+ = \beta^+$ and let $g_0 \in G = G \times \{ \bar 0 \} \subseteq G^\#$. 
    We say that a map $\kappa\from G/T^+ \to \ZZ_{\geq 0}$ with finite support is \emph{$g_0$-admissible} if
    %
	\begin{enumerate}[(i)]
		\item $\kappa(x) = \kappa(g_0\inv x\inv)$ for all $x \in G/T^+$;
		\item if $g_0 x^2 = T^+$ and 
		for some (and, hence, any) $g\in x$, we have $\eta^+(g_0g^2) = -1$, then $\kappa (x)$ is even.
	\end{enumerate}
\end{defi}

It is straightforward to check that $\kappa\from G/T^+ \to \ZZ_{\geq 0}$ is $g_0$-admissible if, and only if, $(\kappa, g_0) \in \mathbf{I}(T,\beta,p)^{\bz, +}_\eta$ (see \cref{defi:X(D)}, where $\kappa$ should be regarded as a function $G^\#/T \to \ZZ_{\geq 0}$). 
In other words, $\kappa$ is $g_0$-admissible if, and only if, there is a pair $(\U, B)$ whose inertia is $(\eta, \kappa, g_0, 1)$ (see Definition \ref{def:parameter-of-(U,B)}). 
In this case, we say that $(\U, B)$ has \emph{inertia determined by} $\kappa$. 

\begin{defi}\label{def:model-grd-MxM-odd-or-QxQ}
    Let $n\in \ZZ_{> 0}$, 
    let $(T, \beta, t_p)$ be as in \cref{def:std-realization-MxM-QxQ} with $T^+ \neq T$, 
    let $g_0 \in G$ be any element and
    let $\kappa\from G/T^+ \to \ZZ_{\geq 0}$ be a $g_0$-admissible map such that $k \sqrt{|T|/2} = 2n$, if $t_p \in T^+$, and $k \sqrt{|T|} = 2n$, if $t_p \in T^-$, where $k \coloneqq |\kappa|$.
    Choose a graded $\D$-supermodule $\U$ and a nondegenerate sesquilinear form $B\from \U\times \U \to \D$ such that $(\U, B)$ has inertia determined by $\kappa$. 
    The graded superalgebra with superinvolution $E(\D, \U, \B)$ will be denoted by $M^{\mathrm{ex}}(T, \beta, t_p, \kappa, g_0)$, if $t_p \in T^+$, and by $Q^{\mathrm{ex}}(T, \beta, t_p, \kappa, g_0)$, if $t_p \in T^-$. 
    With a choice of an even graded basis for $\U$, $E(\D, \U, \B)$ becomes $M_k (\D)$, endowed with the superinvolution $\vphi$ given by 
    \[
        \vphi(X) \coloneqq \Phi\inv \vphi_0(X\transp) \Phi,
    \]
    for all $X \in M(\D)$, where $\Phi$ is the matrix representing $B$ with respect to the chosen basis. 
\end{defi}

\begin{thm}\label{thm:MxM-odd}
    Suppose the superalgebra with superinvolution $M(n,n) \times M(n,n)\sop$ (respectively, $Q(n) \times Q(n)\sop$) is endowed with an odd $G$-grading making it graded-simple. 
    Then it is isomorphic, as a graded superalgebra with superinvolution, to $M^{\mathrm{ex}}(T,\beta, t_p, \kappa, g_0)$ (resp., $Q^{\mathrm{ex}}(T,\beta, t_p, \kappa, g_0)$) as in \cref{def:model-grd-MxM-odd-or-QxQ}. 
    Moreover, the graded superalgebras with superinvolution $M^{\mathrm{ex}} (T, \beta,  t_p, \kappa, g_0)$  and $M^{\mathrm{ex}} (T', \beta',  t_p', \kappa', g_0')$ (resp., $Q^{\mathrm{ex}} (T, \beta,  t_p, \kappa, g_0)$ and $Q^{\mathrm{ex}} (T', \beta',  t_p', \kappa', g_0')$) are isomorphic if, and only if, $T =T'$, $\beta = \beta'$, $t_p = t_p'$ and there is $g \in G$ such that $\kappa' = g\cdot\kappa$ and $g_0' = g^{-2}g_0$. 
\end{thm}

\begin{proof}
    Suppose $M(n,n) \times M(n,n)\sop$ ($Q(n) \times Q(n)\sop$) is endowed with an odd $G$-grading making it graded-simple. 
    By \cref{thm:vphi-iff-vphi0-and-B,thm:vphi-involution-iff-delta-pm-1}, it is isomorphic to $E(\D, \U, B)$, with $(\D, \U, B)$ as in Definition \ref{def:E(D,U,B)}. 
    Let $(T, \beta, p, \eta, \kappa, g_0, \delta)$ be the parameters of $(\D, \U, B)$ and let $t_p$ be its $\eta$-parity element. 
    Using \cref{thm:iso-(R-vphi)-with-parameters,lemma:2-etas}, we can assume that $\eta$ is the one from the fixed standard realization associated to $(T, \beta, t_p)$. 
    Then $E(\D, \U, B)$ is isomorphic to $M^{\mathrm{ex}} (T, \beta, \kappa_\bz, \kappa_\bo, g_0)$ ($Q^{\mathrm{ex}} (T, \beta, \kappa_\bz, \kappa_\bo, g_0)$) by \cref{thm:iso-(R-vphi)-with-parameters,prop:after-fixing-delta}. 
    
    To prove the isomorphism condition, let  $\tilde\kappa\from G^\#/T \to \ZZ_{\geq 0}$ and  $\tilde\kappa\from G^\#/T' \to \ZZ_{\geq 0}$ be the maps in terms of $G^\#$ corresponding to $\kappa'$ and $\kappa'$, respectively. 
    By \cref{thm:iso-(R-vphi)-with-parameters,prop:now-fixing-parity-of-g0,lemma:2-etas}, the gradings are isomorphic \IFF $T =T'$, $\beta = \beta'$, $t_p = t_p'$ and 
    
    % two  continuations, (1) and (2)
    %
    % (1)
    $(\tilde\kappa, g_0)$ and $(\tilde\kappa', g_0')$ are in the same $\mc G$-orbit in $\mathbf{I}(T,\beta,p)^{\bz, +}_\eta$. 
    Note that in the present case, $\mc G = \big( \{e\} \times (G \times \{ \bar 0 \}) \big) \cup \big( \{f\} \times (G \times \{ \bar 1 \}) \big)$ (see \cref{eq:mathcal-G}), so 
    $\mc G = \big( \{e\} \times (G \times \{ \bar 0 \}) \big) \cup (f, \tilde t)\big( \{e\} \times (G \times \{ \bar 0 \}) \big)$, for any $\tilde t \in T^-$. 
    We claim the action by $(f, \tilde t)$ is trivial. 
    Indeed, $(f, \tilde t) \cdot (\tilde\kappa, g_0) = (\tilde t \cdot \tilde\kappa, f \tilde t ^{-2} g_0)$ (see \cref{eq:mc-G-action}), and we have that $\tilde t \cdot \tilde\kappa = \kappa$, since $\tilde t \in T$, and $f \tilde t ^{-2} = e$. 
    Therefore, the $\mc G$-orbits coincide with the $\big( \{e\} \times (G \times \{ \bar 0 \}) \big)$ orbits. 
    The result follows. 
    
    %
    % (2)
    there is $(t, \tilde g) \in \mc G \subseteq (\rad \tilde \beta) \times G^\#$ such that $(\kappa', g_0') = (t, \tilde g) \cdot (\kappa, g_0)$. 
    In our case, $\mc G = \big( \{e\} \times (G \times \{ \bar 0 \}) \big) \cup \big( \{f\} \times (G \times \{ \bar 1 \}) \big)$ (see \cref{eq:mathcal-G}). 
    If $t = e$, then $\tilde g \in G = G\times \{ \bar 0 \}$, so the result follows by taking $g \coloneqq \tilde g$. 
    If $t = f$, let $\tilde t \in T^-$ and put $g \coloneqq \tilde g \tilde t$. 
    The map $(\tilde g \cdot \tilde \kappa)\from G^\#/T \to \ZZ_{\geq 0}$ corresponds to the map $(g \cdot \kappa)\from G/T^+ \to \ZZ_{\geq 0}$. 
    Indeed, for every $s\in T^+$,
    \[
    (g\cdot \kappa) (sT^+) =
    \kappa (g\inv sT^+) =
    \kappa (\tilde g\inv \tilde t\inv sT^+) = 
    \tilde\kappa (\tilde g\inv \tilde t\inv sT) = 
    \tilde\kappa (\tilde g\inv \tilde sT)  =
    (\tilde g \cdot \tilde\kappa)(sT).
    \]
    Therefore, $(f, \tilde g) \cdot g_0 = f \tilde g ^{-2} g_0 = f g ^{-2} \tilde t ^{2} g_0 = fg ^{-2} f g_0 =  g ^{-2} g_0$, concluding the proof. 
\end{proof}

As done in \cref{chap:grd-simple-assc} for $Q(n)$, gradings on the even part, $Q(n)\times Q(n)\sop$ can be easily reduced to gradings on $(Q(n)\times Q(n)\sop)\even \iso M(n, 0) \times M(n, 0) \sop$. 
Let $(T, \tilde\beta, t_p)$ be as in case (c) in \cref{def:std-realization-MxM-QxQ}, and let $h\in G$ be the the projection of $t_p$ to $G$, \ie, $t_p = (h, \bar 1)$. 
Then $(T^+, \beta^+, e)$ as in case (a) and $h^2 = f$. 
Conversely, given $(T^+, \beta^+, e)$ is as in case (a) and an element $h\in G$ with $h^2 = f$, we can define $t_p \coloneqq (h, \bar 1)$, $T \coloneqq T^+ \cup t_p T^+$ and $\beta\from T\times T \to \FF^\times$ by $\beta(s t_p^i, t t_p^j) = \beta(s,t)$, for all $s, t \in T^+$ and $i, j \in \ZZ$. 
Then $(T, \beta, t_p)$ is a triple as in case (c). 
In other words, we can reparametrize $(T, \beta, t_p)$ by $(T^+, \beta^+, h)$, which are parameters only in terms of the group $G$. 
The graded superinvolution-simple superalgebra $Q^{\mathrm{ex}} (T, \beta, \kappa, g_0)$ in \cref{def:model-grd-MxM-odd-or-QxQ} will also be denoted by $Q^{\mathrm{ex}} (T^+, \beta^+,  h, \kappa, g_0)$. 

By \cref{thm:MxM-odd}, we have:

\begin{cor}\label{cor:QxQ-reduced-to-MxM}
    Suppose the superalgebra with superinvolution $Q(n) \times Q(n)\sop$ is endowed with a $G$-grading making it graded-simple. 
    Then it is isomorphic, as a graded superalgebra with superinvolution, to $Q^{\mathrm{ex}}(T^+,\beta^+, h, \kappa, g_0)$ as above. 
    Moreover, the graded superalgebras with superinvolution $Q^{\mathrm{ex}} (T^+, \beta^+,  h, \kappa, g_0)$ and $Q^{\mathrm{ex}} (T'^+, \beta'^+,  h', \kappa', g_0')$ are isomorphic if, and only if, $T^+ =T'^+$, $\beta^+ = \beta'^+$, $h = h'$ and there is $g \in G$ such that $\kappa' = g\cdot\kappa$ and $g_0' = g^{-2}g_0$. \qed
\end{cor}

This reparametrization can be interpreted on the level of gradings directly. 
Let $(R, \vphi) \coloneqq Q^{\mathrm{ex}} (T, \beta, \kappa, g_0)$. 
Clearly, there is an invertible homogeneous element $u \in Z(\D)\odd$ of degree $t_p$ such that $\vphi_0(u) = u$. 
Scaling $u$ if necessary, we can suppose $u^2 = \zeta$ where $\zeta \coloneqq (1, -1) \in Z(\D)\even$. 
By \cref{prop:R-and-D-have-the-same-center-vphi}, we can regard $u$ as an element of $Z(R)\odd$ such that $\vphi(u) = u$. 
Then $R = R\even \oplus u R\odd$. 
Note that ${(R\even, \vphi\restriction_{R\even})} \iso M^{\mathrm{ex}} (T^+, \beta^+, \kappa, 0, g_0)$, where $0$ denotes the identically zero map $G/T^+ \to \ZZ_{\geq 0}$. 
Conversely, let $(R\even, \vphi\restriction_{R\even}) \coloneqq M^{\mathrm{ex}} (T^+, \beta^+, \kappa, 0, g_0)$ then let $(R, \vphi)$ be the graded superalgebra with superinvolution defined by $R \coloneqq R\even \oplus u R\even$, where $u$ is a new symbol of degree $t_p \coloneqq (h, \bar 1)$, commuting with every element in $R\even$, and satisfying $u^2 = \zeta \in R\even$ and $\vphi(u) = u$. 
Then $(R, \vphi) \iso Q^{\mathrm{ex}} (T, \tilde\beta, t_p, \kappa, g_0)$. 