% \makeatletter
% \def\input@path{{../}}
% \makeatother
% %
% \documentclass[../00_Thesis.tex]{subfiles}
% %
% \overfullrule=2cm
% %
% %
% \begin{document}

%\setcounter{chapter}{3}

\chapter{Gradings on Associative Superalgebras with Superinvolution}\label{chap:super-inv}

The orthosymplectic and the paraplectic Lie superalgebras are defined using a nondegenerate bilinenar form on a superspace. 
More specifically, if $\vphi$ is the superadjunction corresponding to this form, then we consider the subsuperalgebra of the general linear Lie superalgebra consisting of the skew elements with respect to $\vphi$ (see Subsection {\tt ??}). 

\vspace{5mm}
{\tt (More intro to come...)}


{\tt Mention that we are developing the approach of Elduque (J. of \\Al\-ge\-bra 2010, see also Chapter 2 in Monograph) in the super setting.}

\begin{itemize}
    \item Cite Bahturin and Tvaladze; maybe Tvaladze and Tvaladze;
    \item Cite Bahturin and Shestakov;
    \item Also Carlos G\'omes Ambrose ``On the Lie Structure of the Skew Elements of a simple Superalgebra with Superinvolution''
    \item And Racine's paper on superinvolution simple superalgebras.
    \item Maybe Elduques's \cite{elduqueSuperinv};
    \item How what we are doing is different?
    \item Analogous to Lie over $\RR$ (Adri\'an); not literally using results, but using ideas.
\end{itemize}
% For the remainder of the chapter, $G$ is a fixed abelian group.

% In this chapter we are going to describe 

\section{Super-anti-automorphisms and ses\-qui\-li\-near\\ forms}\label{sec:super-anti-auto-and-sesquilinear}

Let $\D$ be a graded division superalgebra and let $\U$ be a nonzero graded right $\D$-supermodule of finite rank. 
Consider the graded superalgebra $R := \End_\D(\mc U)$. 
Then $\mc U$ is an $(R, \D)$-superbimodule. 
By Proposition \ref{prop:converse-density-thm}, $\mc U$ is a simple graded left supermodule over $R$ and we have a natural identification between $\D$ and $\End_R(\mc U)$.

Recall that for a superalgebra $S$, the superalgebra $S\sop$ is defined by $S\sop = S$ as superspaces, but with a different product. For every element $s\in S$, we denote it by $\bar s$ when regarded as an element of $S\sop$, and the product on $S\sop$ is defined by $\bar a \overline {B} = \sign{a}{b} \overline{ba}$ for all $a, b \in S$.
% \begin{notation}
%     Let  be . As sets, we have that $S = S\sop$, but given $s\in S$, we will it by $ \bar s$ when regarded as an element of $S\sop$.
% \end{notation}

As we saw on {\tt Section ??}, $\mc U\Star = \Hom_\D (\mc U, \D)$ is a graded left $\D$-supermodule through $(df)(u) = df(u)$, for all $d\in \D$, $f\in \U\Star$ and $u\in U$. 
We can, then, regard $\U\Star$ as a graded right $\D\sop$-supermodule, through $f \bar d = \sign{f}{d} df$. 
Also, we can make $\mc U\Star$ a graded right $R$-supermodule by defining $(f r) (u) := f(r u)$ for all $f\in \mc U\Star$, $r\in R$ and $u\in \mc U$ (i.e., $f r = f \circ r$, since $R = \End_\D(\mc U)$). 
Hence, we can consider $\mc U\Star$ as a graded left $R\sop$-supermodule via $\bar r f = (-1)^{|r||f|} f r$, % (i.e., $r\cdot f = r\Star (f)$)
and $\mc U\Star$ becomes a $(R\sop, \D\sop)$-superbimodule.

\begin{lemma}\label{lemma:U-star-R-sop}
    The left $R\sop$-supermodule $\mc U\Star$ is graded simple, and the action of $\D\sop$ gives an isomorphism $\D\sop \to \End_{R\sop}(\mc U\Star)$.
\end{lemma}

\begin{proof}
    By definition of superadjoint operator, the above $R\sop$-action corresponds to the representation $\rho\from R\sop \to \End_{\D\sop} (\mc U\Star)$ given by $ \rho(r) = r\Star$, which is an isomorphism since $\U$ is of finite rank. 
    If we use $\rho$ to identify $R\sop$ with $\End_{\D\sop} (\mc U\Star)$, the result follows from Proposition \ref{prop:converse-density-thm}.
\end{proof}

%Note that the $R\sop$-action correspond to the representation $\rho: R\sop \to \End_{\D\sop} (\mc U\Star)$ given by $ \rho(r) = r\Star$, which is an isomorphism. If we use it to identify $R\sop$ with $\End_{\D\sop} (\mc U\Star)$, we can then apply Proposition \ref{prop:converse-density-thm} again and conclude that $\mc U\Star$ is a graded simple left $R\sop$-module and that we naturally can identify $\D\sop$ with $\End_{R\sop}(\mc U\Star)$.

Now let $\vphi: R\to R$ be a super-anti-automorphism that preserves the $G$-degree (\ie, is homogeneous of degree $e$ with respect to the $G$-grading).
We can see it as an isomorphism $R\to R\sop$, $r \mapsto \overline{ \vphi(r)}$, and use it to identify $R$ with $R\sop$. 
In particular, we will make the left $R\sop$-action on $\U\Star$ into a left $R$-action via $r\cdot f = \overline{\vphi(r)}f$, for all $r\in R$ and all $f\in \U\Star$. 
In other words,
%
\begin{equation}\label{eq:R-action-back-on-the-right}
    r\cdot f = \sign{r}{f} f \circ \vphi(r) .
\end{equation}

We will now consider $\U\Star$ as an $(R,\D\sop)$-superbimodule. 
In particular, the superalgebra $\End_R(\U\Star)$ should be understood as the set of $R$-linear maps with respect to the $R$-action on the left (which is the same set as $\End_{R\sop} (\U\Star)$). 
Also, since the action is on the left, we will follow the convention of writing $R$-linear maps on the right.

From Lemma \ref{lemma:U-star-R-sop}, it follows that $\U\Star$ is a simple graded left $R$-supermodule and that we can identify $\D\sop$ with $\End_R (\U\Star) = \End_{R\sop} (\U\Star)$. 
But from Proposition {\tt ??}, $R$ has only one graded simple supermodule up to isomorphism and shift, hence there is an invertible $R$-linear map $\vphi_1: \mc U \to \mc U\Star$ which is homogeneous of some degree $(g_0, \alpha)\in G^\#$. 
Fix one such $\vphi_1$.
% This map is not unique, but we are going to fix one for now. 

\begin{lemma}\label{lemma:nonuniqueness-of-vphi1}
    A map $\vphi_1' : \U \to \U\Star$ is $R$-linear and homogeneous with respect the $G^\#$-grading if, and only if, there is an element $\bar d\in \D\sop = \End_R (\U\Star)$ homogeneous with the respect the $G^\#$-grading such that $ \vphi_1' = \vphi_1 \bar d$, where juxtaposition represents composition of maps written on the right.
\end{lemma}

\begin{proof}
    This follows from the fact that $ \vphi_1\inv \vphi' \in  \D\sop = \End_R(\U\Star)$ if, and only if, $\vphi' \in \Hom_R(\U, \U\Star)$.
\end{proof}

% \begin{proof}
%     Let $\vphi_1'$ be an homogeneous $R$-linear map. Clearly, $\vphi_1\inv \vphi_1' \in \End_R(\U\Star)$ $ = \D\sop$ (note that we are composing functions written on the right). Then $\vphi_1' = \vphi_1 d$, for some homogeneous $d\in \D\sop$, and hence, by the definitions of the right $\D\sop$-action and the left $\D$-action, $\vphi' (u) = \sign{\vphi_1}{d} d\vphi(u)$ for all $u\in \U$. The converse is a direct computation.
% \end{proof}

We will use 
the $R$-linear map 
$\vphi_1$ to construct a super-anti-automorphism $\vphi_0$ on $\D$ and a nondegenerate $\vphi_0$-sesquilinear form $B$ on $\U$. 

\begin{defi}\label{def:sesquilinear-form}
    Let $\vphi_0: \D \to \D$ be a degree-preserving su\-per\--an\-ti\--auto\-mor\-phism. We say that a map $B\colon \U \times \U \to \D$ is a \emph{$\vphi_0$-sesquilinear form on $\U$} if it is $\FF$-bilinear, $G^\#$-homogeneous if considered as a linear map $\U\tensor \U \to \D$ and, for all $u,v \in \U$ and $d\in \D$, satisfies
    %
    \begin{enumerate}[(i)]
        \item $B(u,vd) = B(u,v)d$; \label{enum:linear-on-the-second}
        \item $B(ud, v) = (-1)^ {(|B| + |u|)|d|}\vphi_0(d) B(u, v)$. \label{enum:vphi0-linear-on-the-first}
    \end{enumerate}
    
    The \emph{(left) radical} of $B$ is the set $\rad B \coloneqq \{u\in \U \mid B(u, v) = 0 \text{ for all } v\in \U\}$. We say that the form $B$ is \emph{nondegenerate} if $\rad B = 0$.
\end{defi}

\begin{remark}
    Note that if $B$ is nondegenerate, then $\vphi_0$ is actually determined by $B$.
\end{remark}

Suppose for now that a degree-preserving su\-per\--an\-ti\--auto\-mor\-phism $\vphi_0: \D \to \D$ is given. 
We can use it to define a right $\D$-action on $\U\Star$ by interpreting it as an isomorphism from $\D$ to $\D\sop$ and putting 
%
\begin{equation}\label{eq:right-D-action}
    f\cdot d \coloneqq f \overline{\vphi_0(d)},
\end{equation}
%
for all $f \in \U\Star$ and $d\in \D$. 
Using this action, we have $\End_\D (\U\Star) = \End_{\D\sop} (\U\Star)$. We also have the following:

\begin{prop}\label{prop:sesquilinear-form-iff-D-linear-map}
    Fix a degree-preserving su\-per\--an\-ti\--auto\-mor\-phism $\vphi_0\from \D \to \D$. 
    The $\vphi_0$-sesquilinear forms $B:\U\times\U \to \D$ are in a one-to-one correspondence with the homogeneous $\D$-linear maps $\theta\from \U \to \U\Star$ via $B \mapsto \theta$ where $\theta(u) \coloneqq B(u, \cdot)$, for all $u \in \U$ or, inversely, $\theta \mapsto B$ where $B(u,v) \coloneqq \theta(u)(v)$, for all $u, v\in \U$. 
    Moreover, $B$ is nondegenerate if, and only if, $\theta$ is an isomorphism.
\end{prop}

\begin{proof}
    Suppose $B$ is given. Condition \eqref{enum:linear-on-the-second} of Definition \ref{def:sesquilinear-form} tells us that $\theta$ defined this way is, indeed, a map from $\U$ to $\U\Star$. 
    Also, it is easy to check that $\theta$ is homogeneous of the same parity and degree as $B$.
    
    Recalling the left $\D$-action on $\U\Star$, condition \eqref{enum:vphi0-linear-on-the-first} tells us that, for all $u\in \U$ and $d\in \D$,
    \[
        \theta (ud) = (-1)^{|d|(|\theta|+|u|)}\vphi_0 (d) \theta (u),
    \]
    which, by the definition of the right $\D\sop$-action on $\U\Star$, is equivalent to $\theta(ud) = \theta(u) \overline{\vphi_0(d)}$, \ie, $\theta$ is, indeed, $\D$-linear considering the left $\D$-action on $\U\Star$ given by Equation \eqref{eq:right-D-action}.
    
    To show that the correspondence is bijective, note that all the considerations above can be reversed when, given $\theta\from \U \to \U\Star$, we define  $B(u, v) \coloneqq \theta(u)(v)$.
    
    The ``moreover'' part follows from the fact that $\rad B = \ker \theta$, so the nondegeneracy of $B$ is equivalent to $\theta$ being injective. But $\U$ and $\U\Star$ have the same (finite) rank over $\D$, so by Proposition {\tt ??}, $\theta$ is injective if, and only if, it is bijective.
\end{proof}

% \begin{lemma}\label{lemma:sesquilinear-form-iff-D-linear-map}
%     Consider $\U\Star$ as a left $\D$-supermodule by using $\vphi_0$ as above. Then there is a bijection between the $\D$-linear maps $\theta\from \U \to \U\Star$ and the $\vphi_0$-sesquilinear forms $B:\U\times\U \to \D$ via $\theta \mapsto B$ where $B(u,v) \coloneqq \theta(u)(v)$. Moreover, $\theta$ is an isomorphism if, and only if, $B$ is nondegenerate.
% \end{lemma}

% Condition \eqref{enum:linear-on-the-second} on the Definition above allows us to use $B$ to define a map $\U \to \U\Star$ by $u \mapsto B(u, \cdot)$. If this is invertible, we say that the form $B$ is \emph{nondegenerate}.

% Note that a degree-preserving super-anti-automorphism $\vphi_0: \D \to \D$ can be seen as an isomorphism between $\D$ and $\D\sop$ and, hence, one can use it to define a right $\D$-action on $\U\Star$ by $v$

Coming back to our map $\vphi_1\from \U \to \U\Star$ and using the identifications $\D = \End_R(\U)$ and $\D\sop = \End_R(\U\Star)$ introduced above, consider the map $\D \to \D\sop$ sending $d \mapsto \sign{d}{\vphi_1}\vphi_1\inv d \,\vphi_1$, where juxtaposition denotes composition of maps on the right. 
It is straightforward to check that this map is an isomorphism and, hence, we can consider it as a super-anti-automorphism $\vphi_0 \from \D \to \D$. 
Then, for all $u\in \U$ and $d\in \D$, we have
%
\begin{equation}\label{eq:sesquilinear-before-B}
    (ud)\vphi_1 = u (d\vphi_1) =  u(\vphi_1\vphi_1\inv d \vphi_1) = \sign{d}{\vphi_1}(u\,\vphi_1 )\vphi_0(d).
\end{equation}

% The map $\vphi_0$ depends on the choice o f $\vphi_1$. Following Lemma \ref{lemma:all-possible-vphi1}, if we had started with $\vphi_1' \coloneqq d \vphi_1$ instead, we would have gotten the map $\vphi_0' \coloneqq \vphi_0 \circ \operatorname{sInt}_d$, where $\operatorname{sInt}_d: \D \to \D$ is defined by $\operatorname{sInt}_d(c) = \sign{d}{c} d\inv c d$.

\begin{defi}\label{def:change-map-to-the-left}
    Let $V$ and $V'$ be left $R$-supermodules and let $\psi: V \to V'$ be an $R$-linear map. We define $\psi^\circ: V \to  V'$ to be the following map, written on the left:
    \[
        \psi^\circ(v) = \sign{\psi}{v} v\psi.
    \]
\end{defi}

For example, using the identification $\D\sop = \End_R (\U\Star)$ as before, the left $\D$-action on $\U\Star$ is given by $df = \bar d^\circ (f)$, for all $d\in \D$ and $f\in \U\Star$.

\begin{lemma}\label{lemma:change-of-side-properties}
    Under the conditions of Definition \ref{def:change-map-to-the-left}, we have that, for all $r\in R$ and $v\in V$,  $\psi^\circ (rv) = \sign{\psi}{v} r \psi^\circ (v)$. 
    Further, given another $R$-linear map $\tau: V' \to V''$, we have $(\psi\tau)^\circ = \sign{\psi}{\tau} \tau^\circ\psi^\circ$. \qed
\end{lemma}

% \begin{remark}
%     The map $\psi^\circ$ defined above is not, in general, $R$-linear. Instead, it satisfies $\psi^\circ (rv) = \sign{\psi}{v} r \psi^\circ (v)$, for all $r\in R$ and $v\in V$. 
%     Also, given another $R$-linear map $\theta: \V' \to \V''$, we have that $(\psi\theta)^\circ = \sign{\psi}{\theta} \theta^\circ\psi^\circ$.


    % Let $\psi: \V \to \V'$ and $\theta: \V' \to \V''$ be $R$-linear maps between left $R$-supermodules. Then
    % \begin{enumerate}[(i)]
    %     \item $\psi^\circ (rv) = \sign{\psi}{v} r \psi^\circ (v)$, for all $r\in R$ and $v\in V$;
    %     \item $(\psi\theta)^\circ = \sign{\psi}{\theta} \theta^\circ\psi^\circ$.
    % \end{enumerate}
% \end{remark}

Using the notation just introduced, we can rewrite Equation \eqref{eq:sesquilinear-before-B} as follows:
%
\begin{equation}\label{eq:vphi1-circ-is-D-linear}
    \begin{split}
        \vphi_1^\circ (ud) &= (-1)^{|\vphi_1|(|u|+|d|)} (ud)\vphi_1 \\
        &=\sign{\vphi_1}{u}(u\,\vphi_1) \overline{\vphi_0(d)} = 
        \vphi_1^\circ (u) \overline{\vphi_0(d)},
    \end{split}
\end{equation}
%
which means, considering the right $\D$-action defined via Equation \eqref{eq:right-D-action},
% We can use $\vphi_0\colon \D \to \D\sop$ to define a right $\D$-module structure on $\U\Star$ via $f\cdot d \coloneqq f\vphi_0(d)$, for all $f\in \U\Star$ and $d\in \D$. 
% Considering this action, Equation \eqref{eq:vphi1-circ-is-D-linear} tells us 
that $\vphi_1^\circ$ is $\D$-linear. (Note, however, that Lemma \ref{lemma:change-of-side-properties} shows that $\vphi_1^\circ$ is not $R$-linear, in general.)


% Also, recalling the definition of the right $\D\sop$-action on $\U\Star$, note that Equation \eqref{eq:vphi1-circ-is-D-linear} can be rewritten using the left $\D$-action as
%
% \begin{equation}\label{eq:sesquilinear-with-vphi1-circ}
%     \vphi_1^\circ (ud) = (-1)^{|d|(|\vphi_1|+|u|)}\vphi_0 (d)\vphi_1^\circ (u).
% \end{equation}


% We define $\vphi_1 := \tilde\vphi_1^\circ$ and $\vphi_0: \D \to \D$ by $\vphi_0(d): \sign{\vphi_1}{d} \vphi_1 d^\circ \vphi_1\inv$. 
% Note that the left $\D$-action on $\U\Star$ is connected the right $\D\sop$-action by the formula $f\cdot d = d^\circ \cdot f$, hence $\vphi_0$ is an anti-super-automorphism of $\D$. Also, we have that $\vphi_1(ud) = \sign{u}{d} \vphi_1(d^\circ  $

% \begin{lemma}
%     Let $B: \U\times \U\Star$ be a nondegenerate $\vphi_0$-sesquilinear map. Then, given $r\in R$, there is a unique $s\in R$ such that \[
%         B(ru,v) = \sign{r}{u} B(u,sv).
%     \]
%     Further, the map $r\mapsto s$ is a super-anti-automorphism of $R$.
% \end{lemma}

% \begin{proof}
%     Consider $\theta: \U \to \U\Star$ as in Lemma \ref{lemma:sesquilinear-form-iff-D-linear-map}. 
%     We then have that
%     \begin{align*}
%         \theta(ru)(v) &= \sign{r}{u} \theta(u)(sv)\\
%         \theta (ru)(v) &= \sign{r}{u} (\theta (u)\circ s)(v)\\
%         \theta (ru) &= \sign{r}{u} \theta(u) \circ s\\
%         (\theta \circ r) (u) &= (-1)^{(|\theta| + |u|)|s|} s\Star (
%     \end{align*}
% \end{proof}

Now we define $B: \U\times \U \to \D$ by $B(u, v) = \vphi_1^\circ (u)(v)$. 
By Proposition \ref{prop:sesquilinear-form-iff-D-linear-map}, we have that $B$ is a nondegenerate $\vphi_0$-sesquilinear map. 
Using Lemma \ref{lemma:change-of-side-properties} and Equation \eqref{eq:R-action-back-on-the-right}, we have
%
\begin{equation*}
    \begin{split}
        B(ru,v) &= \vphi_1^\circ (ru)(v) = \sign{r}{\vphi_1} \big(r \cdot \vphi_1^\circ (u) \big) (v)\\ &= \sign{r}{\vphi_1} (-1)^{|r|(|\vphi_1| + |u|)} \big(\vphi_1^\circ (u) \circ \vphi(r) \big)(v) \\ &= \sign{r}{u} \vphi_1^\circ (u) \big( \vphi(r)v \big)= \sign{r}{u} B(u,\vphi(r)v).
    \end{split}
\end{equation*}
%\ie, we have that $\vphi$ is the \emph{superadjunction} with respect to $B$.
We have proved one direction of Theorem \ref{thm:vphi-iff-vphi0-and-B}, below. 

% \begin{prop}
%     Let $\vphi_0\from \D \to \D$ be a super-anti-automorphism and let $B\from \U\times \U \to \D$ be a nonzero $\vphi_0$-sesquilinear form. 
%     We have that $B$ is nondegenerate if, and only if, there is a unique super-anti-automorphism $\vphi\from R \to R$ such that
%     %
%     \begin{equation}\label{eq:superadjunction}
%         \forall u, v \in \U, \forall r\in R, \quad B(ru,v) = \sign{r}{u} B(u,\vphi(r)v).
%     \end{equation}
%     %
%     Moreover, if $ $
% \end{prop}

To state the theorem, it is convenient to introduce the following notation. 
Recall that, any invertible element $d\in \D$ gives rise to the inner automorphism $\operatorname{Int}_d\from \D \to \D$ defined by $\operatorname{Int}_d (c) \coloneqq dcd\inv$, for all $c\in \D$. 
If we require $d$ to be homogeneous with respect to the $G^\#$-grading, then $\operatorname{Int}_d$ is an automorphism of $\D$ as a graded superalgebra (Definition \ref{def:inner-automorphism}).

\begin{defi}
    Let $d\in \D$ be a nonzero $G^\#$-homogeneous element. 
    We define the \emph{superinner automorphism} $\operatorname{sInt}_d\from \D \to \D$ by $\operatorname{sInt}_d (c) \coloneqq \sign{c}{d} dcd\inv$, for all $c\in \D$.
\end{defi}

% Considered as a $\FF$-linear map $B: \U\tensor \U \to \D$, it is homogeneous of same parity and degree of $\vphi_1$. It is $\vphi_0$-sesquilinear: since $\vphi_1^\circ (u) \in \U\Star$, we have that $\vphi_1^\circ(u)(vd) = \vphi_1^\circ(u)(v)d$, which give us condition \eqref{enum:linear-on-the-second} of Definition \ref{def:sesquilinear-form};
% condition \eqref{enum:vphi0-linear-on-the-first} is a restatement of \eqref{eq:sesquilinear-with-vphi1-circ}. It is nondegenerate since $\rad B = \ker \vphi_1^\circ$, and $\vphi_1^\circ$ is a bijective $\D$-linear map.



% \begin{lemma}
%     Let $\vphi_0\colon \D\to \D$ be a fixed degree-preserving su\-per\--an\-ti\--auto\-mor\-phism. 
%     Given re is a bijective correspondence between the $\vphi_0$-sesquilinear maps $B$ is in bijection with the set of homogeneous maps $\theta\colon \U \to \U\Star$ such that $\theta (ud) = \theta(u) \vphi_0(d)$.
% \end{lemma}

% \begin{proof}
%     Let $B\colon \U \times \U \to \D$ be a $\vphi_0$-sesquilinear form. Define $\theta(u)  \coloneqq B(u, \cdot)$. By condition \eqref{enum:linear-on-the-second} in Definition \ref{def:sesquilinear-form}, the map $\theta (u) \in \U\Star$ for all $u\in \U$. Note that $\theta$ have the same degree and parity of $B$. Hence, the condition \eqref{enum:vphi0-linear-on-the-first} tells us that $\theta(ud) = (-1)^ {(|\theta| + |u|)|d|} \vphi_0(d) \theta(u)$, which, by the Definition of the right $\D\sop$-action on $\U\Star$, becomes $\theta(ud) = \theta (u) \vphi_0 (d)$. 
% \end{proof}

% In particular, we can recover $\vphi$ from the pair $(\vphi_0, B)$.



% One should note that the $\vphi_0: \D \to \D\sop$ give $\U\Star$ a right $\D$-module structure by defining $f\cdot d = f\vphi_0(d)$, for all $f\in \U\Star$ and $d\in \D$. In this sense, from

% Clearly, the $\vphi_0$-sesquilinear form $B$ is \emph{nondegenerate} in the sense that the map $\U \to \U\Star$ given by $u \mapsto B(u, \cdot)$ is an isomorphism of right $\D$-modules. 

\begin{thm}\label{thm:vphi-iff-vphi0-and-B}
    Let $\D$ be a graded division superalgebra and let $\U$ be a nonzero right graded module of finite rank over $\D$. 
    If $\vphi$ is degree-preserving super-anti-automorphism on $R \coloneqq \End_\D(\U)$, then there is a pair $(\vphi_0, B)$, where $\vphi_0$ is a degree-preserving super-anti-automorphism on $\D$ and $B\from \U \times \U \to \D$ is a nondegenerate $\vphi_0$-sesquilinear form, such that
    %
    \begin{equation}\label{eq:superadjunction}
        \forall r\in R\even \cup R\odd,\,\forall u, v \in \U\even \cup \U\odd,  \quad B(ru,v) = \sign{r}{u} B(u,\vphi(r)v).
    \end{equation}
    %
    Conversely, given a pair $(\vphi_0, B)$ as above, there is a unique degree-preserving super-anti-automorphism $\vphi$ on $R$ satisfying Equation \eqref{eq:superadjunction}. 
    Moreover, another pair $(\vphi_0', B')$ determines the same super-anti-automorphism $\vphi$ if, and only if, there is a nonzero $G^\#$-homogeneous element $d\in \D$ such that $\vphi_0' = \mathrm{sInt}_d \circ \vphi_0$ and $B'(u, v) = dB (u, v)$ for all $u, v \in \U$.
\end{thm}

\begin{thm}\label{thm:vphi-iff-vphi0-and-B}
    Let $\D$ be a graded division superalgebra and let $\U$ be a nonzero right graded module of finite rank over $\D$. 
    If $\vphi$ is degree-preserving super-anti-automorphism on $R \coloneqq \End_\D(\U)$, then there is a pair $(\vphi_0, B)$, where $\vphi_0$ is a degree-preserving super-anti-automorphism on $\D$ and $B\from \U \times \U \to \D$ is a nondegenerate $\vphi_0$-sesquilinear form, such that
    %
    \begin{equation}\label{eq:superadjunction}
        \forall r\in R\even \cup R\odd,\,\forall u, v \in \U\even \cup \U\odd,  \quad B(ru,v) = \sign{r}{u} B(u,\vphi(r)v).
    \end{equation}
    %
    Conversely, given a pair $(\vphi_0, B)$ as above, there is a unique degree-preserving super-anti-automorphism $\vphi$ on $R$ satisfying Equation \eqref{eq:superadjunction}. 
    Moreover, another pair $(\vphi_0', B')$ determines the same super-anti-automorphism $\vphi$ if, and only if, there is a nonzero $G^\#$-homogeneous element $d\in \D$ such that $B'(u, v) = dB (u, v)$ for all $u, v \in \U$, and, hence, $\vphi_0' = \mathrm{sInt}_d \circ \vphi_0$.
\end{thm}

\begin{proof}
    The first assertion is already proved. For the converse, let $\vphi_0$ be a degree-preserving super-anti-automorphism on $\D$, let $B\from \U \times \U \to \D$ be a nondegenerate $\vphi_0$-sesquilinear form and consider $\theta$ as in 
    Proposition \ref{prop:sesquilinear-form-iff-D-linear-map}. Then Equation \eqref{eq:superadjunction} is equivalent to:
    %
    \begin{alignat*}{2}
        \forall r\in R\even \cup R\odd,\,\forall u, v &\in \U\even \cup \U\odd,& \theta (ru)(v)&= \sign{r}{u} \theta(u)(\vphi(r)v)\\
        &&&= \sign{r}{u} \big(\theta (u)\circ \vphi(r)\big)(v)\\
        %
        \intertext{and, hence, equivalent to}
        %
        \forall r\in R\even \cup R\odd,\,&\forall u \in \U\even \cup  \U\odd,&   \theta (ru) &= \sign{r}{u} \theta(u) \circ \vphi(r).
        %
        \addtocounter{equation}{1}\tag{\theequation}\label{eq:theta-is-almost-R-superlinear}\\
        %
        \intertext{Recalling the definition of superadjoint operator, Equation \eqref{eq:theta-is-almost-R-superlinear} becomes}
        %
        \forall r\in R\even \cup R\odd,\,\forall u &\in \U\even \cup \U\odd, & (\theta \circ r) (u) &= \sign{r}{u} (-1)^{(|\theta| + |u|)|r|} \big(\vphi(r)\big)\Star \big(\theta(u)\big) \\
        &&&=  \sign{r}{\theta} \big(\big(\vphi(r)\big)\Star \circ \theta \big) (u),
        %
        \intertext{which is the same as}
        %
        \forall r&\in R\even \cup R\odd, &\theta \circ r &= \sign{r}{\theta}  \big(\vphi(r)\big)\Star \circ \theta.
        \intertext{In other words, we have}
        \forall r&\in R\even \cup R\odd, & \big(\vphi(r)\big)\Star &= \sign{r}{\theta}\, \theta \circ r \circ \theta\inv.
        %
        \addtocounter{equation}{1}\tag{\theequation}\label{eq:vphi-r-Star-is-a-superconjugation}
    \end{alignat*}
    %
    % We have shown that
    % %
    % \begin{equation}
    %   \big(\vphi(r)\big)\Star = \sign{r}{\theta}\, \theta \circ r \circ \theta\inv.
    % \end{equation}
    %
    Since $\U$ has finite rank over $\D$, the superadjunction map $\End_\D (\U) \to \End_{\D\sop} (\U\Star)$ is invertible and, hence, $\vphi$ is uniquely determined.
    Also, the properties of superadjunction imply that $\vphi$ is, indeed, a super-anti-automorphism of $R$.
    
    For the ``moreover'' part, let $d$ be a nonzero $G^\#$-homogeneous element of $\D$ and consider $\vphi_0' = \operatorname{sInt}_d \circ \, \vphi_0$ and $B' = dB$. 
    We have that $B'$ is $\vphi_0'$-sesquilinear since, for all $c\in \D\even \cup \D\odd$ and $u,v \in \U\even \cup \U\odd$,
    %
    \begin{align*}
        B' (uc, v) &= dB (uc, v) = (-1)^{(|B| + |u| ) |c|} d\vphi_0(c) B(u,v) \addtocounter{equation}{1}\tag{\theequation}\label{eq:dB-is-sesquilinear}\\
        &= (-1)^{(|B| + |u| ) |c|} d\vphi_0(c) d\inv d B(u,v) \\
        &=  (-1)^{(|B| + |u| ) |c|} \sign{c}{d} (\operatorname{sInt}_d \circ\, \vphi_0) (c)\, dB(u,v)\\
        &= (-1)^{(|B'| + |u|) |c|} (\operatorname{sInt}_d \circ\, \vphi_0) (c)\, B'(u,v).
    \end{align*}
    %
    To show $B'$ that is nondegenerate, note that $dB(u,v) = 0$ implies $B(u,v) =0$, hence  $\rad B' \subseteq \rad B$. 
    Finally, it is straightforward that Equation \eqref{eq:superadjunction} is still true if we replace $B$ by $B'$. 
    
    %and let $\vphi_0'$ be a super-anti-automorphism on $\D$. 
    % we will first check that $B'$ is, indeed, $\vphi_0'$-sesquilinear.
    
    To prove the other direction, we consider, again, the left $R$-supermodule structure on $\U\Star$ given by Equation \eqref{eq:R-action-back-on-the-right} and let $\theta\from \U \to \U\Star$ be as above, \ie, $\theta(u) = B(u, \cdot)$. Similarly, let $\theta'\from \U \to \U\Star$ be defined by $\theta' \coloneqq B'(u, \cdot)$.
    
    Combining Equations \eqref{eq:R-action-back-on-the-right} and  \eqref{eq:theta-is-almost-R-superlinear}, we have that
    %
    \begin{equation}\label{eq:theta-is-R-superlinear}
        \theta(ru) = \sign{\theta}{r} r\cdot \theta(u).
    \end{equation}
    %
    Define the map $\tilde \theta\from \U \to \U\Star$, written on the right, by $u\, \tilde\theta = \sign{u}{\theta} \theta(u)$, for all $u\in \U$ (compare with Definition \ref{def:change-map-to-the-left} and note that $\theta = (\tilde \theta)^\circ$). 
    Then Equation \eqref{eq:theta-is-R-superlinear} becomes $(ru)\tilde\theta = r \cdot (u\,\tilde\theta)$, \ie, $\tilde\theta$ is $R$-linear.
    
    % Now, given a pair $(\vphi_0', B')$, we have the corresponding map $\theta'(u) \coloneqq B'(u, \cdot)$, for all $u\in \U$. 
    All these considerations about $\theta$ are also valid for $\theta'$, so we define $\tilde\theta'\from \U \to \U\Star$ by $u\,\tilde\theta' \coloneqq \sign{u}{\theta'} \theta'(u)$ and we get another $R$-linear map from $\U$ to $\U\Star$.
    By Lemma~\ref{lemma:nonuniqueness-of-vphi1}, there is $\bar d\in \D\sop$ such that $\tilde\theta' = \tilde\theta \bar d$.
    Applying Lemma \ref{lemma:change-of-side-properties}, this implies \[\theta' = \sign{\theta}{\bar d} \bar d^\circ \theta.\]
    But $\bar d^\circ \theta (u) = d\theta(u)$, where in the last term we use the left $\D$-action on $\U\Star$. 
    Therefore $B'(u,v) = \theta'(u)(v) = d\theta(u)(v) = \sign{\theta}{d} dB(u, v)$, for all $u,v \in \U$. 
    Replacing $d$ by $\sign{\theta}{d} d$, we get $B' = dB$. 
    
    It remains to check that $\vphi_0' = \operatorname{sInt}_d \circ\, \vphi_0$. 
    Since $B' = dB$, Equation \eqref{eq:dB-is-sesquilinear} is valid, hence $B'$ is $(\operatorname{sInt}_d \circ \vphi_0)$-sesquilinenar.
    We then have, for all $c\in \D\even \cup \D\odd$ and $u,v \in \U\even \cup \U\odd$,
    \[
        \vphi_0'(c)\, B'(u,v) = (-1)^{(|B'| + |u|) |c|} B'(uc,v) = (\operatorname{sInt_d} \circ\, \vphi_0) (c)\, B'(u,v).
    \]
    The form $B'$ is nondegenerate, so we can choose $G^\#$-homogeneous $u,v\in \U$ with $B'(u,v)\neq 0$. Then $B'(u,v)$ is invertible, hence $\vphi_0' (c) = (\operatorname{sInt}_d \circ\, \vphi_0) (c)$, concluding the proof.
\end{proof}

\begin{convention}\label{conv:pick-even-form}
    Under the conditions of Theorem \ref{thm:vphi-iff-vphi0-and-B}, if $\D$ is an odd graded division superalgebra (\ie, $\D\odd \neq 0$), then we will choose the form $B$ to be even. 
    This is possible since, by the ``moreover'' part, we can substitute an odd form $B$ by $dB$, for some $d\in \D\odd$.
\end{convention}

We are going to see when two graded-simple superalgebras with superinvolution are isomorphic. 
For this, we will need two more definitions. 

Even though, as superalgebras, $\End_\D( \U )$ is the same as $\End_\D( \U^{[g]} )$ for every $g \in G^\#$, an extra care should be taken when considering super-anti-automorphisms. 
If $g\in G^\#$ is odd, a $\vphi_0$-sesquilinear form $B$ on the $\D$-module $\U$ is not $\vphi_0$-sesquilinear if considered on the $\D$-module $\U^{[g]}$, and Equation \eqref{eq:superadjunction} does not determine the same super-anti-automorphism $\vphi$. 
This motivates the following:

\begin{defi}
    Let $\U$ be a graded right $\D$-module and $\vphi_0\from \D \to \D$ be a super-anti-automorphism. 
    Given $B$ is a $\vphi_0$-sesquilinear form on $\U$ and $g\in G^\#$, we define the $\vphi_0$-sesquilinear for  $B^{[g]}$ on $\U^{[g]}$ by $B^{[g]}(u,v) \coloneqq \sign{u}{g} B(u,v)$, for all $u,v \in \U$, where $|u|$ is the parity of $u$ as an element of $\U$. 
\end{defi}

Note that $\deg B^{[g]} = g^{-2} \deg B$. 
In particular, $|B^{[g]}| = |B|$.

\begin{lemma}\label{lemma:B^[b]-does-the-job}
    Let $\U$ be a graded $\D$-module, $\vphi_0$ be a super-anti-automorphism on $\D$ and $B$ be a $\vphi_0$-sesquilinear form on $\U$. 
    For every $g\in G^\#$, $B^{[g]}$ is a $\vphi_0$-sesquilinear form on $\U^{[g]}$. 
    Further, if $B$ is nondegenerate and the pair $(\vphi_0, B)$ determines the super-anti-automorphism $\vphi$ on $R \coloneqq \End_\D(\U) = \End_\D(\U^{[g]})$, then $B^{[g]}$ is nondegenerate and $(\vphi_0, B^{[g]})$ also determines $\vphi$.
\end{lemma}

\begin{proof}
    Let $u, v \in \U$. 
    To avoid confusion, we will denote $u$ and $v$ by $u'$ and $v'$, respectively, when regarded as elements of $\U^{[g]}$. 
    For all $d\in D$, we have:
    \begin{align*}
        B^{[g]}(u', v'd) &= \sign{g}{u} B(u, vd) = \sign{g}{u} B(u, v)d =  B^{[g]}(u', v')d
        \intertext{and}
        B^{[g]}(u'd, v'd) &= \sign{g}{ud} B(ud, v) = (-1)^{|g|( |u| + |d| )} (-1)^{|d|( |B| + |u| )} \vphi_0(d) B(u, v)d\\
        &= (-1)^{|d| ( |B| + |u| + |g| )} \vphi_0(d) \sign{g}{u} B(u, v) \\ 
        &= (-1)^{|d| ( |B| + |u'| )} \vphi_0(d) B^{[g]}(u', v')d .
        \intertext{Also, for all $r\in R$:}
        B^{[g]}(ru', v'd) &= \sign{g}{ru} B(ru, v) = (-1)^{|g|( |r| + |u| )} (-1)^{|r||u|} B(u, \vphi(r) v)\\
        &= (-1)^{|r| ( |g| + |u|)} \sign{u}{g} B(u, \vphi(r) v)\\ 
        &= \sign{r}{u'} B^{[g]}(u, \vphi(r) v).
    \end{align*}
\end{proof}

\begin{defi}\label{def:iso-(U,B)}
    Let $\U$ and $\U'$ be graded right $\D$-modules, and let $B$ and $B'$ be sesquilinear forms on $\U$ and $\U'$, respectively. 
    A \emph{isomorphism from $(\U, B)$ to $(\U', B')$} is an isomorphism of graded modules $\theta\from \U \to \U'$ such that $B'( \theta(u), \theta(v) ) = B(u, v)$, for all $u,v \in \U$.
\end{defi}

Note that if $(\U, B)$ and $(\U', B')$ are isomorphic, then $B$ and $B'$ are sesquilinear with respect to the same $\vphi_0$. 

\begin{remark}
    odd iso and $B^{[g]}$
\end{remark}

\begin{cor}\label{cor:iso-abstract-vphi}
    Let $R \coloneqq \End_\D(\U)$ and $R' \coloneqq \End_{\D'}(\U')$, where $\D$ and $\D'$ are graded division superalgebras, and $\U$ and $\U'$ are nonzero right graded module of finite rank over $\D$ and $\D'$, respectively. 
    Let $\vphi$ and $\vphi'$ be degree preserving super-anti-automorphisms on $R$ and $R'$ determined by pairs $(\vphi_0, B)$ and $(\vphi_0', B')$, respectively. 
    If $\psi\from (R, \vphi) \to (R', \vphi')$ is an isomorphism, then there are $g\in G^\#$, $0\neq d\in \D$ a homogeneous element, an isomorphism $\psi_0\from \D \to \D'$, and an isomorphism
    \begin{equation}\label{eq:iso-B-implies-vphi}
        \psi_1 \from (\U^{[g]}, dB^{[g]}) \to ( (\U')^{\psi_0}, \psi_0\inv \circ B' ) 
    \end{equation}
    such that $\psi(r) = \psi_1 \circ r \circ \psi_1\inv$, for all $r\in R$.
\end{cor}

\begin{proof}
    First of all, let us define $\vphi'' \coloneqq \psi\inv \circ \vphi' \circ \psi$. 
    Then $\psi$ is an isomorphism of graded superalgebras with super-anti-isomorphism if, and only if, $\vphi = \vphi''$. 

    Since $\psi$ is, in particular, an isomorphism of $G^\#$-graded algebras, we can apply Theorem \ref{thm:iso-abstract} to conclude there are $g\in G^\#$, an isomorphism of graded superalgebras $\psi_0\from \D \to \D'$, and an isomorphism of graded modules $\psi_1\from \U^{[g]} \to \U^{\psi_0}$ such that $\psi(r) = \psi_1 \circ r \circ \psi_1\inv$, for all $r\in R$. 
    
    Consider $\vphi_0'' \coloneqq \psi_0\inv \circ \vphi_0' \circ \psi_0$ and $B''\from \U^{[g]} \times \U^{[g]} \to \D$ defined by \[ B''(u, v) \coloneqq \psi_0\inv \Big( B' \big( \psi_1(u), \psi_1(v) \big) \Big)\] for all $u, v \in \U$. 
    We claim that $B''$ is $\vphi_0''$-sesquilinear. 
    Indeed:
    \begin{align*}
        B''(u, vd) &= \psi_0\inv \Big( B'\big( \psi_1(u), \psi_1(vd) \big) \Big) 
        = \psi_0\inv \Big( B'\big( \psi_1(u), \psi_1(v) \big) \psi_0(d) \Big) = B''(u, v)d
        \intertext{and}
        B''(ud, v) &= \psi_0\inv \Big( B' \big( \psi_1(ud), \psi_1(v) \big) \Big) = \psi_0\inv \Big( B' \big( \psi_1(u) \psi_0(d), \psi_1(v) \big) \Big)\\
        &= \psi_0\inv \Big( (-1)^{(|B'| + |u|) |d|} \vphi_0' \big( \psi_0(d) \big) B' \big( \psi_1(u), \psi_1(v) \big) \Big) \\
        &= (-1)^{(|B''| + |u|) |d|} \psi_0\inv \Big( \vphi_0' \big( \psi_0 (d) \big) \Big) B''(u, v)\\
        &= (-1)^{(|B''| + |u|) |d|} \vphi_0''(d) B''(u, v).
        \intertext{Also, $\vphi''$ is the superadjunction with respect to $B''$:}
        % \end{align*}
        % Also, $\vphi''$ is the superadjunction with respect to $B''$:
        % \begin{align*}
        B''(ru, v) &= \psi_0\inv \Big( B' \big( \psi_1(ru), \psi_1(v) \big) \Big) 
        = \psi_0\inv \Big( B' \big( (\psi_1 \circ r \circ \psi_1\inv) \psi_1(u), \psi_1(v) \big) \Big) \\
        &= \psi_0\inv \Big( B' \big( \psi(r) \psi_1(u), \psi_1(v) \big) \Big) \\
        &= \psi_0\inv \Big( \sign{\psi(r)}{\psi_1(u)} B' \big( \psi_1(u), \vphi'( \psi(r) ) \psi_1(v) \big) \Big) \\
        &= \sign{r}{u} \psi_0 \inv \Big( B' \big( \psi_1(u), (\vphi'\circ \psi)(r)\psi_1(v) \big) \Big)\\
        &= \sign{r}{u} \psi_0\inv \Big( B' \big( \psi_1(u), (\psi\circ \vphi'')(r) \psi_1(v) \big) \Big)\\
        &= \sign{r}{u} \psi_0\inv \Big( B' \big( \psi_1(u), \psi (\vphi''(r)) \psi_1(v) \big) \Big)\\
        &= \sign{r}{u} \psi_0\inv \Big( B' \big( \psi_1(u), (\psi_1 \circ \vphi''(r) \circ \psi_1\inv) \psi_1(v) \big) \Big)\\
        &= \sign{r}{u} \psi_0\inv \Big( B' \big( \psi_1(u), \psi_1 (\vphi''(r) v) \big) \Big)\\
        &= \sign{r}{u} B'' \big( u, \vphi''(r) v\big).
    \end{align*}
    Hence, applying Theorem \ref{thm:vphi-iff-vphi0-and-B} for $\U^{[g]}$ and Lemma \ref{lemma:B^[b]-does-the-job}, we conclude that $\vphi = \vphi''$ if, and only if, there is $0 \neq d \in \D$ such that $B'' = dB^{[g]}$. 
    The result follows. 
\end{proof}

% ----- 

\section{Superinvolutions and sesquilinear forms}

Our goal now is to specialize the results of Section \ref{sec:super-anti-auto-and-sesquilinear} to the case where $\vphi$ is a superinvolution. 
To this end, let us investigate what super-anti-automorphism of $\D$ and what sesquilinear form on $\U$ determine the super-anti-automorphism $\vphi\inv$. 
Again, we suppose $\D$ is a graded division superalgebra, $\U$ is a nonzero right graded module of finite rank over $\D$ and put $R = \End_\D (\U)$.

\begin{defi}\label{def:barB}
    Given a super-anti-automorphism $\vphi_0$ on $\D$ and a $\vphi_0$-sesqui\-li\-near form $B$ on $\U$,  we define $\overline {B}\from \U\times \U \to \D$ by $\overline {B} (u,v) \coloneqq \sign{u}{v} \vphi_0\inv (B(v, u))$ for all $u, v \in \U$.
\end{defi}

% \begin{lemma}
%     Let $B\from \U\times \U\Star \to \D$ be a $\vphi_0$-sesquilinear form. Suppose there is a super-anti-automorphism $\vphi$ on $R = \End_\D(U)$ such that Equation \eqref{eq:superadjunction} holds. If $B$ is nonzero, then it is nondegenerate.
% \end{lemma}

\begin{prop}\label{prop:barB-determines-vphi-inv}
    Under the conditions of Definition \ref{def:barB}, we have that $\overline {B}$ is a $\vphi_0\inv$-sesquilinear form of the same degree and parity as $B$. 
    Further, if $B$ is nondegenerate and $\vphi$ is the super-anti-automorphism on $R$ determined by $(\vphi_0, B)$ as in Theorem \ref{thm:vphi-iff-vphi0-and-B}, then $\overline{B}$ is nondegenerate and $\vphi\inv$ is determined by $(\vphi_0\inv, \overline B)$, \ie, 
    %
    \begin{equation}\label{eq:barB-superadjunction}
        \forall r\in R\even \cup R\odd ,\,\forall u, v \in \U\even \cup \U\odd,  \quad \overline {B}(ru,v) = \sign{r}{u} \overline {B}(u,\vphi\inv (r)v).
    \end{equation}
    %
\end{prop}

\begin{proof}
    Since $B$ is $\FF$-bilinear, so is $\overline {B}$. 
    Also, since $\vphi_0$ preserves degree and parity, $\overline {B}$ is homogeneous of the same degree and parity as $B$. 
    Let us check the conditions of Definition \ref{def:sesquilinear-form} and Equation \eqref{eq:barB-superadjunction}.
    \vspace{2mm}
    \begin{align*}
       \intertext{ Condition \eqref{enum:linear-on-the-second}:}
        \overline {B} (u,vd) &= (-1)^{|u|( |v| + |d|)} \vphi_0\inv (B(vd, u))  \\
        & = (-1)^{|u|( |v| + |d|)} (-1)^{|d| (|B| + |v|)} \vphi_0\inv \big( \vphi_0(d) B(v, u) \big) \\
        & = (-1)^{|u||v| + |u||d| + |d||B| + |d||v|} (-1)^{|d| (|B| + |v| + |u|) }  \vphi_0\inv \big(B(v, u)) d \\ &= \sign{u}{v} \vphi_0\inv \big(B(v, u)) d = \overline {B}(u, v) d .
    \intertext{Condition \eqref{enum:vphi0-linear-on-the-first}:}
        \overline {B}(ud, v) &= (-1)^{(|u| + |d|) |v|} \vphi_0\inv \big( B(v, ud) \big) \\ &= (-1)^{(|u| + |d|) |v|} \vphi_0\inv \big( B(v, u)d \big) \\ &= (-1)^{(|u| + |d|) |v|} (-1)^{|d| (|B| + |v| + |u|)} \vphi_0\inv (d) \vphi_0\inv\big( B(v, u) \big) \\ &= (-1)^{|u||v| + |d| |B| + |d||u|} \vphi_0\inv (d) \vphi_0\inv\big( B(v, u) \big) \\ &= (-1)^{(|B| + |u|) |d|} \vphi_0\inv (d) \overline {B}(u, v).
      \intertext{For Equation \eqref{eq:barB-superadjunction}, note that replacing $r$ for $\vphi\inv(r)$, Equation \eqref{eq:superadjunction} can be rewritten as}
        B(v, ru) &= \sign{r}{v} B(\vphi\inv(r)v,u).
      \intertext{Hence, we have that}
        \overline {B}(ru, v) &= (-1)^{(|r| + |u|) |v|} \vphi_0\inv \big( B(v, ru) \big)\\ &= (-1)^{(|r| + |u|) |v|} (-1)^{|r||v|} \vphi_0\inv \big( B(\vphi\inv (r)v, u) \big) \\ &= (-1)^{|u||v|} \vphi_0\inv \big( B(\vphi\inv (r)v, u) \big) \\ &= (-1)^{|u||v|} (-1)^{(|r| + |v|) |u|} \overline {B}(u, \vphi\inv (r)v) \\ &= \sign{r}{u} \overline {B}(u, \vphi\inv (r)v).
    \end{align*}
    
    Finally, Equation \eqref{eq:barB-superadjunction} together with $B$ being nondegenerate implies that $\overline{B}$ is nondegenerate. 
    To see that, let $u$ be a nonzero homogeneous element in $\rad \overline{B}$. 
    Then for for every $r\in R\even \cup R\odd$ and $v\in \U\even \cup \U\odd$, we have that $\overline{B}(u, \vphi\inv (r) v) = 0$, hence $\overline{B}(ru, v) = 0$. 
    Since $r \in R\even \cup R\odd$ and $v\in \U\even \cup \U\odd$ were arbitrary, this implies $\overline{B} (Ru, \U) = 0$. 
    But $\U$ is simple as a graded $R$-supermodule, so we would have $\overline{B}(\U, \U) = 0$ and then, using that $\vphi_0$ is bijective, $B (\U, \U) = 0$, a contradiction.
\end{proof}

\begin{lemma}\label{lemma:bar-dB}
    Under the conditions of Definition \ref{def:barB}, let $d$ be a nonzero $G^\#$-homogeneous element of $\D$ and consider $\vphi_0' \coloneqq \operatorname{sInt}_d\circ\, \vphi_0$ and $B' \coloneqq d B$. 
    Then $\overline {B'} = (-1)^{|d|} \vphi_0\inv (d) \overline B$.
\end{lemma}

\begin{proof}
    Note that $(\vphi_0')\inv = \vphi_0\inv \circ \operatorname{sInt}_{d}\inv = \vphi_0\inv \circ \operatorname{sInt}_{d\inv}$. 
    Hence, for all $u, v \in \U\even \cup \U\odd$,
    %
    \begin{align*}
        \overline {B'} (u,v) &= \sign{u}{v} (\vphi_0\inv \circ \operatorname{sInt}_{d\inv})  (d B(v, u) ) \\
        &= \sign{u}{v} \vphi_0\inv \big( (-1)^{|d| (|d| + |B| + |u| + |v|)}\,  d\inv d B (v, u) d \big) \\ &= \sign{u}{v} (-1)^{|d|}\, \vphi_0\inv (d) \vphi_0\inv(B(v, u)) =  (-1)^{|d|}\,\vphi_0\inv (d) \overline {B} (u, v).
    \end{align*}
\end{proof}

We are primarily interested in the case $\FF$ is an algebraically closed field and $\D$ is finite dimensional. 
In this case, we have that $\D\even_e = \FF 1$, so we are under the hypothesis of the following theorem, which is a graded version of \cite[Theorem 7]{racine}:

\begin{thm}\label{thm:vphi-involution-iff-delta-pm-1}
    % Suppose $\FF$ is an  algebraically closed field. 
    Let $\D$ be a graded division superalgebra such that $\D\even_e = \FF 1$, let $\U$ be a nonzero right graded module of finite rank over $\D$ and let $\vphi$ be a degree-preserving super-anti-automorphism on $R \coloneqq \End_\D (\U)$. 
    Consider a super-anti-automorphism $\vphi_0$ on $\D$ and a nondegenerate $\vphi_0$-sesqui\-li\-near form $B$ on $\U$ determining $\vphi$ as in Theorem \ref{thm:vphi-iff-vphi0-and-B}.
    Then $\vphi$ is a superinvolution if, and only if, $\vphi_0$ is a superinvolution and $\overline B = \pm B$. 
\end{thm}

\begin{proof}
    Using Proposition \ref{prop:barB-determines-vphi-inv} and Theorem \ref{thm:vphi-iff-vphi0-and-B}, we conclude that $\vphi = \vphi\inv$ if, and only if, there is $\delta \in \D$ such that (i) $\vphi_0\inv = \operatorname{sInt}_\delta \circ \,\vphi_0$ and (ii) $\overline {B} = \delta B$. 
    % If $\vphi_0^2 =\id_\D$ and $B = \pm \overline{B}$, we have conditions (i) and (ii) sati
    % To prove the ``if'' part of the statement, we take $\delta \in \{\pm 1\}$, since then (i) becomes $\vphi_0 = \vphi_0\inv$ and (ii), $B = \pm \overline{B}$.
    
    If $\vphi_0^2 =\id_\D$ and $\overline{B} = \delta B$ with $\delta \in \{\pm 1\}$, conditions (i) and (ii) are satisfied, proving the ``if'' part of the statement. 

    For the ``only if'' part, since both parity and degree of $B$ and $\overline {B}$ coincide, (ii) implies $\delta \in \D\even_e$. 
    We are assuming $\D\even_e = \FF 1$, so $\operatorname{sInt}_\delta = \id_\D$ and (i) becomes $\vphi_0 = \vphi_0\inv$, \ie, $\vphi_0$ is a superinvolution. 
    Also from $\delta \in \FF 1$, $\vphi_0\inv(\delta) = \delta$ and, hence, using Lemma \ref{lemma:bar-dB}, we have that
    \[
        B = \overline {\overline B} = \overline {\delta B} = (-1)^{|\delta|} \vphi_0\inv(\delta) \overline B= \delta \overline B = \delta^2 B.
    \]
    This implies $\delta^2 = 1$. 
    Therefore $\delta \in \{ \pm 1 \}$, so $\overline B = \pm B$, concluding the proof. 
\end{proof}

% it is clear that $B(u,vd) = B(u,v)d$. By Equation \eqref{eq:sesquilinear-before-B}, the map $B: \U \times \U \to \D$ is a \emph{$\vphi_0$-sesquilinear form}, \ie,
% \[
%     B(ud, v) = (-1)^ {(|B| + |u|)|d|}
% \]

% Consider the map $\vphi_0: \D \to \D$ given by 

% Consider the map $\vphi_0(d) := \sign{\vphi_1}{d}\vphi_1\inv d \vphi_1$ (where juxtaposition denotes composition of maps on the right).
% Then
% \begin{equation}\label{eq:sesquilinear-before-B}
%     (ud)\vphi_1 = (u) (d\vphi_1) =  (u)(\vphi_1\vphi_1\inv d \vphi_1) = \sign{d}{\vphi_1}(u)\vphi_1 \,\vphi_0(d).
% \end{equation}
% It is straightforward to check that $\vphi_0: \D = \End_R(\mc U) \to \End_R(\mc U\Star) = \D\sop$ is an isomorphism of superalgebras.
% We will consider $\vphi_0$ as a super-anti-automorphism on $\D$.

%Recall (Subsection \ref{ssec:superlinear-maps}) that $\vphi_1^\circ$ is an $R$-superlinear map on the left. Using it, the Equation \eqref{eq:sesquilinear-before-B} becomes
% \begin{equation}\label{eq:sesquilinear-with-vphi1-circ}
%     \vphi_1^\circ (ud) = \vphi_1^\circ (u) \vphi_0 (d)
% \end{equation}

%For each $u\in \U$, $\vphi_1(u)$ is an $\D$-linear map on the left. We, then, can define \[B(u,v) = \sign{\vphi_1}{u} ((u)\vphi_1)(v),\]
%or, using the notation introduced in Subsection \ref{ssec:superlinear-maps},
% \[
%     B(u,v) = \vphi_1^\circ (u) (v),
% \]
% for all $u,v \in U$.


%We will consider $\vphi_0$ as a super-anti-automorphism on $\D$.

%Recall (Subsection \ref{ssec:superlinear-maps}) that $\vphi_1^\circ$ is an $R$-superlinear map on the left. Using it, the Equation \eqref{eq:sesquilinear-before-B} becomes


%Since  this new action makes $\mc U\Star$ a simple graded left $R$-supermodule. Also, since we had $\D\sop = \End_{R\sop} (\U\Star)$, we c it follows that $\D\sop$ can be identif
%We, then, have that $\mc U\Star$ is a simple graded left $R$-module and that $\D\sop = \End_R(\mc U\Star)$.

%Since $R$ acts on the left, we will use the convention of writing $R$-superlinear maps on the right. % (see Subsection \ref{ssec:superlinear-maps}).
%By Proposition {\tt ??}, $R$ has only one graded simple supermodule up to isomorphism and shift, \ie, there is an invertible $R$-linear map $\vphi_1: \mc U \to \mc U\Star$ which is homogeneous of some degree $(g_0, \alpha)\in G^\#$.



% Using the notation just introduced, Equation \eqref{eq:sesquilinear-before-B} becomes
% \begin{equation}%\label{eq:sesquilinear-with-vphi1-circ}
%     \vphi_1^\circ (ud) = \vphi_1^\circ (u) \tilde\vphi_0 (d)
% \end{equation}
% or, puting $\vphi_0(d) = (\tilde \vphi_0(d))^\circ$,
% \begin{equation}\label{eq:sesquilinear-with-vphi1-circ}
%     \vphi_1^\circ (ud) = (-1)^{|d|(|\vphi_1|+|u|)}\vphi_0 (d)\vphi_1^\circ (u).
% \end{equation}







% It is important to note that the map $\vphi_1$ is not uniquely determined. For every nonzero homogeneous element $d\in\D$, the map $d\vphi_1: \mc U \to \mc U\Star$ is also an invertible, homogeneous and $R$-superlinear. If we consider $\vphi_1$ fixed, every such map can be obtained this way: if $\vphi_1' : \mc U \to \mc U\Star$ is an invertible homogeneous $R$-superlinear map, then we could take $d := \vphi'\vphi\inv \in \End_R(\mc U) = \D$ and, hence, $\vphi_1' = d \vphi_1$.

% Changing $\vphi_1$ to $\vphi_1'$ also changes the super-anti-automorphism $\vphi_0 (c) = \sign{\vphi_1}{d}\vphi_1\inv d \vphi_1$ to $\vphi_0':= \sign{\delta\vphi_1}{d}\vphi_1\inv\delta\inv d \delta\vphi_1= \sign{\delta}{d} \vphi_0(\delta\inv d \delta)$. In other words, $\vphi_0' = \vphi_0 \circ \operatorname{sInt}_\delta$, where $\operatorname{sInt}_\delta: $

% The choice of the map $\vphi_1$ 

%If $\vphi_1' : \mc U \to \mc U\Star$ is another invertible and homogeneous $R$-superlinear map, then $\vphi'\vphi\inv: \mc U \to \mc U$ is a nonzero homogeneous element of $\D = \End_R(\mc U)$.
%Conversely, for each nonzero homogeneous element $\delta\in\D$, the map $\vphi_1' := \delta\vphi_1: \mc U \to \mc U\Star$ is $R$-superlinear, invertible and homogeneous.
% Changing $\vphi_1$ to $\vphi_1'$ also changes the super-anti-automorphism $\vphi_0(d) = \sign{\vphi_1}{d}\vphi_1\inv d \vphi_1$ to $\vphi_0':= $


% depends on the choice of $\vphi_1$: if we consider $\delta\vphi_1$ instead, then we change $\vphi_0(d) = \vphi_1\inv d \vphi_1$ to $\vphi_0'(d) = \vphi_0(\delta\inv d \delta)$.


\section{Matrix representation of a su\-per\--anti\--auto\-mor\-phism}

In this section, we are going to express the super-anti-automorphism (not necessarily involutive) $\vphi$ in terms of matrices with entries in $\D$. 
One could do that by following Equation \eqref{eq:vphi-r-Star-is-a-superconjugation}, but we will take a different path. 

As before, we suppose $\D$ is a graded division superalgebra, $\U$ is a nonzero right graded module of finite rank over $\D$, $R = \End_\D (\U)$ and $\vphi$ is a degree-preserving super-anti-automorphism on $R$. 
Also, let $\vphi_0$ be a super-anti-automorphism on $\D$ and $B$ be a nondegenerate $\vphi_0$-sesquilinear form on $\U$ determinig $\vphi$ as in Theorem \ref{thm:vphi-iff-vphi0-and-B}.

\begin{defi}
    Given a homogeneous $\D$-basis $\{e_1, \ldots, e_k\}$ of $\U$, the \emph{matrix representing the form B} is defined to be $\Phi = (\Phi_{ij}) \in M_k(\D)$, where $\Phi_{ij} = B(e_i, e_j)$.
\end{defi}

From now on, let $\mc B = \{e_1, \ldots, e_k\}$ be a fixed homogeneous $\D$-basis of $\U$, following Convention \ref{conv:pick-even-basis} (\ie, if $\D$ is odd, we take $\mc B$ with only even elements). 
We will use $\mc B$ to identify $R = \End_\D (\U)$ with $M_k (\D)$. 
Also, we will denote $|e_i|$ simply by $|i|$ for all $i \in \{1, \ldots, k\}$. 

% We will assume that the even elements precede the odd ones. 

% We will also follow Convention \ref{conv:pick-even-basis}, \ie, if $\D$ is odd, we will choose the $\D$-basis $\mc B$ to be one having only even elements.

\begin{convention}\label{conv:pick-even-basis}
    If $\D$ is odd (\ie, $\D\odd \neq 0$), we will choose the $\D$-basis $\mc B$ to be one having only even elements. 
    This is possible because, given any homogeneous $\D$-basis, we can multiply its odd elements by a nonzero homogeneous odd element in $\D$. 
\end{convention}

\begin{remark}
    It is well know that we a natural isomorphism between $M_k(\D)$ and $M_k(\FF)\tensor \D$, where we use the usual tensor product of algebras. 
    For superalgebras, though, we usually use a different product on the space $M_k(\FF)\tensor \D$, given by \[(r_1 \tensor s_1) (r_2 \tensor s_2) = \sign{r_2}{s_1} (r_1 r_2) \tensor (s_1 s_2).\] 
    If we are following Convention \ref{conv:pick-even-basis}, either $M_k(\FF)$ or $\D$ have trivial canonical $\ZZ_2$-grading, hence both tensor products coincide.
\end{remark}

\begin{defi}
    Let $X = (x_{ij})$ be a matrix in $M_k (\D)$. 
    We define $\vphi_0 (X)$ to be the matrix obtained by applying $\vphi_0$ in each entry, \ie, $\vphi_0 (X) \coloneqq (\vphi_0(x_{ij}))$. 
    We also extend the definition \emph{supertranspose} {(\tt see ??)} to matrices over $\D$ by putting $X\stransp \coloneqq \big((-1)^{(|i| + |j|) |i|} x_{ji} \big)$. 
    Note that, with our choice of $\mc B$ in the case of odd $\D$, we have that $X\stransp = X\transp$, the ordinary transpose.
\end{defi}

\begin{prop}\label{prop:matrix-vphi}
    Let $\Phi$ be the matrix representing $B$. 
    For every $r\in  R\even \cup R\odd$, let $X \in M_k(\D)$ be the matrix representing $r$ and let $Y \in M_k(\D)$ be the matrix representing $\vphi(r)$.
    Then, following Conventions \ref{conv:pick-even-form} and \ref{conv:pick-even-basis}, we have that
    %
    \begin{align}
        Y &= \Phi\inv\, \vphi_0( X\stransp )\, \Phi. \addtocounter{equation}{1}\tag{\theequation}\label{eq:matrix-vphi-D-even}
        \intertext{and, if $\D$ is odd, we have}
        Y &= \sign{B}{r}\,\Phi\inv\, \vphi_0( X\stransp )\, \Phi.\addtocounter{equation}{1}\tag{\theequation}\label{eq:matrix-vphi-D-odd}
    \end{align}
\end{prop}

\begin{proof}
    First of all, note that Equation \eqref{eq:superadjunction} is equivalent to the following:
    %
    \begin{alignat*}{2}
        \forall e_i, e_j \in \mc B, && B(re_i, e_j) &= \sign{r}{i} B(e_i, \vphi(r) e_j),
    \intertext{which, by the definitions of $X$, $Y$ and $\Phi$, becomes}
        \forall e_i, e_j \in \mc B, && \quad B\bigg(\sum_{\ell=1}^k e_\ell x_{\ell i}, e_j\bigg) &= \sign{r}{i} B\bigg(e_i, \sum_{\ell=1}^k e_\ell y_{\ell j}\bigg) \addtocounter{equation}{1}\tag{\theequation}\label{eq:superadjunction-matrix}.
    \end{alignat*}
    %
    
    Fix arbitrary $p,q \in \{1, \ldots, k\}$ and suppose that the $(p,q)$-entry of $X$ is a nonzero $G^\#$-homogeneous element of $\D$ and $x_{ij} = 0$ elsewhere, \ie, $X$ represents the map $r \in \End_\D(\U)$ defined by $r e_i = \delta_{iq} e_p x_{pq}$. 
    By the $\FF$-linearity of Equation \eqref{eq:matrix-vphi-D-even} %and \eqref{eq:matrix-vphi-D-odd}
    , it suffices to consider such $X$. 
    Note that $|r| = |e_p| + |x_{pq}| - |e_q| = |p| + |q| + |x_{pq}|$. 
    Then, on the one hand,
    %
    \begin{align*}
        B\bigg(\sum_{\ell=1}^k e_\ell x_{\ell i}, e_j\bigg) = B (e_p x_{pi}, e_j) &= (-1)^{ (|B| + |p|) |x_{pi}|} \vphi_0(x_{pi}) B(e_p, e_j)
        \\&= (-1)^{ (|B| + |p|) |x_{pi}|} \vphi_0(x_{pi}) \Phi_{pj},
    %\end{align*}
    %
    \intertext{which is only nonzero if $i = q$. On the other hand,}
    %
    %\begin{align*}
        \sign{r}{i} B\bigg(e_i, \sum_{\ell=1}^k e_\ell y_{\ell j}\bigg)
        &= \sign{r}{i} \sum_{\ell=1}^k B(e_i, e_\ell) y_{\ell j}\\
        &= (-1)^{ (|p| + |q| + |x_{pq}|) |i| } \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j}. 
    %\end{align*}
    %
    \intertext{Therefore, Equation \eqref{eq:superadjunction-matrix} is equivalent to, for all $i,j \in \{1, \ldots, k\}$,}
    %
    %\begin{align*}
        (-1)^{ (|B| + |p|) |x_{pi}|} \vphi_0(x_{pi}) \Phi_{pj} %&= \sign{r}{i} \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j}\\
        &= (-1)^{ (|p| + |q| + |x_{pq}|) |i| } \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j}. \addtocounter{equation}{1}\tag{\theequation}\label{eq:expression}
    \end{align*}
    %

    If $\D$ is even, then $|x_{pi}| = \bar 0$ and this equation reduces to
    \[              \vphi_0(x_{pi}) \Phi_{pj} = (-1)^{ (|p| + |q|) |i| } \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j}
    \]
    or, equivalently, 
    \[
        \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j} = (-1)^{ (|p| + |q|) |i| } \vphi_0(x_{pi}) \Phi_{pj}.
    \]
    The left-hand side is the $(i,j)$-entry of $\Phi\, Y$. 
    The right-hand side is only nonzero if $i = q$, so it can be rewritten as 
    $(-1)^{ (|p| + |i|) |i| } \vphi_0(x_{pi}) \Phi_{pj}$. 
    Recalling our choice of $X$, this is equal to $\sum_{\ell =1}^k (-1)^{ (|\ell| + |i|) |i| } \vphi_0(x_{\ell i}) \Phi_{\ell j}$, since $x_{\ell i}$ is only nonzero if $\ell = p$. 
    Hence the right-hand side is the $(i,j)$-entry of $\vphi_0 (X\stransp) \Phi$, and Equation \eqref{eq:matrix-vphi-D-even} follows. 
    
    If $\D$ is odd, by our choice of basis, Equation \eqref{eq:expression} reduces to
    \[
        (-1)^{|B| |x_{pi}|} \vphi_0(x_{pi}) \Phi_{pj} =  \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j},
    \]
    which, by the same reasoning as above, implies $(-1)^{|B||r|} \vphi_0(X\stransp) \Phi = \Phi Y$. 
    But we are following Convention \ref{conv:pick-even-form}, hence $|B| = \bar 0$ and, therefore, we have the desired result.
\end{proof}

% \begin{proof}
%     First of all, note that Equation \ref{eq:superadjunction} is equivalent to, for all $e_i, e_j \in \mc B$,
%     %
%     \[
%         B(re_i, e_j) = \sign{r}{i} B(e_i, \vphi(r) e_j).
%     \]
%     By the definitions of $X$, $Y$ and $\Phi$, we have that
%     %
%     \begin{align*}
%         B\bigg(\sum_{\ell=1}^k e_\ell x_{\ell i}, e_j\bigg) &= \sum_{\ell=1}^k (-1)^{( |B| + |\ell|) |x_{\ell i}|} \vphi_0( x_{\ell i} ) B (e_\ell x_{\ell i}, e_j)\\ &= \sum_{\ell=1}^k (-1)^{( |B| + |\ell|) |x_{\ell i}|} \vphi_0( x_{\ell i} ) \Phi_{\ell j}
%         \intertext{and}
%         \sign{r}{i} B\bigg(e_i, \sum_{\ell=1}^k e_\ell y_{\ell j}\bigg) 
%         &= \sign{r}{i} \sum_{\ell=1}^k B(e_i, e_\ell) y_{\ell j}\\
%         &= \sign{r}{i} \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j}. 
%     \end{align*}
%     %
    
%     Let $p,q \in \{1, \ldots, k\}$, and suppose $X$ is such that $x_{pq}$ is a nonzero $G^\#$-homogeneous element of $\D$ and $x_{ij} = 0$ elsewhere, \ie, $X$ represents the map $r \in \End_\D(\U)$ defined by $r e_i = \delta_{iq} e_p x_{pq}$. 
%     By the $\FF$-linearity of Equations \eqref{eq:matrix-vphi-D-even} and \eqref{eq:matrix-vphi-D-odd}, it suffices to consider such $X$. 
%     Note that $|r| = |e_q| + |x_{pq}| - |e_p| = |p| + |q| + |x_{pq}|$. 
%     Then
%     %
%     \begin{align*}
%         B\bigg(\sum_{\ell=1}^k e_\ell x_{\ell i}, e_j\bigg) = B (e_p x_{pi}, e_j) &= (-1)^{ (|B| + |p|) |x_{pi}|} \vphi_0(x_{pi}) B(e_p, e_j)
%         \\&= (-1)^{ (|B| + |p|) |x_{pi}|} \vphi_0(x_{pi}) \Phi_{pj},
%     \end{align*}
%     %
%     which is only nonzero if $i = q$. 
%     Combining this with Equation \eqref{eq:superadjunction-matrix}, we get
%     %
%     \begin{align*}
%         (-1)^{ (|B| + |p|) |x_{pi}|} \vphi_0(x_{pi}) \Phi_{pj} &= \sign{r}{i} \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j}\\
%         &= (-1)^{ (|p| + |q| + |x_{pq}|) |i| } \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j}. \addtocounter{equation}{1}\tag{\theequation}\label{eq:expression}
%     \end{align*}
%     %
%     If $\D$ is even, then $|x_{pi}| = 0$ and this expression reduces to
%     \[              \vphi_0(x_{pi}) \Phi_{pj} = (-1)^{ (|p| + |q|) |i| } \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j}
%     \]
%     or, reordering it, 
%     \[
%         \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j} = (-1)^{ (|p| + |q|) |i| } \vphi_0(x_{pi}) \Phi_{pj}.
%     \]
%     The left-hand side is the entry $ij$ of $\Phi\, Y$. 
%     The right-hand side is only nonzero if $i = q$, so it can be rewritten as 
%     $(-1)^{ (|p| + |i|) |i| } \vphi_0(x_{pi}) \Phi_{pj}$. 
%     Also, recalling our choice of $X$, it is equal to $\sum_{\ell =1}^k (-1)^{ (|\ell| + |i|) |i| } \vphi_0(x_{\ell i}) \Phi_{\ell j}$, since $x_{\ell i}$ is only nonzero if $\ell = p$. Hence the right-hand side is the $ij$ entry of $\vphi_0 (X\stransp) \Phi$, and Equation \eqref{eq:matrix-vphi-D-even} follows. 
    
%     If $\D$ is odd, by our choice of basis, Equation \eqref{eq:expression} reduces to
%     \[
%         (-1)^{|B| |x_{pi}|} \vphi_0(x_{pi}) \Phi_{pj} =  \sum_{\ell=1}^k \Phi_{i \ell} y_{\ell j},
%     \]
%     which implies $(-1)^{|B||r|} \phi_0(X\stransp) \Phi = \Phi Y$.
% \end{proof}

% \begin{remark}
%     Note that if $\D$ is odd, replacing $B$ by $dB$ with an odd $d$ if necessary, we can guarantee that $B$ is even. 
%     In this case, Equation \eqref{eq:matrix-vphi-D-odd} reduces to \eqref{eq:matrix-vphi-D-even}.
% \end{remark}

% \begin{cor}[of the proof]
%     Let $\vphi_0$ be a super-anti-automorphism on $\D$ and let $B$ be a nonzero $\vphi_0$-sesquilinear form on $\U$. If $\vphi\from R \to R$ be a parity preserving map satisfying Equation \eqref{eq:superadjunction}. 
%     Then $B$ is nondegenerate if, and only if, $\vphi$ is a super-anti-automorphism.
% \end{cor}

\section{Parametrization of superalgebras with superinvolution}

In this section we will introduce parameters that describe the finite dimensional associative superalgebras with superinvolution $(R, \vphi)$ where $R$ is graded simple and, then, give a classification result involving these parameters. 
Throughout this section, we will assume that $\FF$ is an algebraically closed field with $\Char \FF \neq 2$.

Recall from Theorem \ref{thm:vphi-involution-iff-delta-pm-1} that in this case we have that $R \iso \End_\D (\U)$ and that $\vphi$ is determined by a superinvolution $\vphi_0$ on $\D$ and a $\vphi_0$-sesquilinear form on $\U$.

\subsection{Parametrization of $(\D, \vphi_0)$}

Recall that a graded division superalgebra is the same as a graded division algebra if we consider the $G^\#$-grading. 
In particular, the isomorphism class of a finite dimensional graded division superalgebra $\D$ is determined by a pair $(T, \beta)$ where $T \coloneqq \supp \D \subseteq G^\#$ is a finite abelian group and $\beta\from T\times T \to \FF^\times$ is an alternating bicharacter {\tt (see ??)}. 
Instead of writing subscripts for the $G$-grading and superscripts for the canonical $\ZZ_2$-grading, it will be convenient to write $\D = \bigoplus_{t\in T} \D_t$ and recover the parity via the map $p\from T \to \ZZ_2$ which is the restriction of the projection $G^\# = G\times \ZZ_2 \to \ZZ_2$. 
% Sometimes we may want to discuss graded division superalgebras without reference to the groups $G$ or $G^\#$, so it is convenient to say 

{\tt (for the ``see'' part: [EK] $D_4$ and [BK] gradings on classical \\lie algebras)}

Since each component $\D_t$ of $\D$ is one-dimensional, an invertible degree-preserving map $\vphi_0\from \D \to \D$ is completely determined by a map $\eta\from T \to \FF^\times$.

\begin{prop}\label{prop:superpolarization}
    Let $\vphi_0\from \D \to \D$ be the invertible degree-preserving map determined by $\eta\from T \to \FF^\times$  such that $\vphi_0(X_t) = \eta(t) X_t$ for all $t\in T$ and $X_t\in \D_t$. 
    Then $\vphi_0$ is a super-anti-automorphism if, and only if,
    %
    \begin{equation}\label{eq:superpolarization}
        \forall a,b\in T, \quad (-1)^{p(a) p(b)} \beta(a,b) =  \eta(ab) \eta(a)\inv \eta(b)\inv.
    \end{equation}
    %
    Moreover, $\D$ admits a super-anti-automorphism if, and only if, $\beta$ only takes values $\pm 1$.
\end{prop}

\begin{proof}
    For all $a,b \in T$, let $X_a \in \D_a$ and $X_b\in \D_b$. Then:
    %
    \begin{alignat*}{2}
        &&\vphi_0(X_a X_b) &= (-1)^{p(a) p(b)} \vphi_0(X_b) \vphi_0(X_a)\\
        \iff&&\,\, \eta(ab)X_a X_b &= (-1)^{p(a) p(b)} \eta(a) \eta(b) X_b X_a\\
        \iff&&\, \eta(ab)X_a X_b &= (-1)^{p(a) p(b)} \eta(a) \eta(b) \beta(b,a) X_a X_b\\
        \iff&& \eta(ab) &= (-1)^{p(a) p(b)} \eta(a) \eta(b) \beta(b,a)
        \\
        \iff&& (-1)^{p(a) p(b)} \beta(b, a) &=  \eta(ab) \eta(a)\inv \eta(b)\inv.
    \end{alignat*}
    The right-hand side of this last equation does not change if $a$ and $b$ are switched, hence $\beta(b,a) = \beta(a,b)$. 
    
    Since $\beta$ is alternating, $\beta(b, a) = \beta (a, b)\inv$, therefore $\beta(a,b)^2 = 1$, which proves one direction of the ``moreover'' part.
    %from where we conclude that $\beta(a,b) = \pm 1$. 
    The converse follows from the fact that the isomorphism class of $\D\sop$ is determined by $(T, \beta\inv)$, so if $\beta$ takes only values in $\{ \pm 1 \}$, there must be an isomorphism from $\D$ to $\D\sop$, which can be seen as a super-anti-isomorphism on $\D$.
\end{proof}

\begin{cor}\label{cor:odd-cant-have-order-2}
    If $\D$ admits a superinvolution, %$\vphi_0$ is a superinvolution. 
    % $\eta(t) \in \{ \pm 1 \}$ for all $t\in T$. 
    then every odd element in $T$ must have order at least $4$.
\end{cor}

\begin{proof}
    The bicharacter $\beta$ is alternating, so if we put $a = b = t$ in Equation \eqref{eq:superpolarization}, we get
    %
    \begin{equation}\label{eq:eta-t-square}
        \forall t\in T, \quad \eta (t)^2 = (-1)^{p(t)} \eta(t^2).
    \end{equation}
    %
    % Also, since $\vphi_0^2 = \id$, $\eta(t)^2 = 1$ for all $t\in T$.
    
    Now let $t\in T^-$. 
    Every odd power of $t$ is also an odd element, so $t$ cannot have an odd order. 
    By Equation \eqref{eq:eta-t-square}, $\eta (t^2) = - \eta(t)^2 = -1$, hence $t^2 \neq e$.
\end{proof}

With this we can translate our task to the level of abelian groups. 
Instead of considering the graded superalgebra with super-anti-automorphism $(\D, \vphi_0)$, we can focus, instead, on the data $(T, \beta, p, \eta)$, where $T$ is a finite abelian group, $\beta$ is an alternating bicharacter on $T$, $p\from T \to \ZZ_2$ is a group homomorphism and $\eta\from T \to \FF^\times$ satisfies Equation \eqref{eq:superpolarization}. 
Also, the condition of $\vphi_0$ being a superinvolution clearly corresponds to $\eta(t) \in \{ \pm 1 \}$ for all $t\in T$.



\begin{remark}
    Proposition \ref{prop:odd-cant-have-order-2} also gives us another proof for the fact that the associative superalgebra $Q(n)$ does not admit a superinvolution (Corollary \ref{cor:Q-no-spuerinv-center}). 
    Recall that $Q(n) \iso \End_\D (\U)$ (Proposition ??), where $\D= \FF\ZZ_2$ with its natural $\ZZ_2$-grading and $\U$ is a right $\D$-module of finite rank. 
    If there were a superinvolution on $Q(n)$, by Theorem \ref{thm:vphi-involution-iff-delta-pm-1} we would have a superinvolution on $\D$, which is impossible since the only odd element of $T = \ZZ_2$ has order $2$. 
\end{remark}


\subsection{Parametrization of $(\U, B)$}

Let $R \coloneqq \End_\D (\U)$ and let $\vphi$ be a superinvolution on R. 
From Theorem \ref{thm:vphi-involution-iff-delta-pm-1}, $\vphi$ is determined by a pair $(\vphi_0, B)$, where $\vphi_0$ is a superinvolution on $\D$ and $B\from \U \times \U \to \D$ is a homogeneous $\vphi_0$-sesquilinear form on $\U$ such that $\overline B = \delta B$ with $\delta \in \{ \pm 1 \}$. 
From now on, suppose $(\D, \vphi_0)$ is associated to $(T, \beta, p, \eta)$ and let $g_0\in G^\#$ denote the degree of $B$. 

% In Section ??, we saw that the isomorphism class of $(\D, \vphi_0)$ can be described by $(T, \beta, p, \eta)$. 
Recall that the $G$-graded supermodule $\U$ can be regarded as a $G^\#$-graded module 
% written as a direct sum of its isotypic components % $\U_{gT} = \bigoplus_{h \in gT} \U_h$
and that its isomorphism class is determined by the map $\kappa\from G^\#/T \to \ZZ_{\geq 0}$ with finite support. 
More explicitly, $\kappa (gT) = \dim_\D \U_{gT}$, where $\U_{gT}$ is the isotypic component associated to the coset $gT$ (Subsection \ref{U-in-terms-of-GxZZ2}).

% defined by $\kappa (gT) = \dim_\D \U_{gT}$, where $\U_{gT}$ is the isotypic component associated to the coset $gT$ (Subsection \ref{U-in-terms-of-GxZZ2}).

% described by a map $\kappa\from G^\#/T \to \ZZ_{\geq 0}$ with finite support. 
The presence of $B$ gives us further restrictions on $\kappa$. 
Since $B$ has degree $g_0$ and takes values in $\D$, if $B(\U_{g}, \U_{g'}) \neq 0$ for some $g, g' \in G^\#$, then $g_0 g g' \in T$. 
In terms of isotypic components, this means that, given $\U_{g T}$, there is at most one isotypic component $\U_{g'T}$ such that $B(\U_{gT}, \U_{g'T}) \neq 0$, namely, $\U_{g_0\inv g\inv T}$. 
% we can only have $B(\U_{g T}, \U_{g' T}) \neq 0$ if $\bar {g'} = \bar g_0\inv \bar g\inv \in G^\#/T$. 
Since $B$ is nondegenerate, we have that $\U_{g T}$ and $\U_{g_0\inv g\inv T}$ are in duality via $B$ and, in particular, $\kappa(g T) = \kappa(g_0\inv g \inv T)$. 

Note that $\U_{g T} = \U_{g_0\inv g\inv T}$ if, and only if, $g_0 g^2 \in T$. 
In this case, we say that $\U_{gT}$ is a \emph{self-dual component}. 
Otherwise, we say that $\U_{gT}$ and $\U_{g_0\inv g\inv T}$ form a \emph{pair of dual components}.

\begin{lemma}\label{lemma:self-dual-components}
    Let $\U_{gT}$ be a self-dual isotypic component of $\U$ and put $k \coloneqq \kappa(gT)$. 
    The number 
    \begin{equation}
        \mu_{gT} \coloneqq (-1)^{|g|} \eta(g_0 g^2)\delta
    \end{equation}
    % $\mu_{gT} = (-1)^{|g|} \eta(g_0 g^2) \delta \in \pmone$
    does not depend on the choice of the representative $g$ for the coset $gT$. 
    If $\mu_{gT} = +1$, then there is a homogeneous $\D$-basis on $\U_{gT}$ such that the restriction of $B$ to $\U_{gT}$ is represented by $I_k$. 
    If $\mu_{gT} = -1$, then $k$ is even and there is a homogeneous $\D$-basis on $\U_{gT}$ such that the restriction of $B$ to $\U_{gT}$ is represented by $J_k \coloneqq 
    \begin{pmatrix}
        0 & I_{k/2}\\
        -I_{k/2} & 0
    \end{pmatrix}$. 
    In both cases, we can take all elements of the basis to have degree $g$.
\end{lemma}

\begin{proof}
    To show that $\mu_{gT}$ does not depend on the choice of $g$, let $s \in T$ and consider $g' \coloneqq gs$. 
    Then 
    \begin{align*}
        (-1)^{|g'|} \eta(g_0 (g')^2) &= (-1)^{|gs|} \eta(g_0 g^2 s^2)\\
        &= (-1)^{|g| + |s|} \sign{g_0 g^2}{s^2} \beta(g_0 g^2, s^2)\eta(g_0 g^2) \eta(s^2)\\
        &= (-1)^{|g| + |s|} (-1)^{2 |g_0 g^2| |s|} \beta(g_0 g^2, s)^2 \eta(g_0 g^2) \eta(s^2) \\
        &= (-1)^{|g| + |s|} \eta(g_0 g^2) \eta(s^2) \\ 
        &= (-1)^{|g| + |s|} \eta(g_0 g^2) (-1)^{|s|} \eta (s)^2 = (-1)^{|g|} \eta(g_0 g^2),
    \end{align*}
    where we have used Equation \eqref{eq:superpolarization} twice. 
    
    % Now lets us fix a representative $g\in G$ for the coset $gT$. 
    Observe that $\U_g \subseteq \U_{gT}$ is an $\FF$-vector space, and an $\FF$-basis for $\U_g$ is a $\D$-basis for $\U_{gT}$ (in other words, $\U_{gT} = \U_g \tensor \D)$. 
    Let $t=g_0 g^2$ and choose $0 \neq X_t \in \D_t$. 
    We define $B'\from \U_g \times \U_g \to \FF$ by $B'(u,v) \coloneqq B(u,v) X_t\inv$, for all $u, v \in \U_g$. 
    In other words, $B(u,v) = B'(u,v) X_t$ and, hence, $B'$ determines $B\restriction_{\U_{gT} \times \U_{gT}}$. 
    It follows that $B'$ is a nondegenerate bilinear form on $\U_g$. 
    Also, 
    \begin{alignat*}{3}
        \overline{B} (u, v) &= \sign{u}{v} \vphi_0\inv( B(v, u) )
        &&= \sign{g}{g} \vphi_0\inv( B'(v, u)X_t )\\
        &= (-1)^{|g|} B'(v, u) \vphi_0\inv(X_t)
        &&= (-1)^{|g|} B'(v, u) \eta(t)\inv X_t,
    \end{alignat*}
    so we have $\overline{B} (u, v) = \delta B (u, v) = \delta B' (u,v) X_t = (-1)^{|g|} B'(v, u) \eta(t)\inv X_t$ and, hence, $B'(v, u) = \mu_{gT} B'(u,v)$. 
    Therefore $B'$ is either symmetric or skew-symmetric, depending on $\mu_{gT} \in \pmone$.
    Depending on the case we can fix an orthonormal or a symplectic $\FF$-basis for $\U_g$ and we will use it as our choice of $\D$-basis for $\U_{gT}$. 
\end{proof}

To handle the case of a pair of dual components, we will separate in the cases $\D\odd = 0$ and $\D\odd \neq 0$. 
In the first, it makes sense to talk about parity of the isotypic components and, depending on $|g_0|$, we can have a pair of components with different parity. 
In the later, we follow Convention \ref{conv:pick-even-basis}.  

\begin{lemma}
    Let $\U_{gT}$ and $\U_{g'T}$ be a pair of dual isotypic components. 
    If $\D$ is even, then there are graded bases on $\U_{gT}$ and $\U_{g'T}$ such that the matrix representing the restriction of $B$ to $\U_{gT} \oplus \U_{g'T}$ is 
    \[\begin{pmatrix}
        0 & I\\
        \sign{gT}{g'T} \delta I & 0
    \end{pmatrix}.\]
    If $\D$ is odd, then there are 
    %even 
    graded bases on $\U_{gT}$ and $\U_{g'T}$ such that the matrix representing the restriction of $B$ to $\U_{gT} \oplus \U_{g'T}$ is 
    \[\begin{pmatrix}
        0 & I\\
        \delta I & 0
    \end{pmatrix}.\] 
    In both cases, we can take all elements of the basis of $\U_{gT}$ to have degree $g$ and all the elements of the basis of $\U_{g'T}$ to have degree $g_0\inv g\inv$.
\end{lemma}

\begin{proof}
    Let $\{ u_1, \ldots , u_k \}$ for $\U_g$ be a graded $\D$-basis for $\U_{gT}$. 
    Consider its dual basis in $\U_{g'T}$, \ie, the basis $\{ v_1, \ldots , v_k \}$ defined by $B(u_i, v_j) = \delta_{ij}$. 
    
    Since $\overline B(u_i, v_i) = \delta B(u_i, v_i)$, we have, by definition of $\overline{B}$, that
    \begin{align*}
        \sign{u_i}{v_i} \vphi_0\inv ( B(v_i, u_i) ) = \delta B(u_i, v_i),
    \end{align*}
    so
    \begin{align*}
        B(v_i, u_i) = \sign{u_i}{v_i} \vphi_0 ( B(u_i, v_i) ) = \sign{u_i}{v_i} B(u_i, v_i) = \sign{u_i}{v_i} \delta.
    \end{align*}
    If $\D$ is even, then $|u_i| = |gT|$ and $|v_j| = |g' T|$, for all $i,j \in \{1, \ldots, k\}$, proving the first statement. 
    If $\D$ is odd, we can follow Convention \ref{conv:pick-even-basis} to pick the elements $u_1, \ldots , u_k$ to be even, and, therefore, we have the second statement. 
    % and then, following Convention \ref{conv:pick-even-form}, we have the second statement.
    If we want to choose the degrees of the elements as in the statement, it suffices to choose $\{u_1, \ldots, u_k\}$ as a $\FF$-basis of $\U_g$.
\end{proof}

The considerations above and Lemma \ref{lemma:self-dual-components} motivate the following:

\begin{defi}
    Consider $g_0 \in G^\#$, $\delta \in \pmone$ and a map $\kappa\from G^\#/T \to \ZZ_{\geq 0}$. 
    We say that the triple $(g_0, \delta, \kappa)$ \emph{$(\D, \vphi_0)$-admissible} if:
    \begin{enumerate}[(i)]
        \item $\kappa$ has finite support; \label{item:kappa-finite-support}
        \item $\kappa(gT) = \kappa(g_0\inv g\inv T)$ for all $g\in G^\#$; \label{item:kappa-duality}
        \item For any $g\in G^\#$, if $g_0 g^2 \in T$ and $\kappa (gT)$ is odd, then $(-1)^{|g|} \eta (g_0 g^2) \delta = 1$. \label{item:kappa-parity}
    \end{enumerate}
    The set of all $(\D, \vphi_0)$-admissible triples will denote by $\mathsf{X}(\D, \vphi_0)$.
\end{defi}

Clearly, to each pair $(\U, B)$, where $\U$ is graded $\D$-module of finite rank, $B$ is a nondegenerate $\vphi_0$-sesquilinear map, we can a associate a triple $(g_0, \delta, \kappa) \in \mathsf{X} (\D, \vphi_0)$. 

\begin{prop}
    Two pairs $(\U, B)$ and $(\U', B')$ are isomorphic if, and only if, they are associated to the same triple in $\mathsf{X} (\D, \vphi_0)$.
\end{prop}

\begin{proof}
    Suppose there is $\psi\from \U \to \U'$ an isomorphism from $(\U, B)$ to $(\U', B')$. Since, in particular, $\psi$ is an isomorphism of graded $\D$-modules, both $\U$ and $\U'$ correspond to the same map $\kappa\from G^\#/T \to \ZZ_{\geq 0}$. 
    Also, from the fact that $B'(\psi(u), \psi(v)) = B(u, v)$ for all $u, v\in \U$, it is clear that $\deg B' = \deg B$.
    Moreover, if $\overline{B} = \delta B$, then
    \begin{align*}
        \overline{B'} \big(\psi(u), \psi(v) \big) &= \sign{\psi(u)}{\psi(v)} \vphi_0\inv \Big( B'\big( \psi(v) , \psi(u) \big) \Big) \\
        &= \sign{u}{v} \vphi_0\inv \big( B(v, u) \big) 
        = \overline{B} (u, v) \\
        &= \delta B(u, v) = \delta B' \big( \psi(u), \psi(v) \big),
    \end{align*}
    for all $u, v \in \U$. 
    Since $\psi$ is surjective, it follows that $\overline{B'} = \delta B'$. 
    
    Conversely, suppose that $(\U, B)$ and $(\U, B')$ correspond to the same triple $(g_0, \delta, \kappa)$. 
    Let $g\in G^\#$
    Then, for every $g \in G^\#$, $\dim_\D \U_{gT} = \dim_\D \U'_{gT}$, and $\U_{gT}$ is self-dual if, and only if, $\U'_{gT}$ also is (since it happens if, and only if, $g_0 g^2 \in T$).
    
    For every coset $x \in G^\#/T$, choose $g\in G^\#$ such that $x = gT$. 
    
    and, for every pair of elements $g, g' \in G^\#$ such that $g_0 g g' \in T$, choose an order.  
    
    and, in this case, we can use Lemma \ref{lemma:self-dual-components} to find graded $\D$-bases $\mc B = \{u_1, \ldots, u_k\}$ and $\mc B' = \{v_1, \ldots, v_k\}$ on $\U_{gT}$ and $\U'_{gT}$, respectively, such that the restrictions of $B$ and $B'$ to $\U_{gT}$ and $\U'_{gT}$ have the same representing matrix and all elements $u_1, \ldots, u_k, v_1, \ldots, v_k$ have degree $g$. 
    It follows that the $\D$-linear map $\psi_{gT} \from \U_{gT} \to \U'_{gT}$ defined by $\psi_{gT} (u_i) = v_i$ is invertible, degree preserving and $B'$
    
    the number $\mu_{gT}$ defined by Equation \eqref{eq:mu-gT} is the same. 

\end{proof}

We also have that for every triple $(g_0, \delta, \kappa) \in \mathsf{X}(\D, \vphi_0)$, there are a graded $\D$-module $\U$ of finite rank and a nondegenerate $\vphi_0$-sesquilinear form $B$ on $\U$ such that $\overline{B} = \delta B$. 
To see that, let $\xi \from G^\#/T \to G^\#$ be a map choosing a representative for each coset. 


\subsection{Classification up to isomorphism}


\section{Superinvolution-simple superalgebras}

A superalgebra $R$ with super-anti-automorphism $\vphi$ is said to be \emph{$\vphi$-simple} %(or \emph{$*$-simple})
superideals if the only $\vphi$-invariant of $R$ are $0$ and $R$. 
In the case $\vphi$ is a superinvolution, we say that the pair $(R, \vphi)$ is a \emph{superinvolution-simple superalgebra}.
In this section we will review some general results on associative superinvolution-simple superalgebras following \cite{racine}. 
After that, we consider $G$-gradings on these superalgebras and relate them with results from the previous sections.

% In this section we will discuss some general results about superalgebras with superinvolution with no nontrivial ideals that are invariant under the superinvolution. 
% Until Corollary ??, we present some concepts and results from \cite{racine}. %, and gradings other than the canonical one are not considered. 
 
We note that superalgebras with super-anti-automorphism are a special case of Definition {\tt ??}. 

% \begin{itemize}
%     \item[\done] Need to define superinvolution-simple superalgebra. 
%     Reference to nonexisting chapter about $\widehat G$-action.
    
%     \item[\done] Define exchange superinvolution on $S\times S\sop$; lemma proving it is $\vphi$-simple iff $S$ is simple.
    
%     \item[\done] Proposition stating that $\vphi$ simple are either $S$ or $S\times S\sop$ for simple $S$.
    
%     \item[\done] Example: $\FF\ZZ_2 \times \FF\ZZ_2\sop \iso \FF\ZZ_4$ (true for any field, even when $\FF\ZZ_2\sop \not \iso \FF\ZZ_2$).
    
%     \item Discuss the center: it is always graded, $\vphi$ always restricts to it, the center of $R$ and $\D$ are the same with same superinvolution.

%     \item If $R$ is super-involution simple and graded simple, then $\D$ is superivolution simple. 
%     Moreover, with the center and its canonical $\ZZ_2$-grading we can say $\D$ has the type ($M$, $M\times M$, $Q$ or $Q\times Q$).
    
%     \item What are the superinvolutions on the centers of $M$, $M\times M$, $Q$ or $Q\times Q$ it they have a division grading?
% \end{itemize}

% \begin{defi}
%     Let $(R, \vphi)$ be a superalgebra with superinvolution. 
%     A subset $I \subseteq R$ is said to be \emph{$\vphi$-invariant} if $\vphi(I) \subseteq I$. 
%     We say that $(R, \vphi)$ is a \emph{superinvolution-simple superalgebra} if the only $\vphi$-invariant superideals of $R$ are the trivial ones.
% \end{defi}

The next definition and lemma give us a class of examples of superinvolution-simple superalgebras that are not simple as superalgebras. 
In fact, Proposition \ref{prop:only-SxSsop-is-simple} will tell us these are the only examples. 
% Among all these, Example ?? is of special interest for us will be discussed with details.

\begin{defi}\label{def:SxSsop}
    Let $S$ be a superalgebra and consider the superalgebra $S \times S\sop$. 
    We define the \emph{exchange superinvolution} on $S \times S\sop$ to be the map $\vphi\from S \times S\sop \to S \times S\sop$ given by $\varphi (s_1, \bar s_2) = (s_2, \bar s_1)$. Recall that $\bar s$ denotes the element $s \in S$ seen as an element of $S\sop$. 
\end{defi}

It should be noted that, if $S$ admits a super-anti-isomorphism $\psi\from S \to S$, then $S\times S\sop$ with the exchange superinvolution is isomorphic to $S\times S$ with the superinvolution given by $(s_1, s_2) \mapsto (\psi\inv (s_2), \psi (s_1))$.

\begin{lemma}\label{lemma:SxSsop-simple-iff-S-simple}
    Let $S$, be a superalgebra and let $\vphi$ be the exchange superinvolution on $R \coloneqq S \times S\sop$. 
    Then $(R, \vphi)$ is superinvolution-simple if, and only if, $S$ is simple as a superalgebra. 
\end{lemma}

\begin{proof}
    We will prove that the $\vphi$-invariant superideals of $(S \times S\sop, \vphi)$ are precisely the subsets of the form $I \times I\sop$ where $I$ is a superideal of $S$. 
    
    Let $I$ be a superideal of $S$ and consider $J \coloneqq I \times I\sop$. 
    Clearly, $J$ is a $\vphi$-invariant subsuperspace of $S \times S\sop$. 
    Suppose $i_1, i_2 \in I\even \cup I\odd$ and let $r = (s_1, \bar s_2) \in R\even \cup R\odd$. 
    Then $r\, (i_1, \bar i_2) = (s_1 i_1, \sign{s_2}{i_2}\, \overline{i_2 s_2}) \in J$ and $(i_1, \bar i_2)\, r = (i_1 s_1, \sign{s_2}{i_2}\, \overline{s_2 i_2}) \in J$, so $J$ is, indeed, a superideal.
    
    Now let $J$ be any $\vphi$-invariant superideal of $S\times S\sop$ and let $I \coloneqq (1,0)\, J$, which we can regard as a subspace $S \iso S \times \{ 0 \}$. 
    First, note that $I$ is a superideal of $S$.
    Since $J$ is a superideal, $I \subseteq J$, and since $J$ is $\vphi$-invariant, $I + \vphi(I) = I \times I\sop \subseteq J$.
    If $(j_1, \bar j_2) \in J$, then, on the one hand, $j_1 \in I$, and, on the other hand, $\vphi(j_1, \bar j_2) = (j_2, \bar j_1) \in J$, so $j_2 \in I$. 
    Therefore $(j_1, \bar j_2)\in I \times I\sop$, concluding the proof.
\end{proof}

\begin{ex}\label{ex:FxF-iso-FZ2}
    The simplest possible example is to take $S = \FF$, with trivial $\ZZ_2$-grading. 
    If $\Char \FF \neq 2$, then $S\times S\sop = \FF [\zeta]$ where $\zeta = (1, -1)$ and the exchange superinvolution is given by $\vphi(1) = 1$ and $\vphi(\zeta) = -\zeta$.
    Note that $\FF [\zeta] \iso \FF\ZZ_2$ with the trivial $\ZZ_2$-grading, \ie, we consider all elements of $\FF\ZZ_2$ to be even.
\end{ex}

\begin{ex}\label{ex:FZ2xFZ2sop-iso-FZ4}
    Consider $S = Q(1)$, so $S\even = \FF 1$ and $S\odd = \FF u$ where $u^2 =1$. 
    Note that $S$ is isomorphic to $\FF\ZZ_2$, but this time with its natural $\ZZ_2$-grading.
    % we are the group algebra $S = \FF \langle u \rangle$, where $u$ has order $2$, as a superalgebra by declaring  (in other words, $S \iso Q(1)$).
    % We claim that $S\times S\sop$ is isomorphic to $\FF\langle \omega \rangle$, where $\omega$ has order $4$.
    If $\Char \FF \neq 2$, we claim that $R \coloneqq S\times S\sop$ is isomorphic to $F\ZZ_4$. 
    Indeed, the element $\omega \coloneqq (u, \bar u) \in S\times S\sop$ has order $4$ and generates $S\times S\sop$: $\omega^2 = (1, - \bar 1)$, $\omega^3 = (u, - \bar u)$ and $\omega^4 = (1, 1)$. 
    Hence $R\even = \FF1 \oplus \FF \omega^2$ and $R\odd = \FF \omega \oplus \FF \omega^3$.
    Also, the exchange superinvolution on $R$ is given by $\vphi(1) = 1$, $\vphi(\omega) = \omega$, $\vphi(\omega^2) = -\omega^2$ and $\vphi(\omega^3) = -\omega^3$.
\end{ex}

\begin{prop}\label{prop:only-SxSsop-is-simple}
    Let $(R, \vphi)$ be a superinvolution-simple superalgebra.
    Then either $R$ is a simple superalgebra or there is a simple superalgebra $S$ such that $(R, \vphi)$ is isomorphic to $S\times S\sop$ with the exchange superinvolution. 
\end{prop}

\begin{proof}
    Suppose $R$ is not simple and let $0 \neq I \subsetneq R$ be a superideal. 
    Note that $\vphi(I)$ is also a superideal, hence $I \cap \vphi(I)$ and $I + \vphi (I)$ are $\vphi$-invariant superideals. 
    Since $I \cap \vphi(I) \subseteq I \neq R$, we have $I \cap \vphi(I) = 0$, so we can write $I + \vphi (I) = I \oplus \vphi (I)$. 
    Since $0 \neq I \subseteq I \oplus \vphi (I)$, we conclude that $R = I \oplus \vphi (I)$.
    Clearly, this implies that $(R, \vphi)$ is isomorphic to $I \times I\sop$ with exchange superinvolution. 
    By Lemma \ref{lemma:SxSsop-simple-iff-S-simple}, $I$ must be simple as a superalgebra, concluding the proof.
\end{proof}

Recall that, over an algebraically closed field, every finite dimensional simple associative superalgebra is either isomorphic to $M(m,n)$ or to $Q(n)$ (prop ??). 
Hence, Proposition \ref{prop:only-SxSsop-is-simple} tells us that if $(R, \vphi)$ is a  finite dimensional superinvolution-simple superalgebra, then $R$ is isomorphic to either $M(m,n)$, $Q(n)$, $M(m,n) \times M(m,n)\sop$ or $Q(n) \times Q(n)\sop$.
However, it is well known that the associative superalgebra $Q(n)$ does not admit a superinvolution (see, for example, ?? and ?? or Corollary \ref{cor:Q-no-spuerinv-center}, below),
% (it is a well-known fact, see ?? and ??, and it follows as corollary of the theoryand we have a proof for it later this section, , and it also follows from ??). 
hence, our superalgebra $R$ can only belong to 3 different families of superalgebras. 
We will say $(R,\vphi)$ is of \emph{type} $M$, $M\times M\sop$ or $Q\times Q\sop$ according to which family it belongs. 
And, as we are going to see, we can use the center of $R$ to distinguish among them.

\begin{defi}
    Let $R$ be an associative (super)algebra.
    The \emph{center} of $R$ is the set 
    \[
        Z(R) = \{c\in R \mid cr = rc \text{ for all } r\in R \}.
    \]
\end{defi}

\begin{remark}
    For a superalgebra, there is also the notion of \emph{supercenter} (\ie, the linear span of the set of homogeneous elements $c \in R$ such that $rc = \sign{r}{c} cr$ for every homogeneous element $r \in R$), but this is not what we are considering here.
\end{remark}

% The following is true for any graded associative algebra (hence for superalgebras and graded superalgebras), so we state and prove in this generality. (see ??)

% It is important to note that we are considering here the notion of center as we would do for algebras. 
% In the superalgebra case one could consider the supercentre

\begin{lemma}\label{lemma:center-is-graded}
    Let $G$ be an abelian group and let $R$ be a $G$-graded associative algebra.
    Then the center $Z(R)$ is a $G$-graded subspace of $R$. 
\end{lemma}

\begin{proof}
    Let $c \in Z(R)$ and write $c = \sum_{g\in G} c_g$, where $c_g \in R_g$ for all $g \in G$.
    For every homogeneous $r \in R$, we have that
    %
    \begin{align*}
        \big(\sum_{g\in G} c_g\big)r = r \big(\sum_{g\in G} c_g\big).
    \end{align*}
    %
    Comparing the components of degree $gh = hg$, where $h = \deg r$, we conclude that $rc_g = c_g r$ for all $g \in G$. 
    By linearity, $r c_g = c_g r$ for all $r\in R$, hence $c_g \in Z(R)$.
\end{proof}

Applying this lemma to an associative superalgebra $R$, with $G^\#$ playing the role of $G$, we see that $Z(R)$ is a $G$-graded subsuperspace of $R$.

% \begin{proof}
%     Let $c \in Z(S)$ and write $c = c_{\bar 0} + c_{\bar 1}$, where $c_i \in S^i$, $i \in \ZZ_2$.
%     For every $s \in S\even \cup S\odd$, we have that
%     %
%     \begin{align*}
%         (c_{\bar 0} + c_{\bar 1})s = s (c_{\bar 0} + c_{\bar 1}),
%     \intertext{hence,}
%         c_{\bar 0}s + c_{\bar 1}s = s c_{\bar 0} + s c_{\bar 1}.
%     \end{align*}
%     %
%     Since $s$ has parity, we must have $sc_i = c_is$, $i \in \ZZ_2$. 
%     But then it follows, by linearity, $sc_i = c_is$ for all $s\in S$, concluding the proof.
% \end{proof}

\begin{lemma}
    Let $(R, \vphi)$ be a superalgebra with super-anti-automorphism. 
    Then $Z(R)$ is $\vphi$-invariant.
\end{lemma}

\begin{proof}
    By Lemma \ref{lemma:center-is-graded}, with $G = \ZZ_2$, we have $Z(R) = Z(R)\even \oplus Z(R)\odd$, so it is sufficient to show that if $c \in Z(R)\even \cup Z(R)\odd$, then $\vphi(c) \in Z(R)$.
    Let $r \in R\even \cup R\odd$. 
    Since $c\vphi\inv (r) = \vphi\inv (r)c$, we can apply $\vphi$ on both sides and get $\sign{c}{r} r \vphi(c) = \sign{c}{r} \vphi(c) r$ and, hence, $r \vphi(c) = \vphi(c) r$.
\end{proof}

\begin{cor}\label{cor:Q-no-spuerinv-center}
    If $\Char \FF \neq 2$, the associative superalgebra $Q(n)$ does not admit a superinvolution.
\end{cor}

\begin{proof}
    The center of $Q(n)$ is isomorphic to $\FF1 \oplus \FF u$, where $u$ is an odd element with $u^2 = 1$. 
    Let $\vphi$ be a super-anti-automorphism on $Q(n)$. 
    Since $u$ is odd and central, $\vphi(u)$ is odd and central. 
    Hence there is $\lambda \in \FF$ such that $\vphi(u) = \lambda u$. 
    Using that $u^2 = 1$, we have $1 = \vphi(1) = \vphi(u^2) = - \vphi(u)^2 = - \lambda^2$. 
    But then $\vphi^2 (u) = \lambda^2 u = -u \neq u$, hence $\vphi^2 \neq \id$. 
\end{proof}

% \begin{defi}
%     Let $R$ be a superalgebra and let $\vphi\from R\to R$ be a superinvolution. 
%     We say that $\vphi$ is of the \emph{first kind} if it fixes all the elements of $Z(R)$. 
%     Otherwise, we say that $\vphi$ is of the \emph{second kind}.
% \end{defi}

\begin{prop}\label{prop:types-of-SA-via-center}
    Let $(R, \vphi)$ be a superalgebra with superinvolution.
    \begin{enumerate}[(i)]
        \item If $(R, \vphi)$ is of type $M$, then $(Z(R), \vphi) \iso (\FF, \id)$;\label{item:F-id}
        \item If $(R, \vphi)$ is of type $M\times M\sop$, then $(Z(R), \vphi)$ is isomorphic to the superalgebra with superinvolution in Example \ref{ex:FxF-iso-FZ2};\label{item:FZ2-exchg}
        \item If $(R, \vphi)$ is of type $Q\times Q\sop$, then $(Z(R), \vphi)$ is isomorphic to the superalgebra with superinvolution in Example \ref{ex:FZ2xFZ2sop-iso-FZ4}.\label{item:FZ4-exchg}
    \end{enumerate}
\end{prop}

\begin{proof}
    Item \eqref{item:F-id} follows from the fact that $Z(M_{m+n}(\FF)) \iso \FF$. 
    It is easy to check that $Z(S\times S\sop) = Z(S) \times Z(S)\sop$ for any superalgebra $S$, so items \eqref{item:FZ2-exchg} and \eqref{item:FZ4-exchg} follow from $Z(M_{m+n}(\FF)) \iso \FF$ and $Z(Q(n)) \iso Q(1)$.
\end{proof}

For the remainder of the section, we will consider, as before, $R \coloneqq \End_\D(\U)$, where $\D$ is a graded division superalgebra and $\U$ is a nonzero graded right $\D$-module of finite rank. 
Also, let $\vphi$ be a super-anti-automorphism on $R$ and let $(\vphi_0, B)$ be pair determining $\vphi$ as in Theorem \ref{thm:vphi-iff-vphi0-and-B} and following Convention \ref{conv:pick-even-form}.

We will now show that we can identify $(Z(\D), \vphi_0)$ with $(Z(R), \vphi)$. 
For every $c\in Z(\D)$, consider $r_c\from \U \to \U$ given by $r_c(u) = uc$. 
Clearly, $r_c$ is $\D$-linear, so $r_c \in R$. 
Actually, we have $r_c\in Z(R)$. 
Indeed, for all $r\in R = \End_\D(\U)$ and all $u\in \U$, we have $r (r_c(u)) = r(uc) = r(u) c = r_c(r(u))$.

\begin{prop}\label{prop:R-and-D-have-the-same-center}
    The map $Z(\D) \to Z(R)$ given by $c \mapsto r_c$ is an isomorphism of $G$-graded superalgebras. 
    Moreover, $\vphi (r_c) = r_{\vphi_0(c)}$.
\end{prop}

\begin{proof}
    Given $r\in Z(R)$, we can define $c_r\in \End_R (\U) =\D$ by $uc_r = r(u)$ for all $u\in \U$. 
    Computations analogous to the ones above show that $c\in Z(\D)$, and it is clear that the map $r\mapsto c_r$ is the inverse of the map $c \mapsto r_c$. 
    The definition of grading on $R = \End_\D (\U)$ implies that these maps are isomorphisms of $G$-graded superalgebras.
    
    For the ``moreover'' part, fix $c\in Z(\D)\even \cup Z(\D)\odd$ and let $u, v \in \U\even \cup \U\odd$. 
    On the one hand, 
    \begin{align*}
        B(uc,v) = B(r_c u), v) = (-1)^{|r_c||u|} B(u, \vphi(r_c) v) = (-1)^{|c||u|} B(u, \vphi(r_c) v).
    \end{align*}
    On the other hand,
    \begin{align*}
        B(uc, v) = (-1)^{(|B| + |u|) |c|} \vphi_0(c) B(u, v)  &= (-1)^{(|B| + |u|) |c|} B(u, v) \vphi_0(c)\\
        &= (-1)^{(|B| + |u|) |c|} B(u, v \vphi_0(c) )\\
        &= (-1)^{(|B| + |u|) |c|} B(u, r_{\vphi_0(c)}v).
    \end{align*}
    %
    Since we are following Convention \ref{conv:pick-even-form}, either $\D$ is even, and hence $|c| = \bar 0$, or
    $|B| = \bar 0$. 
    In any case, $|B||c| = \bar 0$, so we have that \[(-1)^{|c||u|} B(u, \vphi(r_c) v) = (-1)^{|c||u|} B(u, r_{\vphi_0(c)}v),\] and, hence, $B(u, (\vphi(r_c) - \vphi_0(c)) v) = 0$ for all $u, v \in \U$. 
    Since $B$ is nondegenerate, the results follows.
\end{proof}

\begin{prop}
    The superalgebra $R$ is $\vphi$-simple if, and only if, the superalgebra $\D$ is $\vphi_0$-simple.
\end{prop}

\begin{proof}
    Pick a homogeneous $\D$-basis for $\U$ following Convention \ref{conv:pick-even-basis} and use it to identify $R$ with $M_k(\D) = M_k(\FF) \tensor \D$. 
    By Proposition \ref{prop:matrix-vphi}, there is an invertible matrix $\Phi \in M_k(\D)$ such that, for every $X \in M_k(\D)$,
    $\vphi(X) = \Phi\inv \vphi_0(X\stransp) \Phi$.
    
    It is well known that the ideals of $M_k(\D)$ are precisely the sets of the form $M_k(I)$ for $I$ an ideal of $\D$. 
    We will prove an analog of this, first, for superideals and, then, for $\vphi$-invariant superideals.
    
    If $I$ is a superideal, $M_k(I) = M_k(\FF) \tensor I$ is also a superideal since it is spanned by a set of $\ZZ_2$-homogeneous elements, namely, the elements of the form $E_{ij}\tensor d$ where $1 \leq i,j \leq k$ and $d \in I\even \cup I\odd$. 
    Conversely, if $J = M_k(I)$ is a superideal, then we can write $I = \{ d\in  \D \mid E_{11}\tensor d \in J\}$. 
    For every $d\in I$, write $d = d_{\bar 0} + d_{\bar 1}$, where $d_\alpha \in \D^\alpha$, $\alpha \in \ZZ_2$. 
    Since the $\ZZ_2$-homogeneous components of $E_{11}\tensor d$ are $E_{11}\tensor d_{\bar 0}$ and $E_{11}\tensor d_{\bar 1}$ and they belong to $J$, we have $d_{\bar 0}, d_{\bar 1} \in I$.
    
    Now we are going to show that $M_k(I)$ is $\vphi$-invariant if, and only if, $I$ is $\vphi_0$-invariant. 
    Suppose $I$ is $\vphi_0$-invariant.
    Then if $X \in M_k(I)$, it is clear that $\vphi_0 (X\stransp)$ is also in $M_k(I)$. 
    But then $\vphi(X) = \Phi\inv \vphi_0(X\stransp) \Phi \in M_k(I)$ since $M_k(I)$ is an ideal. 
    Conversely, suppose $M_k(I)$ is $\vphi$-invariant. 
    Let $d \in I$ and consider $X = E_{11} \tensor d \in M_k(I)$.
    Then $E_{11} \tensor \vphi_0(d) = \vphi_0(X\stransp) = \Phi\, \vphi(X)\, \Phi\inv \in M_k(I)$, which shows that $\vphi_0(d) \in I$.
\end{proof}

\begin{cor}\label{cor:D-has-the-same-type}
    Suppose $\FF$ is an algebraically closed field and $\Char \FF \neq 2$. 
    Assume that $\vphi$ is a superinvolution and that $R$ is $\vphi$-simple. 
    Then $(R, \vphi)$ is of the same type as $(\D, \vphi_0)$. \qed
\end{cor}

% \begin{cor}\label{cor:D-has-the-same-type}
%     Suppose $\FF$ is an algebraically closed field and $\Char \FF \neq 2$. 
%     Assume that $\vphi$ is a superinvolution and that $R$ is $\vphi$-simple.
%     %
%      \begin{enumerate}[(i)]
%         \item If $R\iso M(m,n)$, then there are $m', n'\geq 0$ such that $\D \iso M(m', n')$;
%         \item If $R\iso M(m,n)\times M(m,n)\sop$ with exchange superinvolution, then there are $m', n'\geq 0$ such that $(\D, \vphi_0)$ is isomorphic to $M(m', n')\times M(m', n')\sop$ with exchange superinvolution;
%         \item If $R\iso Q(n)\times Q(n)\sop$ with exchange superinvolution, then there is $n' \geq 0$ such that $(\D, \vphi_0)$ is isomorphic to $Q(n')\times Q(n')\sop$ with exchange superinvolution.\qed
%     \end{enumerate}
% \end{cor}

We will obtain more precise information about $\D$ in the next section.

% As a consequence of this last Corollary, we can only put a $G$-grading on $M(m,n)\times $Em particular, em MxM precisamos de um elemento par de ordem 2 e em QxQ precisamos de um elemento impar de ordem 4 (comparar com resultado no paper sobre Q).

% \begin{remark}\label{rmk:we-only-need-B'-nonzero}
%     Note that in the proof of the ``moreover'' part of Theorem \ref{thm:vphi-iff-vphi0-and-B}, we do not need to assume $B'$ is nondegenerate, we only use that it is nonzero.
% \end{remark}


% \section{Graded division superalgebras with super-anti-automorphism}
% % -----------------------------------------

% We are now going is to investigate the finite dimensional graded division superalgebras that admit a superinvolution. 
% Throughout this section, we will assume that $\FF$ is an algebraically closed field with $\Char \FF \neq 2$, and we will fix a primitive fourth root of unity $i \in \FF$.
% %In this case, because of Theorem \ref{thm:vphi-involution-iff-delta-pm-1}, we are primarily interested in the case the graded division superalgebra admits a superinvolution.
% Our final goal is to classify the division gradings on finite dimensional superinvolution-simple associative superalgebras.
 
% Recall that a graded division superalgebra is the same as a graded division algebra if we consider the $G^\#$-grading. 
% In particular, the isomorphism class of a finite dimensional graded division superalgebra $\D$ is determined by a pair $(T, \beta)$ where $T \coloneqq \supp \D \subseteq G^\#$ is a finite abelian group and $\beta\from T\times T \to \FF^\times$ is an alternating bicharacter {\tt (see ??)}. 
% \marginpar{\tt (for the ``see'' part: [EK] $D_4$ and [BK] gradings on classical \\lie algebras)}
% Instead of writing subscripts for the $G$-grading and superscripts for the canonical $\ZZ_2$-grading, it will be convenient to write $\D = \bigoplus_{t\in T} \D_t$ and recover the parity via the map $p\from T \to \ZZ_2$ which is the restriction of the projection $G^\# = G\times \ZZ_2 \to \ZZ_2$.

% Since each component $\D_t$ of $\D$ is one-dimensional, an invertible degree-preserving map $\vphi_0\from \D \to \D$ is completely determined by a map $\eta\from T \to \FF^\times$.

% \begin{prop}\label{prop:superpolarization}
%     Let $\vphi_0\from \D \to \D$ be the invertible degree-preserving map determined by $\eta\from T \to \FF^\times$  such that $\vphi_0(X_t) = \eta(t) X_t$ for all $t\in T$ and $X_t\in \D_t$. 
%     Then $\vphi_0$ is a super-anti-automorphism if, and only if,
%     %
%     \begin{equation}\label{eq:superpolarization}
%         \forall a,b\in T, \quad (-1)^{p(a) p(b)} \beta(a,b) =  \eta(ab) \eta(a)\inv \eta(b)\inv.
%     \end{equation}
%     %
%     Moreover, $\D$ admits a super-anti-automorphism if, and only if, $\beta$ only takes values $\pm 1$.
% \end{prop}

% \begin{proof}
%     For all $a,b \in T$, let $X_a \in \D_a$ and $X_b\in \D_b$. Then:
%     %
%     \begin{alignat*}{2}
%         &&\vphi_0(X_a X_b) &= (-1)^{p(a) p(b)} \vphi_0(X_b) \vphi_0(X_a)\\
%         \iff&&\,\, \eta(ab)X_a X_b &= (-1)^{p(a) p(b)} \eta(a) \eta(b) X_b X_a\\
%         \iff&&\, \eta(ab)X_a X_b &= (-1)^{p(a) p(b)} \eta(a) \eta(b) \beta(b,a) X_a X_b\\
%         \iff&& \eta(ab) &= (-1)^{p(a) p(b)} \eta(a) \eta(b) \beta(b,a)
%         \\
%         \iff&& (-1)^{p(a) p(b)} \beta(b, a) &=  \eta(ab) \eta(a)\inv \eta(b)\inv.
%     \end{alignat*}
%     The right-hand side of this last equation does not change if $a$ and $b$ are switched, hence $\beta(b,a) = \beta(a,b)$. 
    
%     Since $\beta$ is alternating, $\beta(b, a) = \beta (a, b)\inv$, therefore $\beta(a,b)^2 = 1$, which proves one direction of the ``moreover'' part.
%     %from where we conclude that $\beta(a,b) = \pm 1$. 
%     The converse follows from the fact that the isomorphism class of $\D\sop$ is determined by $(T, \beta\inv)$, so if $\beta$ takes only values in $\{ \pm 1 \}$, there must be an isomorphism from $\D$ to $\D\sop$, which can be seen as a super-anti-isomorphism on $\D$.
% \end{proof}

% With this we can translate our task to the level of abelian groups. 
% Instead of considering the graded superalgebra with super-anti-automorphism $(\D, \vphi_0)$, we can focus, instead, on the data $(T, \beta, p, \eta)$, where $T$ is a finite abelian group, $\beta$ is an alternating bicharacter on $T$, $p\from T \to \ZZ_2$ is a group homomorphism and $\eta\from T \to \FF^\times$ satisfies Equation \eqref{eq:superpolarization}. 
% Also, the condition of $\vphi_0$ being a superinvolution clearly corresponds to $\eta(t) \in \{ \pm 1 \}$ for all $t\in T$.

\section{Division gradings on superinvolution-simple superalgebras}
% -----------------------------------------

Throughout this section, we will assume that $\FF$ is an algebraically closed field with $\Char \FF \neq 2$, and we will fix a primitive fourth root of unity $i \in \FF$.
%In this case, because of Theorem \ref{thm:vphi-involution-iff-delta-pm-1}, we are primarily interested in the case the graded division superalgebra admits a superinvolution.

\begin{ex}
    If we consider the associative superalgebra $Q(1)$ graded by the trivial group $G = \{e\}$, it is a graded division superalgebra. 
    In this case $G^\# = \ZZ_2$ and, also, $T = \ZZ_2$. 
    Since $Q(1)$ is commutative, $\beta$ is identically $1$.
    By Corollary \ref{cor:Q-no-spuerinv-center}, $Q(1)$ does not admit a superinvolution, but the map $\eta\from \ZZ_2 \to \FF^\times$ given by $\eta (\bar 0) = 1$ and $\eta( \bar 1) = i$ defines a super-anti-automorphism on it. 
    Indeed, it is easy to check that $(-1)^{p(a) p(b)} =  \eta(ab) \eta(a)\inv \eta(b)\inv$.
\end{ex}

\begin{ex}\label{ex:FZ4-revisited}
    By Example \ref{ex:FZ2xFZ2sop-iso-FZ4}, we have a $\ZZ_4$-grading on $Q(1)\times Q(1)\sop$, which is clearly a division grading. 
    The exchange superinvolution preserves degree and is determined by $\eta (\bar 0) = 1$, $\eta (\bar 1) = 1$, $\eta (\bar 2) = -1$ and $\eta (\bar 3) = -1$.
\end{ex}

\begin{lemma}\label{lemma:beta-nondeg-elem-2-grp}
    If $\beta$ takes values in $\{ \pm 1 \}$ and is nondegenerate, then $T$ is an elementary $2$-group.
\end{lemma}

\begin{proof}
    Since $\beta$ nondegenerate, the map $T \to \widehat T$ given by $t \mapsto \beta(t, \cdot)$ is a group isomorphism.
    In particular, if $t\in T$ has order $n$, then $\beta(t, \cdot)\in \widehat T$ also has order $n$.
    But, by Proposition \ref{prop:superpolarization}, $\beta$ only takes values in $\{ \pm 1\}$, so  $\beta(t, \cdot )^2 =1$ and, hence, $ n \leq 2$.
\end{proof}

Combining Proposition \ref{prop:odd-cant-have-order-2} and Lemma \ref{lemma:beta-nondeg-elem-2-grp}, we get:

\begin{cor}\label{cor:no-odd-M-vphi}
    If $\D$ is simple as an algebra and admits a superinvolution, then $\D = \D\even$. \qed
\end{cor}

% As we will see in Chapter ??, this implies that all gradings on the Lie superalgebras in the series $B$, $C$, $D$ and $P$ are even.

Corollaries \ref{cor:D-has-the-same-type} and \ref{cor:no-odd-M-vphi} show that the presence of a superinvolution gives a strong restriction on the grading on $M(m,n)$: the grading must be even and its support an elementary $2$-group. 
Nevertheless, we will now show that we do have odd gradings on $M(n,n)\times M(n,n)\sop$ (Example \ref{ex:superalgebra-O}). 
To this end, we will use the concept of group extension.
% In our construction we are going to use the following concept:

\begin{defi}
    Let $H, K$ be groups. 
    A \emph{group extension of $H$ by $K$} is a group $E$ together with homomorphisms $\iota\from K \to E$ and $\pi\from E \to H$ such that 
    %
    \begin{equation}\label{eq:short-exact-sequence}
        0 \rightarrow K \xrightarrow{\iota} E \xrightarrow{\pi} H \rightarrow 0
    \end{equation}
    %
    is a short exact sequence, \ie,
    $\iota$ is injective, $\pi$ is surjective and $\operatorname{im} \iota = \ker \pi$ (and, hence, $H \iso \frac{E}{\iota(K)}$). 
    % For brevity, we may refer to the short exact sequence \eqref{eq:short-exact-sequence} as the extension. 
    An \emph{equivalence} between two extensions $K \xrightarrow{\iota} E \xrightarrow{\pi} H$ and $K \xrightarrow{\iota'} E' \xrightarrow{\pi'} H$ is a homomorphism $\alpha\from E \to E'$ such that the diagram
%     \begin{center}
% 		\begin{tikzcd}
% 			&& |[alias=E]|E \arrow[to=E', "\alpha"] \arrow[to = H, "\pi"]&&\\
% 			K \arrow[to=E, "\iota"] \arrow[to=E', "\iota'"]&&&& |[alias=H]|H\\
% 			&&|[alias=E']|E' \arrow[to=H, "\pi'"]&&
% 		\end{tikzcd}
% 	\end{center}
%%%%%%%%%%
	\begin{center}
		\begin{tikzcd}
			&& |[alias=E]|E \arrow[to=E', "\alpha"] \arrow[to = H, "\pi"]&&\\
% 			0 \arrow[to=K]
			& |[alias=K]|K \arrow[to=E, "\iota"] \arrow[to=E', "\iota'"]&& |[alias=H]|H & \\ %\arrow[to=0] & |[alias=0]|0\\
			&&|[alias=E']|E' \arrow[to=H, "\pi'"]&&
		\end{tikzcd}
	\end{center}
	commutes. 
	It is easy to see that $\alpha$ is necessarily an isomorphism. 
	An equivalence from an extension to itself will be refered as a \emph{self-equivalence}.
\end{defi}

\begin{ex}\label{ex:main-extension}
    Consider $E \coloneqq \big(\pmone \times T^+\big) \cup \big(\{\pm i\} \times T^-\big)$ as a subgroup of $\{ \pm 1, \pm i \} \times T$, and let $\iota\from \pmone \to E$ and $\pi\from E \to T$ be the homomorphisms given by $\iota(\delta) = (\delta, e)$ and $\pi (\delta, t) = t$ for all $\delta \in \pmone$ and $t\in T$. 
    Then $\pmone \xrightarrow{\iota} E \xrightarrow{\pi} T$ is an extension of $T$ by $\pmone$.
\end{ex}

Group extensions are usually studied in the context of group cohomology (see, for example, ?? and ??).  
We will need only some basic concepts and elementary results reviewed below. 

Let us fix the abelian groups $H$ and $K$ for the remainder of the section.

\begin{defi}
    A map $\sigma\from H\times H \to K$ is said to be a \emph{$2$-cocycle} if, for all $a,b,c \in H$, we have $\sigma(a,b) \sigma(ab, c) = \sigma(a, bc) \sigma(b,c)$. 
    If, further, we have that $\sigma(a,b) = \sigma(b,a)$, we say that $\sigma$ is \emph{symmetric}, and if we have $\sigma(a, e) = \sigma(e, a) = e$, we say that $\sigma$ is \emph{normalized}. 
    In the case $\sigma(h_1, h_2) = e$ for all $h_1, h_2 \in H$, we say that $\sigma$ is \emph{trivial}.
\end{defi}

% In this work, we are only going to deal with normalized symmetric $2$-cocycles, so we may refer to them simply as \emph{cocycles}.  
It is easy to check that every symmetric bicharacter is a normalized symmetric $2$-cocycle, and those are the only ones that we will need in this work. 

Given a normalized symmetric $2$-cocycle $\sigma$, we define the abelian group $K \times_\sigma H$ to be the set $K\times H$ with product $*_\sigma$ given by:
\[
    (k_1, h_1)*_\sigma(k_2, h_2) = (\sigma(h_1, h_2) k_1 k_2, h_1 h_2),
\]
for all $k_1, k_2 \in K$ and $h_1, h_2 \in H$. 
The condition of $\sigma$ being a symmetric $2$-cocycle is precisely what is needed for the associativity and commutativity of $*_\sigma$. 
The identity element is $(e, e)$ and the inverse is given by $(k, h)\inv = (k\inv \sigma(h,h\inv)\inv, h\inv)$. 
Note that the usual product on $K\times H$ is recovered as the particular case when $\sigma$ is trivial.

\begin{defi}
    % Let $\sigma\from H\times H \to K$ be a $2$-cocycle. 
    % The group $K \times_\sigma H$ is the set $K \times H$ endowed with the product $*_\sigma$ defined by
    % \[
    %     (k_1, h_1)*_\sigma(k_2, h_2) = (\sigma(h_1, h_2) k_1 k_2, h_1 h_2),
    % \]
    % for all $k_1, k_2 \in K$ and $h_1, h_2 \in H$. 
    The \emph{(abelian) group extension corresponding to $K \times_\sigma H$} is the group $K \times_\sigma H$ together the group homomorphisms $\iota \from K \to K \times_\sigma H$ and $\pi \from K \times_\sigma H \to H$ defined by $\iota (k) = (k , e)$ and $\pi (k, h) = h$, for all $k\in K$ and $h\in H$. 
    If $\sigma$ is trivial, we say that the extension is \emph{trivial}.
\end{defi}

% Note that the maps $\iota$ and $\pi$ are independent of the cocycle $\sigma$.


\begin{prop}\label{prop:all-ext-are-cocycle}
    Every abelian group extension $K \xrightarrow{\iota} E \xrightarrow{\pi} H$ is equivalent to the abelian group extension corresponding to $K\times_\sigma H$ for some normalized symmetric cocycle $\sigma\from H \to K$.
\end{prop}

\begin{proof}
    Fix $\tau\from H \to E$ a (set theoretical) map such that $\pi\tau = id_H$ and $\tau(e) = e$. 
    For every $x \in E$, we have that $x (\tau(\pi(x)))\inv$ is in $\ker \pi$ and, hence, it equal to $\iota(k)$ for a unique $k_x\in K$. 
    It follows that $x = \iota(k_x) \tau(\pi(x))$. 
    Define $f\from E \to K\times H$ by $f(x) = (k_x, \tau(\pi(x)) )$. 
    Clearly, $f$ is bijective, so we can make it an isomorphism by using it to define a product on $K\times H$. 
    It is easy to check that this product is the one on $K \times_\sigma H$ where $\sigma\from H\times H \to K$ is given by $\sigma(h_1, h_2) = \tau(h_1) \tau(h_2) \tau(h_1 h_2)\inv$ and $f$ is the desired equivalence.
\end{proof}

We will need to know when two extensions determined by different normalized symmetric $2$-cocycles are equivalent.

\begin{defi}
    Let $f\from H \to K$ be a map. 
    We define $\sigma  = \mathrm{d} f\from H\times H \to K$ to be map given by $\mathrm{d} f\, (a,b) = f(ab)f(a)\inv f(b)\inv$ for all $a,b \in H$. 
    We say that $\mathrm{d} f$ is a \emph{$2$-coboundary}.
\end{defi}

Note that every $2$-coboundary is a $2$-cocycle. 
The following is a well known result, but we include a proof here for completeness.

% \begin{defi}
%     Let $H, K$ be abelian groups and let $\sigma\from H\times H \to K$ be a $2$-cocycle. 
%     The group $K \times_\sigma H$ is the set $K \times H$ endowed with the product $*_\sigma$ defined by
%     \[
%         (k_1, h_1)*_\sigma(k_2, h_2) = (\sigma(h_1, h_2) k_1 k_2, h_1 h_2),
%     \]
%     for all $k_1, k_2 \in K$ and $h_1, h_2 \in H$. 
%     The \emph{group extension determined by $\sigma$} is the group $K \times_\sigma H$ together the group homomorphisms $\iota_\sigma \from K \to K \times_\sigma H$ and $\pi_\sigma \from K \times_\sigma H \to H$ defined by $\iota(k) = (k \sigma(e,e)\inv, e)$ and $\pi(k, h) = h$, for all $k\in K$ and $h\in H$.
% \end{defi}

% \begin{remark}
%     In general, a \emph{group extension of $T$ by $H$} is a group $E$ together with group homomorphisms $\iota\from H \to E$ and $\pi\from E \to T$ such that $\iota$ is injective, $\pi$ is surjective and $\iota(H) = \ker \pi$. 
%     For our needs, though, only the map $\pi$ will be needed.
% \end{remark}

\begin{prop}\label{prop:coboundary}
    Let $\sigma, \sigma' \from H\times H \to K$ be normalized symmetric $2$-cocycles. 
    A map $\alpha\from K \times_{\sigma} H \to K \times_{\sigma'} H$ is an equivalence between the correponding group extensions %determined by $\sigma$ and $\sigma'$ 
    if, and only if, there is a map $f\from H \to K$ such that $\alpha(k,h) = (f(h) k, h)$, for all $k\in K$ and $h\in H$, and $\sigma' \sigma\inv = \mathrm{d} f$.
    % If $\sigma' \sigma\inv$ is a $2$-coboundary, then there is an isomorphism $\alpha\from K \times_{\sigma} H \to K \times_{\sigma'} H$ such that $\pi_{\sigma'} \alpha = \pi_\sigma$.
\end{prop}

\begin{proof}
    The result follows from the following claims:
    \newclaims
    \begin{claim}
        Suppose $\alpha$ is an isomorphism. 
        Then $\alpha$ is an equivalence if, and only if, there is a map $f\from H \to K$ such that $\alpha(k,h) = (f(h)k, h)$, for all $k\in K$ and $h\in H$.
    \end{claim}
    
    Suppose $\alpha(k,h) = (f(h)k, h)$. 
    First, it is clear that $\pi \alpha = \pi$.
    Also, since $\alpha(e,e) = (e,e)$, it follows that $f(e) = e$ and, hence, $\alpha \iota = \iota$. 
    
    Now suppose $\alpha$ is an equivalence. 
    Since for all $h\in H$ $(\pi \alpha) (e, h) = \pi (e, h) = h$, we have that $\alpha (e, h) = (f(h), h)$ for some map $f\from H\to K$. 
    Also, since for all $k\in K$ $(\alpha \iota) (k) = \iota(k)$, we have that $\alpha(k, e) = (k,e)$. 
    It follows that $\alpha (k,h) = \alpha((k,e) *_\sigma (e, h)) = \alpha(k, e) *_{\sigma'} (e, h) = (f(h)k, h)$. 
    
    \begin{claim}
        Suppose there is a map $f\from H \to K$ such that $\alpha(k,h) = (f(h)k, h)$, for all $k\in K$ and $h\in H$. 
        Then $\alpha$ is an isomorphism if, and only if, $\sigma'\sigma\inv = \mathrm{d}f$.
    \end{claim}
 
    First, it is easy to check that the map $K \times_{\sigma'} H \to K \times_{\sigma} H$ given by $(k,h)\mapsto (f(h)\inv k, h)$ is the inverse of $\alpha$, so $\alpha$ is bijective.
    
    If $h_1, h_2 \in H$ and $t_1, t_2 \in T$, then, on the one hand,
    \begin{align*}
        \alpha ((h_1, t_1)*_{\sigma}(h_2, t_2) ) &= \alpha (\sigma(t_1, t_2) h_1 h_2, t_1 t_2) = 
        ( f(t_1 t_2)\sigma(t_1, t_2) h_1 h_2, t_1 t_2)
    \end{align*}
    and, on the other hand,
    \begin{align*}
        \alpha ((h_1, t_1)) *_{\sigma'} \alpha ((h_2, t_2) ) &= ( f(t_1) h_1, t_1) *_{\sigma'} ( f(t_2) h_2, t_2) \\&= 
        (\sigma'(t_1, t_2) f(t_1) f(t_2) h_1 h_2, t_1 t_2).
    \end{align*}
    Comparing both, we conclude that $\alpha$ is an homomorphism if, and only if, $\mathrm{d}f = \sigma' \sigma\inv$.
\end{proof}

\begin{cor}\label{cor:self-equivalences-are-homomorphisms}
    The set of self-equivalences of an abelian group extension $K \xrightarrow{\iota} E \xrightarrow{\pi} H$ is in bijection with the set of homomorphisms from $H$ to $K$.
\end{cor}

\begin{proof}
    By Proposition \ref{prop:all-ext-are-cocycle}, we can assume our extension is the one corresponding to $K \times_\sigma H$, for some normalized symmetric $2$-cocycle $\sigma$. 
    The result follows from Proposition \ref{prop:coboundary} and the observation that $\mathrm{d}f = 0$ if, and only if, $f$ is a homomorphism. 
\end{proof}

We note that the Equation \eqref{eq:superpolarization} can be rewritten as $\tilde\beta = \mathrm{d}\eta$, where $\tilde\beta\from T\times T \to \FF^\times$ is the bicharacter given by
\begin{equation}\label{eq:def-beta-tilde}
    \forall a,b\in T,\quad \tilde\beta(a,b) \coloneqq (-1)^{p(a)p(b)}\beta(a,b).
\end{equation}
This gives us a connection between super-anti-automorphisms and equivalences of group extensions. 
The super-anti-automorphisms we will need are not, in general, superinvolutions. 
Instead, we will need super-anti-automorphisms that correspond to quadratic forms.

\begin{defi}
    Let $\mu\from T \to \FF^\times$ be a map. 
    We say that $\mu$ is a \emph{(multiplicative) quadratic form} on $T$ if $\mu(t\inv) = \mu (t)$ for all $t\in T$ and the map $\mathrm{d}\mu\from T\times T \to \FF^\times$ defined by
    $(a,b) \mapsto \mu(ab) \mu(a)\inv \mu(b)\inv$
    is a bicharacter, which is referred to as the \emph{polarization} of $\mu$.
\end{defi}

\begin{remark}
    In the literature, the additive notation is usually used in the context of quadratic forms. 
    In general, for a given commutative ring $\mathbb K$ and $\mathbb K$-modules $A$ and $B$, a \emph{quadratic map} $q\from A \to B$ is a map satisfying that $q(kx) = k^2 x$, for all $k\in \mathbb K$ and $x \in A$, and that the map $A \times A \to B$ defined by $(x,y) \mapsto q(x+y) - q(x) - q(y)$ is bilinear. 
    In the case of abelian groups (\ie, $\mathbb K = \ZZ$), the first condition is equivalent to $q(-x) = q(x)$, justifying our nomenclature.
    % notion of \emph{quadratic map} is usually discussed with additive notation In the presence of the bicharacter condition, the condition $\mu(t\inv) = \mu(t)$ is equivalent to $\mu(t^n) = \mu(t)^{n^2}$ for all $t\in T$, which justifies the nomenclature.
\end{remark}

\begin{ex}\label{ex:quadratic-form-polarization-parity}
    Let $\mu_0\from T \to \FF^\times$ be given by $\mu_0(t) = 1$ for all $t\in T^+$ and $\mu_0(t) = i$ for all $t\in T^-$. 
    It is clear that $\mu_0(t\inv) = \mu_0(t)$. 
    Also, we have that $\mu_0(ab) \mu_0(a)\inv \mu_0(b)\inv = (-1)^{p(a)p(b)}$, which is a bicharacter. 
    This quadratic form determines an anti-isomorphism $\D \to \D\sop$, $X_t\mapsto \mu_0(t)\overline{X_t}$, which shows that $\D\sop$ is isomorphic to $\D^{\mathrm{op}}$.
\end{ex}

% If $\eta$ determines a super-anti-isomorphism of $\D$, it is not necessarily a quadratic form. 
% Equation \eqref{eq:superpolarization} tell us that the bicharater condition will be satisfied for the bicharacter $\tilde\beta$ defined by $\tilde \beta (a, b) \coloneqq (-1)^{p(a) p(b)} \beta(a, b)$, but the other condition may fail. 

It will be helpful to consider not only super-anti-automorphisms but also antiautomorphisms on $\D$ (considered as an algebra).

\begin{prop}\label{prop:quadratic-form-involutions}
    Let $\mu\from T \to \FF^\times$ be a map and let $\psi\from \D \to \D$ be the linear map defined by 
    $\psi(X_t) = \mu(t) X_t$ for every $t\in T$ and $X_t \in \D_t$. 
    Then: 
    \begin{enumerate}[(i)]
        \item If $\mathrm{d}\mu = \tilde\beta$ (defined by Equation \eqref{eq:def-beta-tilde}), then: \\
        $\mu$ is a quadratic form $\iff$ $\mu(t)\in \{ \pm 1 \}$ for all $t \in T^+$ and $\mu(t)\in \{ \pm i \}$ for all $t \in T^-$ $\iff$ $\psi$ is a super-anti-automorphism such that $\psi^2$ is the parity automorphism on $\D$; \label{item:super-anti-auto-quadratic}
        \item If $\mathrm{d}\mu = \beta$, then:\\
        $\mu$ is a quadratic form $\iff$ $\mu(t) \in \{\pm 1\}$ for all $t\in T$ $\iff$ $\psi$ is
        an involution on $\D$. \label{item:anti-auto-quadratic}
    \end{enumerate}
\end{prop}

\begin{proof}
    From Equation \eqref{eq:superpolarization}, we have $\tilde\beta (t, t\inv) = \mu (tt\inv) \mu(t)\inv \mu(t\inv)\inv$, which simplifies to $(-1)^{p(t)} = \mu(t)\mu(t\inv)$. 
    Therefore $\mu(t\inv) = \mu(t)$ if, and only if, $\mu(t)^2 = (-1)^{p(t)}$, proving \eqref{item:super-anti-auto-quadratic}.

    Item \eqref{item:anti-auto-quadratic} follows from \eqref{item:super-anti-auto-quadratic} once we consider $\D$ as an algebra, \ie, if we consider $p$ to be the trivial homomorphism.
    % First note that, as a particular case of Proposition \ref{prop:superpolarization}, $\psi$ is an antiautomorphism if, and only, if 
    % %
    % \begin{equation}\label{eq:polarization}
    %     \forall a,b\in T, \quad \beta(a,b) = \mu(ab) \mu(a)\inv \mu(b)\inv.
    % \end{equation}
    % %
    % Then $1 = \beta(t, t\inv) = \mu (tt\inv) \mu(t)\inv \mu(t\inv)\inv$, hence $\mu(t\inv) = \mu(t)\inv$. 
    % Therefore we have that $\mu(t\inv) = \mu(t)$ if, and only if, $\mu(t)^2 = 1$, proving (i).
\end{proof}




% even though Equation \eqref{eq:superpolarization}
% Let $\tilde\beta\from T\times T \to \FF^\times$ be the bicharacter given by $\tilde \beta (a, b) \coloneqq (-1)^{p(a) p(b)} \beta(a, b)$. 
% Despite of Equation \eqref{eq:superpolarization} being the special case of Equation \ref{eq:quadratic-form} for $\xi = \tilde\beta$ and $\mu = \eta$, not every super-anti-automorphism on $\D$ corresponds to a quadratic form. 
% But the ones that do correspond to quadratic forms are of special interest. 

% It will be helpful to regard $\D$ as regular algebra and look to antiautomorphisms on it. 
% It is worth recalling that super-anti-automorphisms are in bijection with antiautomorphisms (see ??). 
% Note that, as a particular case of Proposition \ref{prop:superpolarization}, a map  $\psi\from \D \to \D$ defined by $\psi(X_t) = \mu(t) X_t$, %for all $t\in T$ and $X_t \in \D_t$.
% where $\mu\from T \to \FF^\times$ is an antiautomorphism if, and only, if 
% %
% \begin{equation}\label{eq:polarization}
%     \forall a,b\in T, \quad \beta(a,b) = \mu(ab) \mu(a)\inv \mu(b)\inv.
% \end{equation}

% \begin{prop}
%     Let $\mu\from T \to \FF^\times$ be a map and let $\psi\from \D \to \D$ be the linear map defined by 
%     $\psi(X_t) = \mu(t) X_t$ for every $t\in T$ and $X_t \in \D_t$. 
%     Then: 
%     \begin{enumerate}[(i)]
%         \item $\mu$ is a quadratic form with polarization $\beta$ $\iff$ $\mu(t) \in \{\pm 1\}$ for all $t\in T$ $\iff$ $\psi$ is
%         an involution (in the usual, nonsuper, sense);
%         \item $\mu$ is a quadratic form with polarization $\tilde\beta$ $\iff$ $\mu(t)\in \{ \pm 1 \}$ for all $t \in T^+$ and $\mu(t)\in \{ \pm i \}$ for all $t \in T^-$ $\iff$ $\psi$ is a super-anti-automorphism such that $\psi^2$ is the parity automorphism on $\D$.
%     \end{enumerate}
% \end{prop}
% It should be noted that 

\begin{prop}\label{prop:existence-involution}
    If $\beta$ takes values in $\{ \pm 1 \}$, then there are quadratic forms on $T$ whose polarizations are $\beta$ and $\tilde \beta$.
\end{prop}

\begin{proof}
    To show there is a quadratic form whose polarization is $\beta$, 
    consider the group $\barr T \coloneqq \frac{T}{\rad \beta}$ and let $t \mapsto \bar t$ be the natural projection on the quotient. 
    Also, we denote by $\barr \beta\from \barr T \times \barr T \to \FF^\times$ the bicharacter induced by $\beta$. 
    
    Since $\barr \beta$ is nondegenerate and takes values $\pm 1$, by Lemma \ref{lemma:beta-nondeg-elem-2-grp}, $\barr T$ is an elementary $2$-group. 
    Using again that $\barr \beta$ takes values $\pm 1$, there is an antiautomorphism $\psi$ on the graded division algebra associated to the pair $(\barr T, \barr \beta)$. 
    Let $\bar \mu\from T \to \FF^\times$ be the map determining $\psi$. 
    We then have $\bar\beta(\bar a, \bar b) = \bar\mu(\bar a \bar b) \bar\mu(\bar a)\inv \bar\mu(\bar b)\inv$ for all $a, b \in T$.
    Using that $\barr \beta$ is alternating and taking $\bar t = \bar a = \bar b$, we get $\bar \mu (\bar t)^2 = \bar \mu( \bar t^2) = \bar \mu ( \bar e) = 1$, for all $t\in T$. 
    Define $\mu\from T\to \FF^\times$ by $\mu (t) = \barr \mu (\bar t)$ for all $t\in T$. 
    Then $\mu$ takes values in $\{ \pm 1 \}$ and $\beta = \mathrm{d} \mu$, hence $\mu$ is a quadratic form with polarization $\beta$ by Proposition \ref{prop:quadratic-form-involutions}.
    
    To get a quadratic form with polarization $\tilde \beta$, simply multiply $\mu$ by the quadratic form $\mu_0$ of Example \ref{ex:quadratic-form-polarization-parity}.
\end{proof}

%
% In other words, $\mu$ is a quadratic form defined on $T$ with values in $\FF$ and its polarization is the bicharacter $\beta$. 
% If $\beta$ takes values $\pm 1$, we cannot guarantee that $\D$ admits a superinvolution, as seen in the case $Q(1) \iso \FF\ZZ_2$, but it always admits an involution:


% ??

% \begin{prop}
%     If $\mu$ is a quadratic form on $T$, then $\mu(t^n) = \mu(t)^{n^2}$ for all $t\in T$.
% \end{prop}

% It is important to note that even though Equation \eqref{eq:quadratic-form} reduces to Equation \eqref{eq:superpolarization} for $\mu = \eta$ and $\xi(a, b) = (-1)^{p(a)p(b)} \beta(a,b)$, it is not true, in general, that $\eta(t\inv) = \eta(t)$. 
% Actually, in the case $\eta$ determines a superinvolution, we have that $\eta (t\inv) = (-1)^{p(t)} \eta(t)$, so it is not a quadratic form if $\D\odd \neq 0$. 

% \begin{prop}
%     Let $\mu$ be a quadratic form on $T$ and let $\xi$ be its polarization.
%     \begin{enumerate}[(i)]
%         \item If $\xi(a,b) = \beta(a,b)$ for all $a,b\in T$, then $\mu$ determines an involution 
%     \end{enumerate}
% \end{prop}

% Sometimes it is useful to consider the superalgebra $\D$ as a regular algebra and look to antiautomorphisms on it. 
% It is worth recalling that super-anti-automorphisms are in bijection with antiautomorphisms (see ??). 
% Note that, as a particular case of Proposition \ref{prop:superpolarization}, a map  $\psi\from \D \to \D$ defined by $\psi(X_t) = \mu(t) X_t$, %for all $t\in T$ and $X_t \in \D_t$.
% where $\mu\from T \to \FF^\times$ is an antiautomorphism if and only if 
% %
% \begin{equation}\label{eq:polarization}
%     \forall a,b\in T, \quad \beta(a,b) = \mu(ab) \mu(a)\inv \mu(b)\inv.
% \end{equation}
%
% In other words, $\mu$ is a quadratic form defined on $T$ with values in $\FF$ and its polarization is the bicharacter $\beta$. 
% If $\beta$ takes values $\pm 1$, we cannot guarantee that $\D$ admits a superinvolution, as seen in the case $Q(1) \iso \FF\ZZ_2$, but it always admits an involution:
% , as we will see in Proposition \ref{prop:D-has-involution}. %, in the usual sense. 
% Let $\mu\from T \to \FF^\times$ be any map and consider $\psi\from \D \to \D$ defined by $\psi(X_t) = \mu(t) X_t$ for all $t\in T$ and $X_t \in \D_t$. 
% By Proposition \ref{prop:superpolarization}, considering $p$ being always zero, we get that $\psi$ is an antiautomorphism if, and only if,
% %
% \begin{equation}\label{eq:polarization}
%     \forall a,b\in T, \quad \beta(a,b) = \mu(ab) \mu(a)\inv \mu(b)\inv.
% \end{equation}

% will be useful for us to consider involutions on $\D$, in the usual sense (see Prop ??). 


% \begin{prop}\label{prop:D-has-involution}
%     If $\beta$ takes values in $\{ \pm 1 \}$, then $\D$ admits an involution.
% \end{prop}

% \begin{proof}
%     Consider the group $\barr T \coloneqq \frac{T}{\rad \beta}$ and let $\barr \beta\from \barr T \times \barr T \to \FF^\times$ be the bicharacter induced by $\beta$. 
%     Since $\barr \beta$ is nondegenerate and takes values $\pm 1$, by Lemma \ref{lemma:beta-nondeg-elem-2-grp}, $\barr T$ is an elementary $2$-group. 
%     Using again that $\barr \beta$ takes values $\pm 1$, there is an antiautomorphism on the graded division algebra associated to the pair $(\barr T, \barr \beta)$. 
%     Let $\bar \mu$ be the quadratic form associated to it. 
%     Putting $t = a = b$ on Equation \eqref{eq:polarization} and using that $\barr \beta$ is alternating, we get $\bar \mu (t)^2 = \bar \mu(t^2) = \bar \mu (e) = 1$, for all $t\in \barr T$. 
    
%     Take $q\from T \to \barr T$ to be quotient projection and define $\mu\from T\to \FF^\times$ by $\mu (t) = \barr \mu (q(t))$ for all $t\in T$. 
%     Then $\beta(a, b) = \barr \beta (q(a), q(b)) = \barr \mu(q(a)q(b)) \barr \mu(q(a))\inv \barr \mu(q(b))\inv = \mu(ab) \mu(a)\inv \mu(b)\inv$, so $\mu$ determines an antiautomorphism on $\D$. 
%     Since $\mu$ takes values in $\{ \pm 1 \}$, it determines an involution on $\D$.
% \end{proof}

% \begin{cor}
%     If $\D$ is even, then it admits a superinvolution. 
%     If $\D$ is odd, then it admits a super-anti-automorphism of order $4$.
% \end{cor}

% \begin{proof}
%     Given an involution $\psi\from \D \to \D$, we can define $\vphi\from \D \to \D$ by $\vphi(d) = \psi(d)$ if $\D$ is even and $\vphi(d) = i\psi (d)$ if $d$ is odd. 
%     It is easy to see that $\vphi$ is a super-anti-automorphism (compare with ??) and that it has the desired order.
% \end{proof}
 
% We will now explore Equations \eqref{eq:superpolarization} and \eqref{eq:polarization} under a different perspective. 
% Note that, in both cases, what we have in the right hand side is a bicharacter on $T$. 



% As a consequence of Proposition \ref{prop:D-has-involution}, if $\D$ is odd, we always have that $\D$ admits a super-anti-automorphism of order $4$. 
% But it is harder to get superinvolutions: 
% Now let us go back to discuss superinvolutions:


% If we put $a = b = t$ in Equation \eqref{eq:superpolarization}, since $\beta (t, t) = 1$, we get
% %
% \begin{equation}%\label{eq:eta-t-square}
%     \forall t\in T, \quad \eta (t)^2 = (-1)^{|t|} \eta(t^2).
% \end{equation}
%
% As we are going to see, this implies that we cannot have superinvolutions on a finite dimensional graded division superalgebra that is odd and simple as superalgebra.%  allow us to have In particular, if we want $\vphi_0$ to be a superinvolution, we need $\eta (t^2) = (-1)^{|t|}$, for every $t\in T$.

% \begin{lemma}
%     Suppose $T = \supp \D$ is an elementary $2$-group and let $\vphi_0\from \D \to \D$ be a super-anti-automorphism. 
%     If $\D$ is even, then $\vphi_0$ is a superinvolution, but
%     if $\D$ is odd, $\vphi_0$ has order $4$.
% \end{lemma}

% \begin{proof}
%     First of all, note that $\eta (e) = 1$. 
%     Let $t\in T$.  
%     If $t$ is even, Equation \eqref{eq:eta-t-square} implies $\eta(t)^2 = \eta (t^2) = \eta(e) = 1$, so  $\eta(t) \in \{ \pm 1 \}$. 
%     If $\D\odd = 0$, this means $\vphi_0^2 = \id$. 
%     Now, if $t$ is odd, Equation \eqref{eq:eta-t-square} implies $\eta(t)^2 = -\eta (t^2) 1 = -1$, hence $\eta(t) \in \{ \pm \sqrt{-1} \}$. 
%     Therefore, if $\D\odd \neq 0$, $\vphi_0$ has order $4$.
% \end{proof}
% Sometimes it will be useful to consider the superalgebra $\D$ as a regular algebra and look to the involutions on it. 
% Clearly, Proposition \ref{prop:superpolarization} can also be applied to this case.

% Nevertheless, Proposition ?? below tell us the case where we have a super-anti-automorphisms that is not a superinvolution is still of interest to us.
% , like the supertranspose. 
% The same is true for 

We are now in position to apply these concepts and results to our original problem. 
% Given a graded division superalgebra $\D$ associated to $(T, \beta)$, we want to refine the grading on $\D \times \D\sop$ to a division grading such that the exchange superinvolution preserves degrees. 
% In the construction we will show, the support of the new grading will be the group $\widetilde T \coloneqq \{ \pm 1 \} \times_\sigma T$, where $\sigma\from T\times T \to \{\pm 1\}$ is the bicharacter given by $\sigma(a,b) = (-1)^{p(a)p(b)}$ for all $a,b \in T$. 
% We will denote by $\pi\from \widetilde T \to T$ the projection on the second factor.

\begin{lemma}\label{lemma:tildeT-finally}
    Suppose $\beta$ takes values in $\pmone$ and let $\sigma\from T\times T \to \pmone$ be the $2$-cocycle given by $\sigma(a,b) \coloneqq (-1)^{p(a)p(b)}$. 
    The group extensions corresponding to $\pmone \times_{\tilde\beta} T$ and $\pmone \times_\sigma T$ are both equivalent to the extension of Example 
    \ref{ex:main-extension}. 
    % Further, $\pmone \times_\sigma T$ is isomorphic to the subgroup of $\{\pm 1, \pm i\} \times T$ given by $\big(\pmone \times T^+\big) \cup \big(\{\pm i\} \times T^-\big)$.
\end{lemma}

\begin{proof}
    By Proposition \ref{prop:existence-involution}, there is a map $\mu\from T \to \{\pm 1\}$ such that $\beta = \mathrm{d}\mu$, hence, using Proposition \ref{prop:coboundary}, the group extensions corresponding to $\pmone \times_{\tilde\beta} T$ and $\pmone \times_\sigma T$ are equivalent. 
    
    We can consider the $2$-cocycle $\sigma$ as admitting values in $\{\pm 1, \pm i\}$. 
    We then have $\pmone \times_\sigma T \subseteq \{\pm 1, \pm i\} \times_\sigma T$. 
    But then we can use the quadratic form $\mu_0$ from Example \ref{ex:quadratic-form-polarization-parity} to conclude that, since $\sigma = \mathrm{d} \mu_0$, the extension $\{\pm 1, \pm i\} \to \{\pm 1, \pm i\} \times_\sigma T \to T$ is equivalent to the trivial extension $\{\pm 1, \pm i\} \to \{\pm 1, \pm i\} \times T \to T$ via the isomorphism $\alpha\from \{\pm 1, \pm i\} \times_\sigma T \to \{\pm 1, \pm i\} \times T$ given by $\alpha(\lambda, t) = (\mu_0(t) \lambda, t)$. 
    Following this isomorphism, we see that the image of $\pmone \times_\sigma T$ is precisely the group extension of Example \ref{ex:main-extension} and we get an equivalence if we restrict $\alpha$ accordingly.
\end{proof}

% The next result show us Our strategy consists in start with a graded division superalgebra $\D$ with $\beta$ taking values in $\{ \pm 1 \}$. 
% By Proposition \ref{prop:refinement-DxDsop} below, we can, then, refine the grading on $\D \times \D\sop$ to a division grading such that the exchange superinvolution preserves degree. 
% The refinement 





% If $\D$ is a graded division superalgebra with $\beta$ taking values in $\{ \pm 1 \}$, we can refine the 
% Then the grading on $\D \times \D\sop$ can be refined to a division grading such that the exchange superinvolution $\vphi$ preserves degree.

% \begin{prop}\label{prop:refinement-DxDsop}
%     Let $\D$ be a graded division superalgebra with support $T$ and $\beta$ taking values in $\{ \pm 1 \}$. 
%     Consider $\mc E \coloneqq \D \times \D\sop$ with its natural $T$-grading $\Gamma\colon \mc E = \bigoplus_{t\in T} \D_t \times \overline{\D_t}$ and let $\vphi$ be the exchange superinvolution on $\mc E$. 
%     Then there is a division grading $\widetilde \Gamma$ on $(\mc E, \vphi)$ by $\widetilde T$ such that $\Gamma = {}^\pi\widetilde \Gamma$, \ie, $\Gamma$ is the coarsening of $\widetilde \Gamma$ by $\pi$. 
%     Moreover, if $\Gamma'$ is another division grading on $(\mc E, \vphi)$ by an abelian group $T'$ such that $\Gamma = {}^{\pi'}\Gamma'$ for some homomorphism $\pi'\from T' \to T$, then there is a unique isomorphism $\alpha\from T \to  T'$ such that $\pi = \pi' \alpha$ and $\Gamma' = {}^\alpha \widetilde \Gamma$.
    
%     % , let $\mc E \coloneqq \D \times \D\sop$ and $\vphi$ be the exchange superinvolution on $\mc E$. 
%     % The grading on $\mc E$ can be refined to a division grading such that $\vphi$ preserves degrees if, and only if, $\beta$ takes values $\pm 1$. 
%     % % If $\beta$ takes values $\pm 1$, the grading on $\D \times \D\sop$ can be refined to a division grading such that the exchange superinvolution preserves degree. 
%     % % if, and only if, $\beta$ takes values $\pm 1$
%     % Every such refinement has support isomorphic to $\widetilde T \coloneqq \{ \pm 1 \}\times T$ with product
%     % % and suppose there is a super-anti-automorphism $\psi$ on $\D$ preserving degrees. 
%     % % Then the grading on $\D \times \D\sop$ can be refined to a division grading such that the exchange superinvolution $\vphi$ preserves degree.
% \end{prop}

% \begin{prop}\label{prop:refinement-DxDsop}
%     Let $\D$ be a graded division superalgebra associated to $(T, \beta, p)$.  
%     Consider $\mc E \coloneqq \D \times \D\sop$ with its natural $T$-grading $\Gamma\colon \mc E = \bigoplus_{t\in T} \D_t \times \overline{\D_t}$ and let $\vphi$ be the exchange superinvolution on $\mc E$. 
%     There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$. 
%     If $\widetilde \Gamma$ is a such grading and $\widetilde T$ is its support, then there are group homomorphisms $\tilde \pi\from \widetilde T \to T$ and $\alpha\from \widetilde T \to \{ \pm 1\} \times_\sigma T$, where $\sigma$ is the bicharater defined by $\sigma(a,b) = (-1)^{p(a)p(b)}$, such that $\Gamma = {}^{\tilde\pi}\widetilde \Gamma$ and $\pi_\sigma \alpha = \tilde \pi$.
% \end{prop}

% \begin{thm}\label{thm:refinement-DxDsop}
%     Let $\D$ be a graded division superalgebra associated to $(T, \beta, p)$.  
%     Consider $\mc E \coloneqq \D \times \D\sop$ with its natural $T$-grading $\Gamma\colon \mc E = \bigoplus_{t\in T} \D_t \times \overline{\D_t}$ and let $\vphi$ be the exchange superinvolution on $\mc E$. 
%     There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$. 
%     If this is the case, we have the following:
%     % and $\widetilde T$ is its support, then:
    
%     % Then:
%     \begin{enumerate}[(i)]
%         % \item There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$; \label{item:refinement-iff-pmone} 
        
%         \item %$\widetilde T$ fits into
%         If $\Delta$ is such a refinement, then there is a unique group extension $\{ \pm 1 \} \xrightarrow{\iota} E \xrightarrow{\pi} T$ such that $\supp \Delta = E$ and ${}^{\pi} \Delta = \Gamma$; \label{item:there-is-extension}
        
%         \item This group extension is equivalent to the one of Example \ref{ex:main-extension}; \label{item:equivalent-extension-example}
%         %determined by the $2$-cocycle $\sigma(a,b) \coloneqq (-1)^{p(a) p(b)}$, for all $a,b\in T$; 
        
%         \item The set of all refinements $\Delta$ such that $\supp \Delta = E$ and ${}^\pi \Delta = \Gamma$ is in bijection with the group homomorphisms from $T$ to $\{ \pm 1 \}$. \label{item:number-of-extensions}
%     \end{enumerate}
%     % There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$. 
%     % If $\widetilde \Gamma$ is a such grading and $\widetilde T$ is its support, then there is a unique group extension $0 \to \{ \pm 1 \} \xrightarrow{\iota} \widetilde T \xrightarrow{\pi} T \to 0$ such that ${}^\pi \widetilde \Gamma = \Gamma$, and this extension is equivalent to the one given by the $2$-cocycle $\sigma$ given by $\sigma(a,b) = (-1)^{p(a) p(b)}$. 
%     % Moreover, the set of all gradings corresponding to $0 \to \{ \pm 1 \} \xrightarrow{\iota} \widetilde T \xrightarrow{\pi} T \to 0$ is in bijection with its self-equivalences.
% \end{thm}

\begin{thm}\label{thm:refinement-DxDsop}
    Let $\D$ be a graded division superalgebra associated to $(T, \beta, p)$.  
    Consider $\mc E \coloneqq \D \times \D\sop$ with its natural $T$-grading $\Gamma\colon \mc E = \bigoplus_{t\in T} \D_t \times \overline{\D_t}$ and let $\vphi$ be the exchange superinvolution on $\mc E$. 
    There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$. 
    If this is the case, let $\Delta$ be such a refinement, associated to $(T_\Delta, \beta_\Delta, p_\Delta, \eta_\Delta)$. 
    Then: % we have the following:
    % and $\widetilde T$ is its support, then:
    %
    \begin{enumerate}[(i)]
        % \item There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$; \label{item:refinement-iff-pmone} 
        
        \item %$\widetilde T$ fits into
        $T_\Delta$ fits into a unique group extension $\{ \pm 1 \} \xrightarrow{\iota} T_\Delta \xrightarrow{\pi} T$ such that ${}^{\pi} \Delta = \Gamma$; \label{item:there-is-extension}
        
        \item This group extension is equivalent to the one of Example \ref{ex:main-extension}; \label{item:equivalent-extension-example}
        %determined by the $2$-cocycle $\sigma(a,b) \coloneqq (-1)^{p(a) p(b)}$, for all $a,b\in T$; 
        \item $\beta_\Delta = \beta \circ (\pi \times \pi)$ and $p_\Delta = p \circ \pi$; \label{item:beta-and-p-delta}
        \item If $\tilde \Delta$ is another refinement with $\supp \tilde \Delta = T_\Delta$ and ${}^\pi \tilde \Delta = \Gamma$, then there is a unique self-equivalence $\alpha$ of $\{ \pm 1 \} \xrightarrow{\iota} T_\Delta \xrightarrow{\pi} T$ such that $\tilde \Delta = {}^\alpha \Delta$. 
        Moreover, $\eta_{\tilde \Delta} = \eta \circ \alpha$. \label{item:number-of-extensions}
    \end{enumerate}

    % There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$. 
    % If $\widetilde \Gamma$ is a such grading and $\widetilde T$ is its support, then there is a unique group extension $0 \to \{ \pm 1 \} \xrightarrow{\iota} \widetilde T \xrightarrow{\pi} T \to 0$ such that ${}^\pi \widetilde \Gamma = \Gamma$, and this extension is equivalent to the one given by the $2$-cocycle $\sigma$ given by $\sigma(a,b) = (-1)^{p(a) p(b)}$. 
    % Moreover, the set of all gradings corresponding to $0 \to \{ \pm 1 \} \xrightarrow{\iota} \widetilde T \xrightarrow{\pi} T \to 0$ is in bijection with its self-equivalences.
\end{thm}


\begin{proof}
    We claim that all division gradings on $(\mc E, \vphi)$ refining $\Gamma$ must have the same set of subspaces of $\mc E$ as their homogeneous components. 
    Indeed, for each $t\in T$, let $\mc E_t$ denote the homogeneous component of degree $t$ of $\Gamma$. 
    Clearly, $\mc E_t$ is $2$-dimensional and $(X_t, \overline{X_t})$ and $(X_t, -\overline{X_t})$ are eigenvectors of $\vphi$, associated to the eigenvalues $1$ and $-1$, respectively. 
    It follows that the eigenspaces of $\vphi \restriction_{\mc E_t}$ are $1$-dimensional and, hence, $(X_t, \overline{X_t})$ and $(X_t, -\overline{X_t})$ must be homogeneous in any grading $\Delta$ on $(\mc E, \vphi)$ refining $\Gamma$. 
    If $\Delta$ is a division grading, all the components are $1$-dimensional, so the components must be $\mc E_{(\delta, t)} \coloneqq \FF (X_t, \delta \overline{X_t})$, for $t\in T$ and $\delta \in \pmone$.
    
    % the eigenspaces of $\vphi \restriction_{\mc E_t}$ associated to $1$ and $-1$ are both one dimensional, spanned by $(X_t, \overline{X_t})$ and $(X_t, -\overline{X_t})$, respectively. 
    % It follows that $(X_t, \overline{X_t})$ and $(X_t, -\overline{X_t})$ must be homogeneous in any grading on $(\mc E, \vphi)$ refining $\Gamma$. 
    % If such refinement is a division grading, the components must be $1$-dimensional, so the components must be the 
    
    % Hence on any division grading on $(\mc E, \vphi)$ refining the natural $T$-grading on $\mc E$, these eigenspaces have to be the homogeneous components. 
    % We will denote the subspace generated by $(X_t, \delta\overline{X_t})$, for $\delta \in \{ \pm 1 \}$, by $\mc E_{(\delta, t)}$. 
    % Clearly, $\mc E$ is the direct sum of all subspaces of this form. 
    
    Now, for all $a, b \in T$ and $\delta_1, \delta_2 \in \{ \pm 1 \}$, we have:
    %
    \begin{align*}
        (X_{a}, \delta_1 \overline{X_{a}})(X_{b}, \delta_2 \overline{X_{b}}) &= (X_{a} X_{b}, \delta_1 \delta_2 \overline{X_{a}} \,\overline{X_{b}}) \\
        &= (X_{a} X_{b}, \delta_1 \delta_2 (-1)^{p(a)p(b)} \overline{X_{b}X_{a}})\\ 
        &=(X_{a} X_{b}, \delta_1 \delta_2 (-1)^{p(a)p(b)} \beta(a, b) \overline{X_{a} X_{b}})\\
        &= (X_{a} X_{b}, \delta_1 \delta_2 \tilde\beta (a,b) \overline{X_{a} X_{b}}).
    \end{align*}
    %
    On the one hand, if $\beta(a, b) \neq \pm 1$ for some $a,b \in T$, the direct sum decomposition $\mc E = \bigoplus \mc E_{(\delta, t)}$ not a grading of $\mc E$ as a superalgebra. 
    On the other hand, if $\beta$ takes values in $\{ \pm 1 \}$, it follows that $\mc E_{(\delta_1, a)} \mc E_{(\delta_2, b)} = \mc E_{(\delta_1 \delta_2 \tilde\beta (a,b), ab)}$. 
    Therefore we have a grading by the group $\{ \pm 1\} \times_{\tilde\beta} T$. 
    Let us denote this grading by $\Delta_0$. 
    % If $\pmone \xrightarrow{\tilde\iota} \{ \pm 1\} \times_{\tilde\beta} T \xrightarrow{\tilde\pi} T$ is the extension correponding to $\{ \pm 1\} \times_{\tilde\beta} T$, then it is clear that ${}^{\tilde\pi}\Delta_0 = \Gamma$. 
    % Note that, by Lemma ??, this group extension is equivalent to the one in Example \ref{ex:main-extension}.
    
    We will now proceed to prove \eqref{item:there-is-extension}. 
    Recall that, for a division grading, its support is its universal group (Lemma \ref{lemma:div-grd-unvrsl-grp}). 
    Since $\Gamma$ is a coarsening of $\Delta$, by the universal property of the universal group, there is a unique map $\pi\from E\to T$ such that ${}^{\pi}\widetilde \Gamma = \Gamma$. 
    Also, since $|\widetilde T| = 2 |T|$, we must have $|\ker \pi| = 2$, and therefore there is a unique monomorphism $\iota\from \pmone \to \widetilde T$ with $\iota(\pmone) = \ker \pi$. 
    Note that in the particular case $\Delta = \Delta_0$, we get the extension associated to $\pmone \times_{\tilde\beta} T$.
    
    We will also use the universal property of the universal group to prove items \eqref{item:equivalent-extension-example} and \eqref{item:number-of-extensions}.
    Let $\Delta$ and $\Delta'$ be division gradings on $(\mc E, \vphi)$ refining $\Gamma$, with the correponding extensions being $\{ \pm 1 \} \xrightarrow{\iota} E \xrightarrow{\pi} T$ and $\{ \pm 1 \} \xrightarrow{\iota'} E' \xrightarrow{\pi'} T$, respectively. 
    Since they have the same components, $\Delta$ is a (improper) refinement of $\Delta'$, so there is a unique group homomorphism $\alpha\from E \to E'$ such that ${}^\alpha \Delta = \Delta'$. 
    % Exchanging the roles of $\Delta$ and $\Delta'$ we have that $\alpha$ is an isomorphism. 
    Also, by the uniqueness of $\pi$, we have $\pi = \pi' \alpha$ and, by the uniqueness of $\iota'$, we have $\iota' = \alpha \iota$. 
    We conclude not only that the extensions are equivalent, but also that $\alpha$ is the unique equivalence between them such that ${}^\alpha \Delta = \Delta'$. 
    
    Putting $\Delta' = \Delta_0$, we obtain item \eqref{item:equivalent-extension-example} follows from Lemma \ref{lemma:tildeT-finally}. 
    
    To prove \eqref{item:number-of-extensions}, 
    suppose $\Delta$ and $\Delta'$ correspond to the same group extension. 
    Then there is a unique self-equivalence $\alpha$ of $\{ \pm 1 \} \xrightarrow{\iota} E \xrightarrow{\pi} T$ such that ${}^\alpha \Delta = \Delta'$. 
    Conversely,
    note that for every self-equivalence $\alpha$ of $\{ \pm 1 \} \xrightarrow{\iota} E \xrightarrow{\pi} T$, we have that the grading ${}^\alpha \Delta$ also corresponds to this extension, since $\pi\alpha = \pi$. 
    So the gradings corresponding to the extension $\{ \pm 1 \} \xrightarrow{\iota} E \xrightarrow{\pi} T$ are in bijection with its self-equivalences. 
    % Now Corollary \ref{cor:self-equivalences-are-homomorphisms} concludes the proof.
\end{proof}

    % Since this extension is equivalent to the one corresponding to $\pmone \times_{\tilde\beta} T$, we can apply Corollary \ref{cor:self-equivalences-are-homomorphisms} to conclude that the self-equivalences are in bijection with group homomorphisms from $T$ to $\pmone$, concluding the proof.
    % 
    % 
    % 
    % Since the direct sum decomposition of $\widetilde \Gamma$ must be the same of $\Delta$, let $\alpha\from \widetilde T \to \pmone \times_{\tilde\beta} T$ be the bijection such that the component of degree $\tilde t$ with respect to $\widetilde T$ is the component of degree $\alpha(\tilde t)$ with respect to $\Delta$. 
    % In other
    % 
    % the identity map on $\mc E$ an equivalence between 
    % Recall that the support of a division grading is its universal group (Lemma ??). 
    % For each $\tilde t\in \widetilde T$, there are unique $\delta \in \pmone$ and $t\in T$ such that the component of $\tilde t$ with respect to $\widetilde \Gamma$ is $\mc E_{(\delta, t)}$. 
    % Let us define 
    
    % Let $\pi\from \widetilde T \to T$ be defined by $\pi(\tilde t) = t$ and $\alpha\from \widetilde T \to \pmone \times_{\tilde\beta} T$  be defined by $\alpha(\tilde t) = (\delta, t)$. 
    
    % We claim that $\pi$ is a group homomorphism. 
    % Indeed, given $\tilde t_1, \tilde t_2 \in \widetilde T$, since the component of $\tilde t_1, \tilde t_2$ is nonzero, there is a $t\in T$ such that $\pi(\tilde t_1, \tilde t_2) = t$ and, since $\Gamma$ is a grading, $t = \pi(\tilde t_1) \pi(\tilde t_2)$. 
    % Clearly, ${}^{\pi}\widetilde \Gamma = \Gamma$. 
    % On the one hand, if there is a group homomorphism $\pi'\from \widetilde T \to T$ such that ${}^{\pi'}\widetilde \Gamma = \Gamma$, then, clearly, we need $\pi'(\tilde t) = t$, so $\pi' = \pi$. 
    % % On the other hand, defining $\pi$ this formula , we have that, since $\widetilde T$ is the support of $\widetilde \Gamma$, $\pi$ is, indeed, a group homomorphism
    % Also, since $|\widetilde T| = 2 |T|$, we must have $|\ker \pi| = 2$, so there is a unique monomorphism $\iota\from \pmone \to \widetilde T$ with $\iota(\pmone) = \ker \pi$. 
    % This proves \eqref{item:there-is-extension}. 
    % Note that, for the particular case $\widetilde \Gamma = \Delta$, we have that this produces the group extension associated to $\tilde \beta$.
    
    % We now claim that $\alpha\from \widetilde T \to \pmone \times_{\tilde\beta} T$ is a group isomorphism. 
    % The proof it is a homomorphism is analogous to the proof $\pi$ is a homomorphism. 
    % Also, $\alpha$ is necessarily a bijection, since every component $\mc E_{(\delta, t)}$ also corresponds to a unique component of the grading $\widetilde \Gamma$. 
    % By definition, it is the only map such ${}^\alpha \widetilde\Gamma = \Delta$. 
    % The isomorphism $\alpha$ is an equivalence between the corresponding group extensions. 
    % In particular, given two gradings, there is a unique equivalence between the corresponding group extensions. 
    

    

    % % From this and the assumption that $\beta$ takes values in $\{ \pm 1 \}$, it follows that we can grade $\mc E$ by the group $\{ \pm 1\} \times_{\tilde\beta} T$ by defining the degree of $(X_t, \delta\overline{X_t})$ to be $(\delta, t)$, for all $t \in T$ and $\delta \in \{ \pm 1 \}$.
    
    % Using again that $\beta$ takes values in $\{ \pm 1 \}$, by Proposition ?? there is a quadratic form $\mu$ on $T$ whose polarization is $\beta$. 
    % Since $\mu$ takes values in $\{ \pm 1 \}$, it follows that $\beta$ is a $2$-coboundary, so by Proposition ??, there is an isomorphism from $\{ \pm 1 \} \times_{\tilde\beta} T$ to $\{ \pm 1 \} \times_{\sigma} T$ preserving the projection on $T$.
    
    
    
    % % Consider the automorphism $\theta\from \D \times \D\sop \to \D \times \D\sop$ given by $\theta (x, \bar y) = (\psi(y), \overline{\psi(x)})$. 
    % % Clearly, $\theta$ is preserves degrees and commutes with the exchange superinvolution. 
    % % Hence, by ??, it corresponds to a refinement of the grading on $(\D \times \D\sop, \psi)$. 
    % % Also, if $\eta\from T \to \FF^\times$ is the map corresponding to $\psi$, then $\theta(X_t, \overline{X_t}) = \eta(t) (X_t, \overline{X_t})$ and $\theta(X_t, -\overline{X_t}) = -\eta(t) (X_t, \overline{X_t})$, hence $(X_t, \overline{X_t})$ and $(X_t, -\overline{X_t})$ lie in different components. 
    % % Therefore each component have dimension at most $1$, completing the proof.
% \end{proof}

\begin{cor}\label{cor:old-item-iv}
    Under the conditions of Theorem \ref{thm:refinement-DxDsop}, the set of all refinements $\Delta$ such that $\supp \Delta = T_\Delta$ and ${}^\pi \Delta = \Gamma$ is in bijection with the group homomorphisms from $T$ to $\{ \pm 1 \}$.
\end{cor}

\begin{proof}
    It follows from item \eqref{item:number-of-extensions} and Corollary \ref{cor:self-equivalences-are-homomorphisms}.
\end{proof}

It is worth emphasizing that all these refinements are nonisomorphic as graded superalgebras with superinvolution, but they are weakly isomorphic and also isomorphic as graded superalgebras. 
% The parameters are $(T_\Delta, \beta_\Delta, p_\Delta, \eta_\Delta \circ \alpha)$.
% This can be seen by looking on the parameters defining their equivalence class. 


% \begin{remark}
%     Note that quadratic forms could have been avoided if we decided to keep working with the group $\pmone \times_{\tilde\beta} T$. 
%     Nevertheless, the quadratic forms allowed us to to find a more explicit model for the extension, not depending on $\beta$.
% \end{remark}

% \begin{remark}
%     The refinement above could have been construct using the eigenspace decomposition of an automorphism on $\mc E$. 
%     Since $\beta$ takes values in $\{ \pm 1 \}$, there is a super-anti-automorphism $\psi\from \D \to \D$ of order form. 
%     Then the map $\Psi\from \mc E \to \mc E$ defined by $\Psi(x, \bar y) = (\psi (y), \overline{\psi(x)})$ is an automorphism of order $4$ commuting with the exchange superinvolution.
% \end{remark}

We will now present an example of such a refinement. 
Let $\D$ be $M(1,1)$ with the division grading by $T \coloneqq \ZZ_2 \times \ZZ_2$ determined by:
\begin{align*}
    \deg \begin{pmatrix}
        \phantom{.}1 & \phantom{-}0\phantom{.}\\
        \phantom{.}0 & \phantom{-}1\phantom{.}
    \end{pmatrix} = (\bar 0, \bar 0),\quad & \deg \begin{pmatrix}
        \phantom{.}0 & \phantom{-}1\phantom{.} \\
        \phantom{.}1 & \phantom{-}0\phantom{.}
    \end{pmatrix} = (\bar 0, \bar 1),\\
    \deg \begin{pmatrix}
        \phantom{.}1 & \phantom{-}0\phantom{.}\\
        \phantom{.}0 & -1\phantom{.}
    \end{pmatrix} = (\bar 1, \bar 0),\quad &
    \deg \begin{pmatrix}
        \phantom{.}0 & -1\phantom{.} \\
        \phantom{.}1 & \phantom{-}0\phantom{.}
    \end{pmatrix} = (\bar 1, \bar 1).
\end{align*}
%
%
% \begin{center}
%     \begin{tabular}{ c c }
%         $\deg \begin{pmatrix}
%         \phantom{.}1 & \phantom{-}0\phantom{.}\\
%         \phantom{.}0 & \phantom{-}1\phantom{.}
%         \end{pmatrix} = (\bar 0, \bar 0)$, & $\deg \begin{pmatrix}
%         \phantom{.}0 & \phantom{-}1\phantom{.} \\
%         \phantom{.}1 & \phantom{-}0\phantom{.}
%         \end{pmatrix} = (\bar 0, \bar 1)$,\\
%         \rule{0pt}{4ex}   
%         $\deg \begin{pmatrix}
%         \phantom{.}1 & \phantom{-}0\phantom{.}\\
%         \phantom{.}0 & -1\phantom{.}
%         \end{pmatrix} = (\bar 1, \bar 0)$, &
%         $\deg \begin{pmatrix}
%         \phantom{.}0 & -1\phantom{.} \\
%         \phantom{.}1 & \phantom{-}0\phantom{.}
%         \end{pmatrix} = (\bar 1, \bar 1)$.
%     \end{tabular}
% \end{center}
%
From Theorem \ref{thm:refinement-DxDsop}, we get a grading by the subgroup $E \coloneqq \big( \pmone \times \ZZ_2 \times \{ \bar 0 \} \big) \cup \big( \{ \pm i \} \times \ZZ_2 \times \{ \bar 1 \} \big)$ of $\{\pm 1, \pm i\} \times \ZZ_2 \times \ZZ_2$. 
Note that this group is isomorphic to $\ZZ_2 \times \ZZ_4$ via the homomorphism determined by $(1, \bar 1, \bar 0) \mapsto (\bar 1, \bar 0)$ and $(i, \bar 0, \bar 1) \mapsto (\bar 0, \bar 1)$. 

To construct this grading explicitly, we follow the proof of Theorem \ref{thm:refinement-DxDsop}. 
First, we get a grading by $\pmone \times_{\tilde\beta} T$ on $\D\times \D\sop$ given by $\deg (X_t, \delta \overline{X_t}) = (\delta, t)$, for all $\delta \in \pmone$ and $t\in T$. 
Then, to get a simpler model for the group, we follow the proof of Lemma \ref{lemma:tildeT-finally}, where we need to choose a quadratic form $\mu$ on $T$ whose polarization is $\beta$, which is equivalent to choosing an involution on $\D$ as a graded algebra. 
We can choose the involution to be the transposition, \ie, $\mu(\bar 0, \bar 0) = 1$, $\mu(\bar 0, \bar 1) = 1$, $\mu(\bar 1, \bar 0) = 1$ and $\mu(\bar 1, \bar 1) = -1$. 
We then get a grading by $\pmone \times_\sigma T$, where $\sigma(a,b) \coloneqq (-1)^{p(a)p(b)}$, given by $\deg (X_t, \delta \overline{X_t}) = (\mu(t) \delta, t)$, for all $\delta \in \pmone$ and $t\in T$. 
This can be transplanted to the groups $\big(\pmone \times T^+\big) \cup \big(\{\pm i\} \times T^-\big)$ and $\ZZ_2\times \ZZ_4$ via the explicit isomorphisms given in the proof of Lemma \ref{lemma:tildeT-finally} and above. 
To summarize:

\begin{ex}\label{ex:superalgebra-O}
    Let $\mc O$ denote the superalgebra $M(1,1) \times M(1,1)\sop$ endowed with the $\ZZ_2\times \ZZ_4$-grading determined by:
    %
    % We can refine the algebra the natural grading on $\D\times \D\sop$ by the division grading determined by:
    %
    \begin{align*}
        % -- 1st row --
        \deg \left(\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & \phantom{-}1\phantom{.}
        \end{pmatrix}, \overline{\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & \phantom{-}1\phantom{.}
        \end{pmatrix}}\right) = (\bar 0, \bar 0),\,&
        \deg \left(\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & \phantom{-}1\phantom{.}
        \end{pmatrix}, -\overline{\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & \phantom{-}1\phantom{.}
        \end{pmatrix}}\right) = (\bar 0, \bar 2),\\
        % -- 2nd row --
        \deg \left(\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & -1\phantom{.}
        \end{pmatrix}, \overline{\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & -1\phantom{.}
        \end{pmatrix}}\right) = (\bar 1, \bar 0),\,&
        \deg \left(\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & -1\phantom{.}
        \end{pmatrix}, -\overline{\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & -1\phantom{.}
        \end{pmatrix}}\right) = (\bar 1, \bar 2),\\
        % -- 3rd row --
        \deg \left(\begin{pmatrix}
            \phantom{.}0 & \phantom{-}1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}, \overline{\begin{pmatrix}
            \phantom{.}0 & \phantom{-}1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}}\right) = (\bar 0, \bar 1),\,&
        \deg \left(\begin{pmatrix}
            \phantom{.}0 & \phantom{-}1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}, -\overline{\begin{pmatrix}
            \phantom{.}0 & \phantom{-}1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}}\right) = (\bar 0, \bar 3),\\
        % -- 4th row --
        \deg \left(\begin{pmatrix}
            \phantom{.}0 & -1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}, \overline{\begin{pmatrix}
            \phantom{.}0 & -1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}}\right) = (\bar 1, \bar 3),\,&
        \deg \left(\begin{pmatrix}
            \phantom{.}0 & -1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}, -\overline{\begin{pmatrix}
            \phantom{.}0 & -1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}}\right) = (\bar 1, \bar 1).
    \end{align*}
    %
    %
    % \setlength\tabcolsep{2pt}
    %  \begin{center}
    %  \begin{tabular}{c c}
    %  % -- 1st row --
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & \phantom{-}1\phantom{.}
    %  \end{pmatrix}, \overline{\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & \phantom{-}1\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 0, \bar 0),$&
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & \phantom{-}1\phantom{.}
    %  \end{pmatrix}, -\overline{\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & \phantom{-}1\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 0, \bar 2)$\\
    %  % -- 2nd row --
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & -1\phantom{.}
    %  \end{pmatrix}, \overline{\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & -1\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 1, \bar 0),$&
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & -1\phantom{.}
    %  \end{pmatrix}, -\overline{\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & -1\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 1, \bar 2)$\\
    %  % -- 3rd row --
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}0 & \phantom{-}1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}, \overline{\begin{pmatrix}
    %   \phantom{.}0 & \phantom{-}1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 0, \bar 1),$&
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}0 & \phantom{-}1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}, -\overline{\begin{pmatrix}
    %   \phantom{.}0 & \phantom{-}1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 0, \bar 3)$\\
    %  % -- 4th row --
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}0 & -1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}, \overline{\begin{pmatrix}
    %   \phantom{.}0 & -1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 1, \bar 3),$&
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}0 & -1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}, -\overline{\begin{pmatrix}
    %   \phantom{.}0 & -1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 1, \bar 1)$
    %  \end{tabular}
    %  \end{center}
    %
    Then $\mc O$ is an odd graded division superalgebra and the exchange superinvolution on it preserves degrees. 
    %  The natural grading can then be recovered by coarsening via the group homomorphism $\pi\from \ZZ_2\times \ZZ_4 \to \ZZ_2\times \ZZ_2$ given by $\pi( \bar k, \bar \ell) \coloneqq ( \bar k, \bar \ell)$, for all $k, \ell \in \ZZ$. 
    %  We will denote this graded-division superalgebra by $\mc O$.
\end{ex}

As we are going to see, $\mc O$ is of special importance among the odd graded division superalgebras with superinvolution of type $M\times M\sop$.


Of course, the construction of $\mc O$ depend on the choice of the involution on $\D$. 
By Corollary \ref{cor:old-item-iv}, there are $4$ different graded superalgebras with superinvolution we could end up with if we took different choices.

% \begin{itemize}
%     \item recall there are $4$ gradings isomorphic to $\mc O$ that are not isomorphic if we consider as algebras with involution;
%     \item we can describe then using automorphisms of $\mc O$.
% \end{itemize}

Recall that we can distinguish among the different types of superinvolution-simple superalgebras by their center (Proposition \ref{prop:types-of-SA-via-center}). 
In the case our superalgebra has a division grading, this information is captured by $\rad \beta$:

\begin{lemma}\label{lemma:types-of-D-via-rad-beta}
    Let $(D, \vphi_0)$ be a graded-division superalgebra with superinvolution associated to $(T, \beta, p, \eta)$.
    \begin{enumerate}[(i)]
        \item If $(D, \vphi_0)$ is of type $M$, then $\rad \beta = (\rad \beta) \cap T^+ = \{e\}$;
        \item If $(D, \vphi_0)$ is of type $M\times M\sop$, then $\rad \beta = (\rad \beta) \cap T^+ = \langle f \rangle$, where $f$ has order $2$ and $\eta(f) = -1$;
        \item If $(D, \vphi_0)$ is of type $Q\times Q\sop$, then $\rad \beta = \langle t_1 \rangle$, where $t_1 \in T^-$ has order $4$ and $\eta(t_1) = 1$, and $(\rad \beta) \cap T^+ = \langle f \rangle$, where $f = t_1^2$ and, hence, $\eta(f) = -1$. \qed
    \end{enumerate}
\end{lemma}

\begin{thm}
    Let $\D$ be a finite dimensional superinvolution-simple superalgebra endowed with an odd division grading. 
    Then $\D \iso \D' \otimes \D''$ as graded superalgebras with superinvolution, where $\D'$ is of type $M$ (and, hence, even) and
    \begin{enumerate}[(i)]
        \item if $\D$ is of type $M\times M\sop$, then $\D''$ is weakly isomorphic to $\mc O$, as in Example \ref{ex:superalgebra-O};
        \item if $\D$ is of type $Q\times Q\sop$, then $\D''$ is weakly isomorphic to $\FF\ZZ_4$, as in Example \ref{ex:FZ4-revisited}.
    \end{enumerate}
\end{thm}

\begin{proof}
    Let $\D$ be associated to $(T, \beta, p, \eta)$. 
    By Lemma \ref{lemma:types-of-D-via-rad-beta}, we can write $\rad \beta \cap T^+ = \{ e, f\}$, with $\eta(e) = 1$ and $\eta(f) = -1$. 
    
    Consider $\overline{T} = \frac{T}{\rad \beta}$ with its induced bicharacter $\bar \beta$. 
    Since $\bar\beta$ takes values in $\{\pm 1\}$ and it is nondegenerate, by Prop ?? we have that $\overline{T}$ is an elementary $2$-group. 
    %We claim that $T^+$ is also an elementary $2$-group. 
    Let $t\in T$. 
    We have that $\bar t^2 = \bar e \in \overline{T}$, so, since $t^2$ is even, $t^2 \in \{ e, f \}$. 
    If $t$ is even, then $\eta(t^2) = \eta(t)^2 = 1$, hence $t^2 = e$. 
    If $t$ is odd, then, $\eta(t^2) = -\eta(t)^2 = -1$, hence $t^2 = f$. 
    Note that, in particular, $T^+$ is an elementary $2$-group.
    
    If $\D \iso Q(n)$, let $t_1$ be an odd element in $\rad \beta$ and complete $\{f\}$ to a $\ZZ_2$-basis $\{f, t_2, \ldots, t_\ell \}$ of $T^+$. 
    Then $T$ is generated by $\{t_1, t_2, \ldots, t_\ell \}$ and this generating set give us an isomorphism $T \iso \ZZ_4 \times (\ZZ_2)^{\ell - 1}$. 
    Restricting $\beta$ and $\eta$ to $\ZZ_4$ and $(\ZZ_2)^{\ell - 1}$ we find $\D'$ and $\D''$, respectively.
    
    If $\D \iso M(m,n) \times M(m,n)\sop$, them there are no odd elements in $\rad \beta$ so, in particular, $p$ induces an homomorphism in $\overline{T}$. 
    Since $\bar \beta$ is nondegenerate, this homomorphism corresponds to a element $\bar {t_0} \in \overline T$ such that $\bar \beta (\bar {t_0}, \bar t) = (-1)^{p(t)}$. 
    We choose $t_0 \in T$ to be a preimage of $\bar {t_0}$ and choose $t_1$ to be any element in $T^-$. 
    Note that $t_0 \in T^+$ since $1 = \beta(\bar {t_0}, \bar {t_0}) = (-1)^{p(t_0)}$. 
    Again, since $T^+$ is an elementary $2$-group, complete $\{t_0, f\}$ to a $\ZZ_2$-basis $\{ t_0, f, t_2, \ldots, t_\ell \}$ of $T^+$. 
    Hence $\{ t_0, t_1, t_2, \ldots, t_\ell \}$ is a generating set for $T$ that gives us an isomorphism $T \iso \ZZ_2 \times \ZZ_4 \times (\ZZ_2)^{\ell - 1}$. 
    If, for some $i$, $2 \leq i \leq \ell$, we have $\beta(t_1, t_i)= -1$, replace $t_i$ for $t_it_0$ and so we have $\beta(t_1, t_it_0) = \beta(t_1, t_i) \beta(t_1, t_0) = +1$. 
    We can, then, assume that the sets $\{ t_0, t_1 \}$ and $\{ t_2, \ldots, t_\ell \}$ are orthogonal with respect to $\beta$.
    Restricting $\beta$ and $\eta$ to $\ZZ_2 \times \ZZ_4$ and to $(\ZZ_2)^{\ell - 1}$ we find $\D'$ and $\D''$, respectively.
\end{proof}


% Let $\mc U = \bigoplus_{g\in G} \mc U_g$ be a graded $\D$-module. 
% In general, $\mc U_g$ is not a $\D$-module, since if $d\in \D$ is a homogeneous element of degree $t\in T$, then $d\cdot \mc U_g \subseteq U_{tg}$. 

\section{Graded division superalgebras with super-anti-automorphism}
% -----------------------------------------

We are now going is to investigate the finite dimensional graded division superalgebras that admit a superinvolution. 
Throughout this section, we will assume that $\FF$ is an algebraically closed field with $\Char \FF \neq 2$, and we will fix a primitive fourth root of unity $i \in \FF$.
%In this case, because of Theorem \ref{thm:vphi-involution-iff-delta-pm-1}, we are primarily interested in the case the graded division superalgebra admits a superinvolution.
Our final goal is to classify the division gradings on finite dimensional superinvolution-simple associative superalgebras.
 
Recall that a graded division superalgebra is the same as a graded division algebra if we consider the $G^\#$-grading. 
In particular, the isomorphism class of a finite dimensional graded division superalgebra $\D$ is determined by a pair $(T, \beta)$ where $T \coloneqq \supp \D \subseteq G^\#$ is a finite abelian group and $\beta\from T\times T \to \FF^\times$ is an alternating bicharacter {\tt (see ??)}. 
Instead of writing subscripts for the $G$-grading and superscripts for the canonical $\ZZ_2$-grading, it will be convenient to write $\D = \bigoplus_{t\in T} \D_t$ and recover the parity via the map $p\from T \to \ZZ_2$ which is the restriction of the projection $G^\# = G\times \ZZ_2 \to \ZZ_2$. 
% Sometimes we may want to discuss graded division superalgebras without reference to the groups $G$ or $G^\#$, so it is convenient to say 

{\tt (for the ``see'' part: [EK] $D_4$ and [BK] gradings on classical \\lie algebras)}

Since each component $\D_t$ of $\D$ is one-dimensional, an invertible degree-preserving map $\vphi_0\from \D \to \D$ is completely determined by a map $\eta\from T \to \FF^\times$.

\begin{prop}\label{prop:superpolarization}
    Let $\vphi_0\from \D \to \D$ be the invertible degree-preserving map determined by $\eta\from T \to \FF^\times$  such that $\vphi_0(X_t) = \eta(t) X_t$ for all $t\in T$ and $X_t\in \D_t$. 
    Then $\vphi_0$ is a super-anti-automorphism if, and only if,
    %
    \begin{equation}\label{eq:superpolarization}
        \forall a,b\in T, \quad (-1)^{p(a) p(b)} \beta(a,b) =  \eta(ab) \eta(a)\inv \eta(b)\inv.
    \end{equation}
    %
    Moreover, $\D$ admits a super-anti-automorphism if, and only if, $\beta$ only takes values $\pm 1$.
\end{prop}

\begin{proof}
    For all $a,b \in T$, let $X_a \in \D_a$ and $X_b\in \D_b$. Then:
    %
    \begin{alignat*}{2}
        &&\vphi_0(X_a X_b) &= (-1)^{p(a) p(b)} \vphi_0(X_b) \vphi_0(X_a)\\
        \iff&&\,\, \eta(ab)X_a X_b &= (-1)^{p(a) p(b)} \eta(a) \eta(b) X_b X_a\\
        \iff&&\, \eta(ab)X_a X_b &= (-1)^{p(a) p(b)} \eta(a) \eta(b) \beta(b,a) X_a X_b\\
        \iff&& \eta(ab) &= (-1)^{p(a) p(b)} \eta(a) \eta(b) \beta(b,a)
        \\
        \iff&& (-1)^{p(a) p(b)} \beta(b, a) &=  \eta(ab) \eta(a)\inv \eta(b)\inv.
    \end{alignat*}
    The right-hand side of this last equation does not change if $a$ and $b$ are switched, hence $\beta(b,a) = \beta(a,b)$. 
    
    Since $\beta$ is alternating, $\beta(b, a) = \beta (a, b)\inv$, therefore $\beta(a,b)^2 = 1$, which proves one direction of the ``moreover'' part.
    %from where we conclude that $\beta(a,b) = \pm 1$. 
    The converse follows from the fact that the isomorphism class of $\D\sop$ is determined by $(T, \beta\inv)$, so if $\beta$ takes only values in $\{ \pm 1 \}$, there must be an isomorphism from $\D$ to $\D\sop$, which can be seen as a super-anti-isomorphism on $\D$.
\end{proof}

With this we can translate our task to the level of abelian groups. 
Instead of considering the graded superalgebra with super-anti-automorphism $(\D, \vphi_0)$, we can focus, instead, on the data $(T, \beta, p, \eta)$, where $T$ is a finite abelian group, $\beta$ is an alternating bicharacter on $T$, $p\from T \to \ZZ_2$ is a group homomorphism and $\eta\from T \to \FF^\times$ satisfies Equation \eqref{eq:superpolarization}. 
Also, the condition of $\vphi_0$ being a superinvolution clearly corresponds to $\eta(t) \in \{ \pm 1 \}$ for all $t\in T$.

\begin{ex}
    If we consider the associative superalgebra $Q(1)$ graded by the trivial group $G = \{e\}$, it is a graded division superalgebra. 
    In this case $G^\# = \ZZ_2$ and, also, $T = \ZZ_2$. 
    Since $Q(1)$ is commutative, $\beta$ is identically $1$.
    By Corollary \ref{cor:Q-no-spuerinv-center}, $Q(1)$ does not admit a superinvolution, but the map $\eta\from \ZZ_2 \to \FF^\times$ given by $\eta (\bar 0) = 1$ and $\eta( \bar 1) = i$ defines a super-anti-automorphism on it. 
    Indeed, it is easy to check that $(-1)^{p(a) p(b)} =  \eta(ab) \eta(a)\inv \eta(b)\inv$.
\end{ex}

\begin{ex}\label{ex:FZ4-revisited}
    By Example \ref{ex:FZ2xFZ2sop-iso-FZ4}, we have a $\ZZ_4$-grading on $Q(1)\times Q(1)\sop$, which is clearly a division grading. 
    The exchange superinvolution preserves degree and is determined by $\eta (\bar 0) = 1$, $\eta (\bar 1) = 1$, $\eta (\bar 2) = -1$ and $\eta (\bar 3) = -1$.
\end{ex}

\begin{prop}\label{prop:odd-cant-have-order-2}
    If $\D$ admits a superinvolution, %$\vphi_0$ is a superinvolution. 
    % $\eta(t) \in \{ \pm 1 \}$ for all $t\in T$. 
    then every odd element in $T$ must have order at least $4$.
\end{prop}

\begin{proof}
    The bicharacter $\beta$ is alternating, so if we put $a = b = t$ in Equation \eqref{eq:superpolarization}, we get
    %
    \begin{equation}\label{eq:eta-t-square}
        \forall t\in T, \quad \eta (t)^2 = (-1)^{p(t)} \eta(t^2).
    \end{equation}
    %
    % Also, since $\vphi_0^2 = \id$, $\eta(t)^2 = 1$ for all $t\in T$.
    
    Now let $t\in T^-$. 
    Every odd power of $t$ is also an odd element, so $t$ cannot have an odd order. 
    By Equation \eqref{eq:eta-t-square}, $\eta (t^2) = - \eta(t)^2 = -1$, hence $t^2 \neq e$.
\end{proof}

\begin{remark}
    Proposition \ref{prop:odd-cant-have-order-2} also gives us another proof for the fact that the associative superalgebra $Q(n)$ does not admit a superinvolution (Corollary \ref{cor:Q-no-spuerinv-center}). 
    Recall that $Q(n) \iso \End_\D (\U)$ (Proposition ??), where $\D= \FF\ZZ_2$ with its natural $\ZZ_2$-grading and $\U$ is a right $\D$-module of finite rank. 
    If there were a superinvolution on $Q(n)$, by Theorem \ref{thm:vphi-involution-iff-delta-pm-1} we would have a superinvolution on $\D$, which is impossible since the only odd element of $T = \ZZ_2$ has order $2$. 
\end{remark}

\begin{lemma}\label{lemma:beta-nondeg-elem-2-grp}
    If $\beta$ takes values in $\{ \pm 1 \}$ and is nondegenerate, then $T$ is an elementary $2$-group.
\end{lemma}

\begin{proof}
    Since $\beta$ nondegenerate, the map $T \to \widehat T$ given by $t \mapsto \beta(t, \cdot)$ is a group isomorphism.
    In particular, if $t\in T$ has order $n$, then $\beta(t, \cdot)\in \widehat T$ also has order $n$.
    But, by Proposition \ref{prop:superpolarization}, $\beta$ only takes values in $\{ \pm 1\}$, so  $\beta(t, \cdot )^2 =1$ and, hence, $ n \leq 2$.
\end{proof}

Combining Proposition \ref{prop:odd-cant-have-order-2} and Lemma \ref{lemma:beta-nondeg-elem-2-grp}, we get:

\begin{cor}\label{cor:no-odd-M-vphi}
    If $\D$ is simple as an algebra and admits a superinvolution, then $\D = \D\even$. \qed
\end{cor}

% As we will see in Chapter ??, this implies that all gradings on the Lie superalgebras in the series $B$, $C$, $D$ and $P$ are even.

Corollaries \ref{cor:D-has-the-same-type} and \ref{cor:no-odd-M-vphi} show that the presence of a superinvolution gives a strong restriction on the grading on $M(m,n)$: the grading must be even and its support an elementary $2$-group. 
Nevertheless, we will now show that we do have odd gradings on $M(n,n)\times M(n,n)\sop$ (Example \ref{ex:superalgebra-O}). 
To this end, we will use the concept of group extension.
% In our construction we are going to use the following concept:

\begin{defi}
    Let $H, K$ be groups. 
    A \emph{group extension of $H$ by $K$} is a group $E$ together with homomorphisms $\iota\from K \to E$ and $\pi\from E \to H$ such that 
    %
    \begin{equation}\label{eq:short-exact-sequence}
        0 \rightarrow K \xrightarrow{\iota} E \xrightarrow{\pi} H \rightarrow 0
    \end{equation}
    %
    is a short exact sequence, \ie,
    $\iota$ is injective, $\pi$ is surjective and $\operatorname{im} \iota = \ker \pi$ (and, hence, $H \iso \frac{E}{\iota(K)}$). 
    % For brevity, we may refer to the short exact sequence \eqref{eq:short-exact-sequence} as the extension. 
    An \emph{equivalence} between two extensions $K \xrightarrow{\iota} E \xrightarrow{\pi} H$ and $K \xrightarrow{\iota'} E' \xrightarrow{\pi'} H$ is a homomorphism $\alpha\from E \to E'$ such that the diagram
%     \begin{center}
% 		\begin{tikzcd}
% 			&& |[alias=E]|E \arrow[to=E', "\alpha"] \arrow[to = H, "\pi"]&&\\
% 			K \arrow[to=E, "\iota"] \arrow[to=E', "\iota'"]&&&& |[alias=H]|H\\
% 			&&|[alias=E']|E' \arrow[to=H, "\pi'"]&&
% 		\end{tikzcd}
% 	\end{center}
%%%%%%%%%%
	\begin{center}
		\begin{tikzcd}
			&& |[alias=E]|E \arrow[to=E', "\alpha"] \arrow[to = H, "\pi"]&&\\
% 			0 \arrow[to=K]
			& |[alias=K]|K \arrow[to=E, "\iota"] \arrow[to=E', "\iota'"]&& |[alias=H]|H & \\ %\arrow[to=0] & |[alias=0]|0\\
			&&|[alias=E']|E' \arrow[to=H, "\pi'"]&&
		\end{tikzcd}
	\end{center}
	commutes. 
	It is easy to see that $\alpha$ is necessarily an isomorphism. 
	An equivalence from an extension to itself will be refered as a \emph{self-equivalence}.
\end{defi}

\begin{ex}\label{ex:main-extension}
    Consider $E \coloneqq \big(\pmone \times T^+\big) \cup \big(\{\pm i\} \times T^-\big)$ as a subgroup of $\{ \pm 1, \pm i \} \times T$, and let $\iota\from \pmone \to E$ and $\pi\from E \to T$ be the homomorphisms given by $\iota(\delta) = (\delta, e)$ and $\pi (\delta, t) = t$ for all $\delta \in \pmone$ and $t\in T$. 
    Then $\pmone \xrightarrow{\iota} E \xrightarrow{\pi} T$ is an extension of $T$ by $\pmone$.
\end{ex}

Group extensions are usually studied in the context of group cohomology (see, for example, ?? and ??).  
We will need only some basic concepts and elementary results reviewed below. 

Let us fix the abelian groups $H$ and $K$ for the remainder of the section.

\begin{defi}
    A map $\sigma\from H\times H \to K$ is said to be a \emph{$2$-cocycle} if, for all $a,b,c \in H$, we have $\sigma(a,b) \sigma(ab, c) = \sigma(a, bc) \sigma(b,c)$. 
    If, further, we have that $\sigma(a,b) = \sigma(b,a)$, we say that $\sigma$ is \emph{symmetric}, and if we have $\sigma(a, e) = \sigma(e, a) = e$, we say that $\sigma$ is \emph{normalized}. 
    In the case $\sigma(h_1, h_2) = e$ for all $h_1, h_2 \in H$, we say that $\sigma$ is \emph{trivial}.
\end{defi}

% In this work, we are only going to deal with normalized symmetric $2$-cocycles, so we may refer to them simply as \emph{cocycles}.  
It is easy to check that every symmetric bicharacter is a normalized symmetric $2$-cocycle, and those are the only ones that we will need in this work. 

Given a normalized symmetric $2$-cocycle $\sigma$, we define the abelian group $K \times_\sigma H$ to be the set $K\times H$ with product $*_\sigma$ given by:
\[
    (k_1, h_1)*_\sigma(k_2, h_2) = (\sigma(h_1, h_2) k_1 k_2, h_1 h_2),
\]
for all $k_1, k_2 \in K$ and $h_1, h_2 \in H$. 
The condition of $\sigma$ being a symmetric $2$-cocycle is precisely what is needed for the associativity and commutativity of $*_\sigma$. 
The identity element is $(e, e)$ and the inverse is given by $(k, h)\inv = (k\inv \sigma(h,h\inv)\inv, h\inv)$. 
Note that the usual product on $K\times H$ is recovered as the particular case when $\sigma$ is trivial.

\begin{defi}
    % Let $\sigma\from H\times H \to K$ be a $2$-cocycle. 
    % The group $K \times_\sigma H$ is the set $K \times H$ endowed with the product $*_\sigma$ defined by
    % \[
    %     (k_1, h_1)*_\sigma(k_2, h_2) = (\sigma(h_1, h_2) k_1 k_2, h_1 h_2),
    % \]
    % for all $k_1, k_2 \in K$ and $h_1, h_2 \in H$. 
    The \emph{(abelian) group extension corresponding to $K \times_\sigma H$} is the group $K \times_\sigma H$ together the group homomorphisms $\iota \from K \to K \times_\sigma H$ and $\pi \from K \times_\sigma H \to H$ defined by $\iota (k) = (k , e)$ and $\pi (k, h) = h$, for all $k\in K$ and $h\in H$. 
    If $\sigma$ is trivial, we say that the extension is \emph{trivial}.
\end{defi}

% Note that the maps $\iota$ and $\pi$ are independent of the cocycle $\sigma$.


\begin{prop}\label{prop:all-ext-are-cocycle}
    Every abelian group extension $K \xrightarrow{\iota} E \xrightarrow{\pi} H$ is equivalent to the abelian group extension corresponding to $K\times_\sigma H$ for some normalized symmetric cocycle $\sigma\from H \to K$.
\end{prop}

\begin{proof}
    Fix $\tau\from H \to E$ a (set theoretical) map such that $\pi\tau = id_H$ and $\tau(e) = e$. 
    For every $x \in E$, we have that $x (\tau(\pi(x)))\inv$ is in $\ker \pi$ and, hence, it equal to $\iota(k)$ for a unique $k_x\in K$. 
    It follows that $x = \iota(k_x) \tau(\pi(x))$. 
    Define $f\from E \to K\times H$ by $f(x) = (k_x, \tau(\pi(x)) )$. 
    Clearly, $f$ is bijective, so we can make it an isomorphism by using it to define a product on $K\times H$. 
    It is easy to check that this product is the one on $K \times_\sigma H$ where $\sigma\from H\times H \to K$ is given by $\sigma(h_1, h_2) = \tau(h_1) \tau(h_2) \tau(h_1 h_2)\inv$ and $f$ is the desired equivalence.
\end{proof}

We will need to know when two extensions determined by different normalized symmetric $2$-cocycles are equivalent.

\begin{defi}
    Let $f\from H \to K$ be a map. 
    We define $\sigma  = \mathrm{d} f\from H\times H \to K$ to be map given by $\mathrm{d} f\, (a,b) = f(ab)f(a)\inv f(b)\inv$ for all $a,b \in H$. 
    We say that $\mathrm{d} f$ is a \emph{$2$-coboundary}.
\end{defi}

Note that every $2$-coboundary is a $2$-cocycle. 
The following is a well known result, but we include a proof here for completeness.

% \begin{defi}
%     Let $H, K$ be abelian groups and let $\sigma\from H\times H \to K$ be a $2$-cocycle. 
%     The group $K \times_\sigma H$ is the set $K \times H$ endowed with the product $*_\sigma$ defined by
%     \[
%         (k_1, h_1)*_\sigma(k_2, h_2) = (\sigma(h_1, h_2) k_1 k_2, h_1 h_2),
%     \]
%     for all $k_1, k_2 \in K$ and $h_1, h_2 \in H$. 
%     The \emph{group extension determined by $\sigma$} is the group $K \times_\sigma H$ together the group homomorphisms $\iota_\sigma \from K \to K \times_\sigma H$ and $\pi_\sigma \from K \times_\sigma H \to H$ defined by $\iota(k) = (k \sigma(e,e)\inv, e)$ and $\pi(k, h) = h$, for all $k\in K$ and $h\in H$.
% \end{defi}

% \begin{remark}
%     In general, a \emph{group extension of $T$ by $H$} is a group $E$ together with group homomorphisms $\iota\from H \to E$ and $\pi\from E \to T$ such that $\iota$ is injective, $\pi$ is surjective and $\iota(H) = \ker \pi$. 
%     For our needs, though, only the map $\pi$ will be needed.
% \end{remark}

\begin{prop}\label{prop:coboundary}
    Let $\sigma, \sigma' \from H\times H \to K$ be normalized symmetric $2$-cocycles. 
    A map $\alpha\from K \times_{\sigma} H \to K \times_{\sigma'} H$ is an equivalence between the correponding group extensions %determined by $\sigma$ and $\sigma'$ 
    if, and only if, there is a map $f\from H \to K$ such that $\alpha(k,h) = (f(h) k, h)$, for all $k\in K$ and $h\in H$, and $\sigma' \sigma\inv = \mathrm{d} f$.
    % If $\sigma' \sigma\inv$ is a $2$-coboundary, then there is an isomorphism $\alpha\from K \times_{\sigma} H \to K \times_{\sigma'} H$ such that $\pi_{\sigma'} \alpha = \pi_\sigma$.
\end{prop}

\begin{proof}
    The result follows from the following claims:
    \newclaims
    \begin{claim}
        Suppose $\alpha$ is an isomorphism. 
        Then $\alpha$ is an equivalence if, and only if, there is a map $f\from H \to K$ such that $\alpha(k,h) = (f(h)k, h)$, for all $k\in K$ and $h\in H$.
    \end{claim}
    
    Suppose $\alpha(k,h) = (f(h)k, h)$. 
    First, it is clear that $\pi \alpha = \pi$.
    Also, since $\alpha(e,e) = (e,e)$, it follows that $f(e) = e$ and, hence, $\alpha \iota = \iota$. 
    
    Now suppose $\alpha$ is an equivalence. 
    Since for all $h\in H$ $(\pi \alpha) (e, h) = \pi (e, h) = h$, we have that $\alpha (e, h) = (f(h), h)$ for some map $f\from H\to K$. 
    Also, since for all $k\in K$ $(\alpha \iota) (k) = \iota(k)$, we have that $\alpha(k, e) = (k,e)$. 
    It follows that $\alpha (k,h) = \alpha((k,e) *_\sigma (e, h)) = \alpha(k, e) *_{\sigma'} (e, h) = (f(h)k, h)$. 
    
    \begin{claim}
        Suppose there is a map $f\from H \to K$ such that $\alpha(k,h) = (f(h)k, h)$, for all $k\in K$ and $h\in H$. 
        Then $\alpha$ is an isomorphism if, and only if, $\sigma'\sigma\inv = \mathrm{d}f$.
    \end{claim}
 
    First, it is easy to check that the map $K \times_{\sigma'} H \to K \times_{\sigma} H$ given by $(k,h)\mapsto (f(h)\inv k, h)$ is the inverse of $\alpha$, so $\alpha$ is bijective.
    
    If $h_1, h_2 \in H$ and $t_1, t_2 \in T$, then, on the one hand,
    \begin{align*}
        \alpha ((h_1, t_1)*_{\sigma}(h_2, t_2) ) &= \alpha (\sigma(t_1, t_2) h_1 h_2, t_1 t_2) = 
        ( f(t_1 t_2)\sigma(t_1, t_2) h_1 h_2, t_1 t_2)
    \end{align*}
    and, on the other hand,
    \begin{align*}
        \alpha ((h_1, t_1)) *_{\sigma'} \alpha ((h_2, t_2) ) &= ( f(t_1) h_1, t_1) *_{\sigma'} ( f(t_2) h_2, t_2) \\&= 
        (\sigma'(t_1, t_2) f(t_1) f(t_2) h_1 h_2, t_1 t_2).
    \end{align*}
    Comparing both, we conclude that $\alpha$ is an homomorphism if, and only if, $\mathrm{d}f = \sigma' \sigma\inv$.
\end{proof}

\begin{cor}\label{cor:self-equivalences-are-homomorphisms}
    The set of self-equivalences of an abelian group extension $K \xrightarrow{\iota} E \xrightarrow{\pi} H$ is in bijection with the set of homomorphisms from $H$ to $K$.
\end{cor}

\begin{proof}
    By Proposition \ref{prop:all-ext-are-cocycle}, we can assume our extension is the one corresponding to $K \times_\sigma H$, for some normalized symmetric $2$-cocycle $\sigma$. 
    The result follows from Proposition \ref{prop:coboundary} and the observation that $\mathrm{d}f = 0$ if, and only if, $f$ is a homomorphism. 
\end{proof}

We note that the Equation \eqref{eq:superpolarization} can be rewritten as $\tilde\beta = \mathrm{d}\eta$, where $\tilde\beta\from T\times T \to \FF^\times$ is the bicharacter given by
\begin{equation}\label{eq:def-beta-tilde}
    \forall a,b\in T,\quad \tilde\beta(a,b) \coloneqq (-1)^{p(a)p(b)}\beta(a,b).
\end{equation}
This gives us a connection between super-anti-automorphisms and equivalences of group extensions. 
The super-anti-automorphisms we will need are not, in general, superinvolutions. 
Instead, we will need super-anti-automorphisms that correspond to quadratic forms.

\begin{defi}
    Let $\mu\from T \to \FF^\times$ be a map. 
    We say that $\mu$ is a \emph{(multiplicative) quadratic form} on $T$ if $\mu(t\inv) = \mu (t)$ for all $t\in T$ and the map $\mathrm{d}\mu\from T\times T \to \FF^\times$ defined by
    $(a,b) \mapsto \mu(ab) \mu(a)\inv \mu(b)\inv$
    is a bicharacter, which is referred to as the \emph{polarization} of $\mu$.
\end{defi}

\begin{remark}
    In the literature, the additive notation is usually used in the context of quadratic forms. 
    In general, for a given commutative ring $\mathbb K$ and $\mathbb K$-modules $A$ and $B$, a \emph{quadratic map} $q\from A \to B$ is a map satisfying that $q(kx) = k^2 x$, for all $k\in \mathbb K$ and $x \in A$, and that the map $A \times A \to B$ defined by $(x,y) \mapsto q(x+y) - q(x) - q(y)$ is bilinear. 
    In the case of abelian groups (\ie, $\mathbb K = \ZZ$), the first condition is equivalent to $q(-x) = q(x)$, justifying our nomenclature.
    % notion of \emph{quadratic map} is usually discussed with additive notation In the presence of the bicharacter condition, the condition $\mu(t\inv) = \mu(t)$ is equivalent to $\mu(t^n) = \mu(t)^{n^2}$ for all $t\in T$, which justifies the nomenclature.
\end{remark}

\begin{ex}\label{ex:quadratic-form-polarization-parity}
    Let $\mu_0\from T \to \FF^\times$ be given by $\mu_0(t) = 1$ for all $t\in T^+$ and $\mu_0(t) = i$ for all $t\in T^-$. 
    It is clear that $\mu_0(t\inv) = \mu_0(t)$. 
    Also, we have that $\mu_0(ab) \mu_0(a)\inv \mu_0(b)\inv = (-1)^{p(a)p(b)}$, which is a bicharacter. 
    This quadratic form determines an anti-isomorphism $\D \to \D\sop$, $X_t\mapsto \mu_0(t)\overline{X_t}$, which shows that $\D\sop$ is isomorphic to $\D^{\mathrm{op}}$.
\end{ex}

% If $\eta$ determines a super-anti-isomorphism of $\D$, it is not necessarily a quadratic form. 
% Equation \eqref{eq:superpolarization} tell us that the bicharater condition will be satisfied for the bicharacter $\tilde\beta$ defined by $\tilde \beta (a, b) \coloneqq (-1)^{p(a) p(b)} \beta(a, b)$, but the other condition may fail. 

It will be helpful to consider not only super-anti-automorphisms but also antiautomorphisms on $\D$ (considered as an algebra).

\begin{prop}\label{prop:quadratic-form-involutions}
    Let $\mu\from T \to \FF^\times$ be a map and let $\psi\from \D \to \D$ be the linear map defined by 
    $\psi(X_t) = \mu(t) X_t$ for every $t\in T$ and $X_t \in \D_t$. 
    Then: 
    \begin{enumerate}[(i)]
        \item If $\mathrm{d}\mu = \tilde\beta$ (defined by Equation \eqref{eq:def-beta-tilde}), then: \\
        $\mu$ is a quadratic form $\iff$ $\mu(t)\in \{ \pm 1 \}$ for all $t \in T^+$ and $\mu(t)\in \{ \pm i \}$ for all $t \in T^-$ $\iff$ $\psi$ is a super-anti-automorphism such that $\psi^2$ is the parity automorphism on $\D$; \label{item:super-anti-auto-quadratic}
        \item If $\mathrm{d}\mu = \beta$, then:\\
        $\mu$ is a quadratic form $\iff$ $\mu(t) \in \{\pm 1\}$ for all $t\in T$ $\iff$ $\psi$ is
        an involution on $\D$. \label{item:anti-auto-quadratic}
    \end{enumerate}
\end{prop}

\begin{proof}
    From Equation \eqref{eq:superpolarization}, we have $\tilde\beta (t, t\inv) = \mu (tt\inv) \mu(t)\inv \mu(t\inv)\inv$, which simplifies to $(-1)^{p(t)} = \mu(t)\mu(t\inv)$. 
    Therefore $\mu(t\inv) = \mu(t)$ if, and only if, $\mu(t)^2 = (-1)^{p(t)}$, proving \eqref{item:super-anti-auto-quadratic}.

    Item \eqref{item:anti-auto-quadratic} follows from \eqref{item:super-anti-auto-quadratic} once we consider $\D$ as an algebra, \ie, if we consider $p$ to be the trivial homomorphism.
    % First note that, as a particular case of Proposition \ref{prop:superpolarization}, $\psi$ is an antiautomorphism if, and only, if 
    % %
    % \begin{equation}\label{eq:polarization}
    %     \forall a,b\in T, \quad \beta(a,b) = \mu(ab) \mu(a)\inv \mu(b)\inv.
    % \end{equation}
    % %
    % Then $1 = \beta(t, t\inv) = \mu (tt\inv) \mu(t)\inv \mu(t\inv)\inv$, hence $\mu(t\inv) = \mu(t)\inv$. 
    % Therefore we have that $\mu(t\inv) = \mu(t)$ if, and only if, $\mu(t)^2 = 1$, proving (i).
\end{proof}




% even though Equation \eqref{eq:superpolarization}
% Let $\tilde\beta\from T\times T \to \FF^\times$ be the bicharacter given by $\tilde \beta (a, b) \coloneqq (-1)^{p(a) p(b)} \beta(a, b)$. 
% Despite of Equation \eqref{eq:superpolarization} being the special case of Equation \ref{eq:quadratic-form} for $\xi = \tilde\beta$ and $\mu = \eta$, not every super-anti-automorphism on $\D$ corresponds to a quadratic form. 
% But the ones that do correspond to quadratic forms are of special interest. 

% It will be helpful to regard $\D$ as regular algebra and look to antiautomorphisms on it. 
% It is worth recalling that super-anti-automorphisms are in bijection with antiautomorphisms (see ??). 
% Note that, as a particular case of Proposition \ref{prop:superpolarization}, a map  $\psi\from \D \to \D$ defined by $\psi(X_t) = \mu(t) X_t$, %for all $t\in T$ and $X_t \in \D_t$.
% where $\mu\from T \to \FF^\times$ is an antiautomorphism if, and only, if 
% %
% \begin{equation}\label{eq:polarization}
%     \forall a,b\in T, \quad \beta(a,b) = \mu(ab) \mu(a)\inv \mu(b)\inv.
% \end{equation}

% \begin{prop}
%     Let $\mu\from T \to \FF^\times$ be a map and let $\psi\from \D \to \D$ be the linear map defined by 
%     $\psi(X_t) = \mu(t) X_t$ for every $t\in T$ and $X_t \in \D_t$. 
%     Then: 
%     \begin{enumerate}[(i)]
%         \item $\mu$ is a quadratic form with polarization $\beta$ $\iff$ $\mu(t) \in \{\pm 1\}$ for all $t\in T$ $\iff$ $\psi$ is
%         an involution (in the usual, nonsuper, sense);
%         \item $\mu$ is a quadratic form with polarization $\tilde\beta$ $\iff$ $\mu(t)\in \{ \pm 1 \}$ for all $t \in T^+$ and $\mu(t)\in \{ \pm i \}$ for all $t \in T^-$ $\iff$ $\psi$ is a super-anti-automorphism such that $\psi^2$ is the parity automorphism on $\D$.
%     \end{enumerate}
% \end{prop}
% It should be noted that 

\begin{prop}\label{prop:existence-involution}
    If $\beta$ takes values in $\{ \pm 1 \}$, then there are quadratic forms on $T$ whose polarizations are $\beta$ and $\tilde \beta$.
\end{prop}

\begin{proof}
    To show there is a quadratic form whose polarization is $\beta$, 
    consider the group $\barr T \coloneqq \frac{T}{\rad \beta}$ and let $t \mapsto \bar t$ be the natural projection on the quotient. 
    Also, we denote by $\barr \beta\from \barr T \times \barr T \to \FF^\times$ the bicharacter induced by $\beta$. 
    
    Since $\barr \beta$ is nondegenerate and takes values $\pm 1$, by Lemma \ref{lemma:beta-nondeg-elem-2-grp}, $\barr T$ is an elementary $2$-group. 
    Using again that $\barr \beta$ takes values $\pm 1$, there is an antiautomorphism $\psi$ on the graded division algebra associated to the pair $(\barr T, \barr \beta)$. 
    Let $\bar \mu\from T \to \FF^\times$ be the map determining $\psi$. 
    We then have $\bar\beta(\bar a, \bar b) = \bar\mu(\bar a \bar b) \bar\mu(\bar a)\inv \bar\mu(\bar b)\inv$ for all $a, b \in T$.
    Using that $\barr \beta$ is alternating and taking $\bar t = \bar a = \bar b$, we get $\bar \mu (\bar t)^2 = \bar \mu( \bar t^2) = \bar \mu ( \bar e) = 1$, for all $t\in T$. 
    Define $\mu\from T\to \FF^\times$ by $\mu (t) = \barr \mu (\bar t)$ for all $t\in T$. 
    Then $\mu$ takes values in $\{ \pm 1 \}$ and $\beta = \mathrm{d} \mu$, hence $\mu$ is a quadratic form with polarization $\beta$ by Proposition \ref{prop:quadratic-form-involutions}.
    
    To get a quadratic form with polarization $\tilde \beta$, simply multiply $\mu$ by the quadratic form $\mu_0$ of Example \ref{ex:quadratic-form-polarization-parity}.
\end{proof}

%
% In other words, $\mu$ is a quadratic form defined on $T$ with values in $\FF$ and its polarization is the bicharacter $\beta$. 
% If $\beta$ takes values $\pm 1$, we cannot guarantee that $\D$ admits a superinvolution, as seen in the case $Q(1) \iso \FF\ZZ_2$, but it always admits an involution:


% ??

% \begin{prop}
%     If $\mu$ is a quadratic form on $T$, then $\mu(t^n) = \mu(t)^{n^2}$ for all $t\in T$.
% \end{prop}

% It is important to note that even though Equation \eqref{eq:quadratic-form} reduces to Equation \eqref{eq:superpolarization} for $\mu = \eta$ and $\xi(a, b) = (-1)^{p(a)p(b)} \beta(a,b)$, it is not true, in general, that $\eta(t\inv) = \eta(t)$. 
% Actually, in the case $\eta$ determines a superinvolution, we have that $\eta (t\inv) = (-1)^{p(t)} \eta(t)$, so it is not a quadratic form if $\D\odd \neq 0$. 

% \begin{prop}
%     Let $\mu$ be a quadratic form on $T$ and let $\xi$ be its polarization.
%     \begin{enumerate}[(i)]
%         \item If $\xi(a,b) = \beta(a,b)$ for all $a,b\in T$, then $\mu$ determines an involution 
%     \end{enumerate}
% \end{prop}

% Sometimes it is useful to consider the superalgebra $\D$ as a regular algebra and look to antiautomorphisms on it. 
% It is worth recalling that super-anti-automorphisms are in bijection with antiautomorphisms (see ??). 
% Note that, as a particular case of Proposition \ref{prop:superpolarization}, a map  $\psi\from \D \to \D$ defined by $\psi(X_t) = \mu(t) X_t$, %for all $t\in T$ and $X_t \in \D_t$.
% where $\mu\from T \to \FF^\times$ is an antiautomorphism if and only if 
% %
% \begin{equation}\label{eq:polarization}
%     \forall a,b\in T, \quad \beta(a,b) = \mu(ab) \mu(a)\inv \mu(b)\inv.
% \end{equation}
%
% In other words, $\mu$ is a quadratic form defined on $T$ with values in $\FF$ and its polarization is the bicharacter $\beta$. 
% If $\beta$ takes values $\pm 1$, we cannot guarantee that $\D$ admits a superinvolution, as seen in the case $Q(1) \iso \FF\ZZ_2$, but it always admits an involution:
% , as we will see in Proposition \ref{prop:D-has-involution}. %, in the usual sense. 
% Let $\mu\from T \to \FF^\times$ be any map and consider $\psi\from \D \to \D$ defined by $\psi(X_t) = \mu(t) X_t$ for all $t\in T$ and $X_t \in \D_t$. 
% By Proposition \ref{prop:superpolarization}, considering $p$ being always zero, we get that $\psi$ is an antiautomorphism if, and only if,
% %
% \begin{equation}\label{eq:polarization}
%     \forall a,b\in T, \quad \beta(a,b) = \mu(ab) \mu(a)\inv \mu(b)\inv.
% \end{equation}

% will be useful for us to consider involutions on $\D$, in the usual sense (see Prop ??). 


% \begin{prop}\label{prop:D-has-involution}
%     If $\beta$ takes values in $\{ \pm 1 \}$, then $\D$ admits an involution.
% \end{prop}

% \begin{proof}
%     Consider the group $\barr T \coloneqq \frac{T}{\rad \beta}$ and let $\barr \beta\from \barr T \times \barr T \to \FF^\times$ be the bicharacter induced by $\beta$. 
%     Since $\barr \beta$ is nondegenerate and takes values $\pm 1$, by Lemma \ref{lemma:beta-nondeg-elem-2-grp}, $\barr T$ is an elementary $2$-group. 
%     Using again that $\barr \beta$ takes values $\pm 1$, there is an antiautomorphism on the graded division algebra associated to the pair $(\barr T, \barr \beta)$. 
%     Let $\bar \mu$ be the quadratic form associated to it. 
%     Putting $t = a = b$ on Equation \eqref{eq:polarization} and using that $\barr \beta$ is alternating, we get $\bar \mu (t)^2 = \bar \mu(t^2) = \bar \mu (e) = 1$, for all $t\in \barr T$. 
    
%     Take $q\from T \to \barr T$ to be quotient projection and define $\mu\from T\to \FF^\times$ by $\mu (t) = \barr \mu (q(t))$ for all $t\in T$. 
%     Then $\beta(a, b) = \barr \beta (q(a), q(b)) = \barr \mu(q(a)q(b)) \barr \mu(q(a))\inv \barr \mu(q(b))\inv = \mu(ab) \mu(a)\inv \mu(b)\inv$, so $\mu$ determines an antiautomorphism on $\D$. 
%     Since $\mu$ takes values in $\{ \pm 1 \}$, it determines an involution on $\D$.
% \end{proof}

% \begin{cor}
%     If $\D$ is even, then it admits a superinvolution. 
%     If $\D$ is odd, then it admits a super-anti-automorphism of order $4$.
% \end{cor}

% \begin{proof}
%     Given an involution $\psi\from \D \to \D$, we can define $\vphi\from \D \to \D$ by $\vphi(d) = \psi(d)$ if $\D$ is even and $\vphi(d) = i\psi (d)$ if $d$ is odd. 
%     It is easy to see that $\vphi$ is a super-anti-automorphism (compare with ??) and that it has the desired order.
% \end{proof}
 
% We will now explore Equations \eqref{eq:superpolarization} and \eqref{eq:polarization} under a different perspective. 
% Note that, in both cases, what we have in the right hand side is a bicharacter on $T$. 



% As a consequence of Proposition \ref{prop:D-has-involution}, if $\D$ is odd, we always have that $\D$ admits a super-anti-automorphism of order $4$. 
% But it is harder to get superinvolutions: 
% Now let us go back to discuss superinvolutions:


% If we put $a = b = t$ in Equation \eqref{eq:superpolarization}, since $\beta (t, t) = 1$, we get
% %
% \begin{equation}%\label{eq:eta-t-square}
%     \forall t\in T, \quad \eta (t)^2 = (-1)^{|t|} \eta(t^2).
% \end{equation}
%
% As we are going to see, this implies that we cannot have superinvolutions on a finite dimensional graded division superalgebra that is odd and simple as superalgebra.%  allow us to have In particular, if we want $\vphi_0$ to be a superinvolution, we need $\eta (t^2) = (-1)^{|t|}$, for every $t\in T$.

% \begin{lemma}
%     Suppose $T = \supp \D$ is an elementary $2$-group and let $\vphi_0\from \D \to \D$ be a super-anti-automorphism. 
%     If $\D$ is even, then $\vphi_0$ is a superinvolution, but
%     if $\D$ is odd, $\vphi_0$ has order $4$.
% \end{lemma}

% \begin{proof}
%     First of all, note that $\eta (e) = 1$. 
%     Let $t\in T$.  
%     If $t$ is even, Equation \eqref{eq:eta-t-square} implies $\eta(t)^2 = \eta (t^2) = \eta(e) = 1$, so  $\eta(t) \in \{ \pm 1 \}$. 
%     If $\D\odd = 0$, this means $\vphi_0^2 = \id$. 
%     Now, if $t$ is odd, Equation \eqref{eq:eta-t-square} implies $\eta(t)^2 = -\eta (t^2) 1 = -1$, hence $\eta(t) \in \{ \pm \sqrt{-1} \}$. 
%     Therefore, if $\D\odd \neq 0$, $\vphi_0$ has order $4$.
% \end{proof}
% Sometimes it will be useful to consider the superalgebra $\D$ as a regular algebra and look to the involutions on it. 
% Clearly, Proposition \ref{prop:superpolarization} can also be applied to this case.

% Nevertheless, Proposition ?? below tell us the case where we have a super-anti-automorphisms that is not a superinvolution is still of interest to us.
% , like the supertranspose. 
% The same is true for 

We are now in position to apply these concepts and results to our original problem. 
% Given a graded division superalgebra $\D$ associated to $(T, \beta)$, we want to refine the grading on $\D \times \D\sop$ to a division grading such that the exchange superinvolution preserves degrees. 
% In the construction we will show, the support of the new grading will be the group $\widetilde T \coloneqq \{ \pm 1 \} \times_\sigma T$, where $\sigma\from T\times T \to \{\pm 1\}$ is the bicharacter given by $\sigma(a,b) = (-1)^{p(a)p(b)}$ for all $a,b \in T$. 
% We will denote by $\pi\from \widetilde T \to T$ the projection on the second factor.

\begin{lemma}\label{lemma:tildeT-finally}
    Suppose $\beta$ takes values in $\pmone$ and let $\sigma\from T\times T \to \pmone$ be the $2$-cocycle given by $\sigma(a,b) \coloneqq (-1)^{p(a)p(b)}$. 
    The group extensions corresponding to $\pmone \times_{\tilde\beta} T$ and $\pmone \times_\sigma T$ are both equivalent to the extension of Example 
    \ref{ex:main-extension}. 
    % Further, $\pmone \times_\sigma T$ is isomorphic to the subgroup of $\{\pm 1, \pm i\} \times T$ given by $\big(\pmone \times T^+\big) \cup \big(\{\pm i\} \times T^-\big)$.
\end{lemma}

\begin{proof}
    By Proposition \ref{prop:existence-involution}, there is a map $\mu\from T \to \{\pm 1\}$ such that $\beta = \mathrm{d}\mu$, hence, using Proposition \ref{prop:coboundary}, the group extensions corresponding to $\pmone \times_{\tilde\beta} T$ and $\pmone \times_\sigma T$ are equivalent. 
    
    We can consider the $2$-cocycle $\sigma$ as admitting values in $\{\pm 1, \pm i\}$. 
    We then have $\pmone \times_\sigma T \subseteq \{\pm 1, \pm i\} \times_\sigma T$. 
    But then we can use the quadratic form $\mu_0$ from Example \ref{ex:quadratic-form-polarization-parity} to conclude that, since $\sigma = \mathrm{d} \mu_0$, the extension $\{\pm 1, \pm i\} \to \{\pm 1, \pm i\} \times_\sigma T \to T$ is equivalent to the trivial extension $\{\pm 1, \pm i\} \to \{\pm 1, \pm i\} \times T \to T$ via the isomorphism $\alpha\from \{\pm 1, \pm i\} \times_\sigma T \to \{\pm 1, \pm i\} \times T$ given by $\alpha(\lambda, t) = (\mu_0(t) \lambda, t)$. 
    Following this isomorphism, we see that the image of $\pmone \times_\sigma T$ is precisely the group extension of Example \ref{ex:main-extension} and we get an equivalence if we restrict $\alpha$ accordingly.
\end{proof}

% The next result show us Our strategy consists in start with a graded division superalgebra $\D$ with $\beta$ taking values in $\{ \pm 1 \}$. 
% By Proposition \ref{prop:refinement-DxDsop} below, we can, then, refine the grading on $\D \times \D\sop$ to a division grading such that the exchange superinvolution preserves degree. 
% The refinement 





% If $\D$ is a graded division superalgebra with $\beta$ taking values in $\{ \pm 1 \}$, we can refine the 
% Then the grading on $\D \times \D\sop$ can be refined to a division grading such that the exchange superinvolution $\vphi$ preserves degree.

% \begin{prop}\label{prop:refinement-DxDsop}
%     Let $\D$ be a graded division superalgebra with support $T$ and $\beta$ taking values in $\{ \pm 1 \}$. 
%     Consider $\mc E \coloneqq \D \times \D\sop$ with its natural $T$-grading $\Gamma\colon \mc E = \bigoplus_{t\in T} \D_t \times \overline{\D_t}$ and let $\vphi$ be the exchange superinvolution on $\mc E$. 
%     Then there is a division grading $\widetilde \Gamma$ on $(\mc E, \vphi)$ by $\widetilde T$ such that $\Gamma = {}^\pi\widetilde \Gamma$, \ie, $\Gamma$ is the coarsening of $\widetilde \Gamma$ by $\pi$. 
%     Moreover, if $\Gamma'$ is another division grading on $(\mc E, \vphi)$ by an abelian group $T'$ such that $\Gamma = {}^{\pi'}\Gamma'$ for some homomorphism $\pi'\from T' \to T$, then there is a unique isomorphism $\alpha\from T \to  T'$ such that $\pi = \pi' \alpha$ and $\Gamma' = {}^\alpha \widetilde \Gamma$.
    
%     % , let $\mc E \coloneqq \D \times \D\sop$ and $\vphi$ be the exchange superinvolution on $\mc E$. 
%     % The grading on $\mc E$ can be refined to a division grading such that $\vphi$ preserves degrees if, and only if, $\beta$ takes values $\pm 1$. 
%     % % If $\beta$ takes values $\pm 1$, the grading on $\D \times \D\sop$ can be refined to a division grading such that the exchange superinvolution preserves degree. 
%     % % if, and only if, $\beta$ takes values $\pm 1$
%     % Every such refinement has support isomorphic to $\widetilde T \coloneqq \{ \pm 1 \}\times T$ with product
%     % % and suppose there is a super-anti-automorphism $\psi$ on $\D$ preserving degrees. 
%     % % Then the grading on $\D \times \D\sop$ can be refined to a division grading such that the exchange superinvolution $\vphi$ preserves degree.
% \end{prop}

% \begin{prop}\label{prop:refinement-DxDsop}
%     Let $\D$ be a graded division superalgebra associated to $(T, \beta, p)$.  
%     Consider $\mc E \coloneqq \D \times \D\sop$ with its natural $T$-grading $\Gamma\colon \mc E = \bigoplus_{t\in T} \D_t \times \overline{\D_t}$ and let $\vphi$ be the exchange superinvolution on $\mc E$. 
%     There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$. 
%     If $\widetilde \Gamma$ is a such grading and $\widetilde T$ is its support, then there are group homomorphisms $\tilde \pi\from \widetilde T \to T$ and $\alpha\from \widetilde T \to \{ \pm 1\} \times_\sigma T$, where $\sigma$ is the bicharater defined by $\sigma(a,b) = (-1)^{p(a)p(b)}$, such that $\Gamma = {}^{\tilde\pi}\widetilde \Gamma$ and $\pi_\sigma \alpha = \tilde \pi$.
% \end{prop}

% \begin{thm}\label{thm:refinement-DxDsop}
%     Let $\D$ be a graded division superalgebra associated to $(T, \beta, p)$.  
%     Consider $\mc E \coloneqq \D \times \D\sop$ with its natural $T$-grading $\Gamma\colon \mc E = \bigoplus_{t\in T} \D_t \times \overline{\D_t}$ and let $\vphi$ be the exchange superinvolution on $\mc E$. 
%     There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$. 
%     If this is the case, we have the following:
%     % and $\widetilde T$ is its support, then:
    
%     % Then:
%     \begin{enumerate}[(i)]
%         % \item There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$; \label{item:refinement-iff-pmone} 
        
%         \item %$\widetilde T$ fits into
%         If $\Delta$ is such a refinement, then there is a unique group extension $\{ \pm 1 \} \xrightarrow{\iota} E \xrightarrow{\pi} T$ such that $\supp \Delta = E$ and ${}^{\pi} \Delta = \Gamma$; \label{item:there-is-extension}
        
%         \item This group extension is equivalent to the one of Example \ref{ex:main-extension}; \label{item:equivalent-extension-example}
%         %determined by the $2$-cocycle $\sigma(a,b) \coloneqq (-1)^{p(a) p(b)}$, for all $a,b\in T$; 
        
%         \item The set of all refinements $\Delta$ such that $\supp \Delta = E$ and ${}^\pi \Delta = \Gamma$ is in bijection with the group homomorphisms from $T$ to $\{ \pm 1 \}$. \label{item:number-of-extensions}
%     \end{enumerate}
%     % There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$. 
%     % If $\widetilde \Gamma$ is a such grading and $\widetilde T$ is its support, then there is a unique group extension $0 \to \{ \pm 1 \} \xrightarrow{\iota} \widetilde T \xrightarrow{\pi} T \to 0$ such that ${}^\pi \widetilde \Gamma = \Gamma$, and this extension is equivalent to the one given by the $2$-cocycle $\sigma$ given by $\sigma(a,b) = (-1)^{p(a) p(b)}$. 
%     % Moreover, the set of all gradings corresponding to $0 \to \{ \pm 1 \} \xrightarrow{\iota} \widetilde T \xrightarrow{\pi} T \to 0$ is in bijection with its self-equivalences.
% \end{thm}

\begin{thm}\label{thm:refinement-DxDsop}
    Let $\D$ be a graded division superalgebra associated to $(T, \beta, p)$.  
    Consider $\mc E \coloneqq \D \times \D\sop$ with its natural $T$-grading $\Gamma\colon \mc E = \bigoplus_{t\in T} \D_t \times \overline{\D_t}$ and let $\vphi$ be the exchange superinvolution on $\mc E$. 
    There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$. 
    If this is the case, let $\Delta$ be such a refinement, associated to $(T_\Delta, \beta_\Delta, p_\Delta, \eta_\Delta)$. 
    Then: % we have the following:
    % and $\widetilde T$ is its support, then:
    %
    \begin{enumerate}[(i)]
        % \item There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$; \label{item:refinement-iff-pmone} 
        
        \item %$\widetilde T$ fits into
        $T_\Delta$ fits into a unique group extension $\{ \pm 1 \} \xrightarrow{\iota} T_\Delta \xrightarrow{\pi} T$ such that ${}^{\pi} \Delta = \Gamma$; \label{item:there-is-extension}
        
        \item This group extension is equivalent to the one of Example \ref{ex:main-extension}; \label{item:equivalent-extension-example}
        %determined by the $2$-cocycle $\sigma(a,b) \coloneqq (-1)^{p(a) p(b)}$, for all $a,b\in T$; 
        \item $\beta_\Delta = \beta \circ (\pi \times \pi)$ and $p_\Delta = p \circ \pi$; \label{item:beta-and-p-delta}
        \item If $\tilde \Delta$ is another refinement with $\supp \tilde \Delta = T_\Delta$ and ${}^\pi \tilde \Delta = \Gamma$, then there is a unique self-equivalence $\alpha$ of $\{ \pm 1 \} \xrightarrow{\iota} T_\Delta \xrightarrow{\pi} T$ such that $\tilde \Delta = {}^\alpha \Delta$. 
        Moreover, $\eta_{\tilde \Delta} = \eta \circ \alpha$. \label{item:number-of-extensions}
    \end{enumerate}
    %  
    % Also, 
    % %
    % \begin{enumerate}[(iv)]  
    %     \item The set of all refinements $\Delta$ such that $\supp \Delta = E$ and ${}^\pi \Delta = \Gamma$ is in bijection with the group homomorphisms from $T$ to $\{ \pm 1 \}$. \label{item:number-of-extensions}
    % \end{enumerate}
    % There is a division grading on $(\mc E, \vphi)$ refining $\Gamma$ if, and only if, $\beta$ takes values in $\{ \pm 1 \}$. 
    % If $\widetilde \Gamma$ is a such grading and $\widetilde T$ is its support, then there is a unique group extension $0 \to \{ \pm 1 \} \xrightarrow{\iota} \widetilde T \xrightarrow{\pi} T \to 0$ such that ${}^\pi \widetilde \Gamma = \Gamma$, and this extension is equivalent to the one given by the $2$-cocycle $\sigma$ given by $\sigma(a,b) = (-1)^{p(a) p(b)}$. 
    % Moreover, the set of all gradings corresponding to $0 \to \{ \pm 1 \} \xrightarrow{\iota} \widetilde T \xrightarrow{\pi} T \to 0$ is in bijection with its self-equivalences.
\end{thm}


\begin{proof}
    We claim that all division gradings on $(\mc E, \vphi)$ refining $\Gamma$ must have the same set of subspaces of $\mc E$ as their homogeneous components. 
    Indeed, for each $t\in T$, let $\mc E_t$ denote the homogeneous component of degree $t$ of $\Gamma$. 
    Clearly, $\mc E_t$ is $2$-dimensional and $(X_t, \overline{X_t})$ and $(X_t, -\overline{X_t})$ are eigenvectors of $\vphi$, associated to the eigenvalues $1$ and $-1$, respectively. 
    It follows that the eigenspaces of $\vphi \restriction_{\mc E_t}$ are $1$-dimensional and, hence, $(X_t, \overline{X_t})$ and $(X_t, -\overline{X_t})$ must be homogeneous in any grading $\Delta$ on $(\mc E, \vphi)$ refining $\Gamma$. 
    If $\Delta$ is a division grading, all the components are $1$-dimensional, so the components must be $\mc E_{(\delta, t)} \coloneqq \FF (X_t, \delta \overline{X_t})$, for $t\in T$ and $\delta \in \pmone$.
    
    % the eigenspaces of $\vphi \restriction_{\mc E_t}$ associated to $1$ and $-1$ are both one dimensional, spanned by $(X_t, \overline{X_t})$ and $(X_t, -\overline{X_t})$, respectively. 
    % It follows that $(X_t, \overline{X_t})$ and $(X_t, -\overline{X_t})$ must be homogeneous in any grading on $(\mc E, \vphi)$ refining $\Gamma$. 
    % If such refinement is a division grading, the components must be $1$-dimensional, so the components must be the 
    
    % Hence on any division grading on $(\mc E, \vphi)$ refining the natural $T$-grading on $\mc E$, these eigenspaces have to be the homogeneous components. 
    % We will denote the subspace generated by $(X_t, \delta\overline{X_t})$, for $\delta \in \{ \pm 1 \}$, by $\mc E_{(\delta, t)}$. 
    % Clearly, $\mc E$ is the direct sum of all subspaces of this form. 
    
    Now, for all $a, b \in T$ and $\delta_1, \delta_2 \in \{ \pm 1 \}$, we have:
    %
    \begin{align*}
        (X_{a}, \delta_1 \overline{X_{a}})(X_{b}, \delta_2 \overline{X_{b}}) &= (X_{a} X_{b}, \delta_1 \delta_2 \overline{X_{a}} \,\overline{X_{b}}) \\
        &= (X_{a} X_{b}, \delta_1 \delta_2 (-1)^{p(a)p(b)} \overline{X_{b}X_{a}})\\ 
        &=(X_{a} X_{b}, \delta_1 \delta_2 (-1)^{p(a)p(b)} \beta(a, b) \overline{X_{a} X_{b}})\\
        &= (X_{a} X_{b}, \delta_1 \delta_2 \tilde\beta (a,b) \overline{X_{a} X_{b}}).
    \end{align*}
    %
    On the one hand, if $\beta(a, b) \neq \pm 1$ for some $a,b \in T$, the direct sum decomposition $\mc E = \bigoplus \mc E_{(\delta, t)}$ not a grading of $\mc E$ as a superalgebra. 
    On the other hand, if $\beta$ takes values in $\{ \pm 1 \}$, it follows that $\mc E_{(\delta_1, a)} \mc E_{(\delta_2, b)} = \mc E_{(\delta_1 \delta_2 \tilde\beta (a,b), ab)}$. 
    Therefore we have a grading by the group $\{ \pm 1\} \times_{\tilde\beta} T$. 
    Let us denote this grading by $\Delta_0$. 
    % If $\pmone \xrightarrow{\tilde\iota} \{ \pm 1\} \times_{\tilde\beta} T \xrightarrow{\tilde\pi} T$ is the extension correponding to $\{ \pm 1\} \times_{\tilde\beta} T$, then it is clear that ${}^{\tilde\pi}\Delta_0 = \Gamma$. 
    % Note that, by Lemma ??, this group extension is equivalent to the one in Example \ref{ex:main-extension}.
    
    We will now proceed to prove \eqref{item:there-is-extension}. 
    Recall that, for a division grading, its support is its universal group (Lemma \ref{lemma:div-grd-unvrsl-grp}). 
    Since $\Gamma$ is a coarsening of $\Delta$, by the universal property of the universal group, there is a unique map $\pi\from E\to T$ such that ${}^{\pi}\widetilde \Gamma = \Gamma$. 
    Also, since $|\widetilde T| = 2 |T|$, we must have $|\ker \pi| = 2$, and therefore there is a unique monomorphism $\iota\from \pmone \to \widetilde T$ with $\iota(\pmone) = \ker \pi$. 
    Note that in the particular case $\Delta = \Delta_0$, we get the extension associated to $\pmone \times_{\tilde\beta} T$.
    
    We will also use the universal property of the universal group to prove items \eqref{item:equivalent-extension-example} and \eqref{item:number-of-extensions}.
    Let $\Delta$ and $\Delta'$ be division gradings on $(\mc E, \vphi)$ refining $\Gamma$, with the correponding extensions being $\{ \pm 1 \} \xrightarrow{\iota} E \xrightarrow{\pi} T$ and $\{ \pm 1 \} \xrightarrow{\iota'} E' \xrightarrow{\pi'} T$, respectively. 
    Since they have the same components, $\Delta$ is a (improper) refinement of $\Delta'$, so there is a unique group homomorphism $\alpha\from E \to E'$ such that ${}^\alpha \Delta = \Delta'$. 
    % Exchanging the roles of $\Delta$ and $\Delta'$ we have that $\alpha$ is an isomorphism. 
    Also, by the uniqueness of $\pi$, we have $\pi = \pi' \alpha$ and, by the uniqueness of $\iota'$, we have $\iota' = \alpha \iota$. 
    We conclude not only that the extensions are equivalent, but also that $\alpha$ is the unique equivalence between them such that ${}^\alpha \Delta = \Delta'$. 
    
    Putting $\Delta' = \Delta_0$, we obtain item \eqref{item:equivalent-extension-example} follows from Lemma \ref{lemma:tildeT-finally}. 
    
    To prove \eqref{item:number-of-extensions}, 
    suppose $\Delta$ and $\Delta'$ correspond to the same group extension. 
    Then there is a unique self-equivalence $\alpha$ of $\{ \pm 1 \} \xrightarrow{\iota} E \xrightarrow{\pi} T$ such that ${}^\alpha \Delta = \Delta'$. 
    Conversely,
    note that for every self-equivalence $\alpha$ of $\{ \pm 1 \} \xrightarrow{\iota} E \xrightarrow{\pi} T$, we have that the grading ${}^\alpha \Delta$ also corresponds to this extension, since $\pi\alpha = \pi$. 
    So the gradings corresponding to the extension $\{ \pm 1 \} \xrightarrow{\iota} E \xrightarrow{\pi} T$ are in bijection with its self-equivalences. 
    % Now Corollary \ref{cor:self-equivalences-are-homomorphisms} concludes the proof.
\end{proof}
    % Since this extension is equivalent to the one corresponding to $\pmone \times_{\tilde\beta} T$, we can apply Corollary \ref{cor:self-equivalences-are-homomorphisms} to conclude that the self-equivalences are in bijection with group homomorphisms from $T$ to $\pmone$, concluding the proof.
    % 
    % 
    % 
    % Since the direct sum decomposition of $\widetilde \Gamma$ must be the same of $\Delta$, let $\alpha\from \widetilde T \to \pmone \times_{\tilde\beta} T$ be the bijection such that the component of degree $\tilde t$ with respect to $\widetilde T$ is the component of degree $\alpha(\tilde t)$ with respect to $\Delta$. 
    % In other
    % 
    % the identity map on $\mc E$ an equivalence between 
    % Recall that the support of a division grading is its universal group (Lemma ??). 
    % For each $\tilde t\in \widetilde T$, there are unique $\delta \in \pmone$ and $t\in T$ such that the component of $\tilde t$ with respect to $\widetilde \Gamma$ is $\mc E_{(\delta, t)}$. 
    % Let us define 
    
    % Let $\pi\from \widetilde T \to T$ be defined by $\pi(\tilde t) = t$ and $\alpha\from \widetilde T \to \pmone \times_{\tilde\beta} T$  be defined by $\alpha(\tilde t) = (\delta, t)$. 
    
    % We claim that $\pi$ is a group homomorphism. 
    % Indeed, given $\tilde t_1, \tilde t_2 \in \widetilde T$, since the component of $\tilde t_1, \tilde t_2$ is nonzero, there is a $t\in T$ such that $\pi(\tilde t_1, \tilde t_2) = t$ and, since $\Gamma$ is a grading, $t = \pi(\tilde t_1) \pi(\tilde t_2)$. 
    % Clearly, ${}^{\pi}\widetilde \Gamma = \Gamma$. 
    % On the one hand, if there is a group homomorphism $\pi'\from \widetilde T \to T$ such that ${}^{\pi'}\widetilde \Gamma = \Gamma$, then, clearly, we need $\pi'(\tilde t) = t$, so $\pi' = \pi$. 
    % % On the other hand, defining $\pi$ this formula , we have that, since $\widetilde T$ is the support of $\widetilde \Gamma$, $\pi$ is, indeed, a group homomorphism
    % Also, since $|\widetilde T| = 2 |T|$, we must have $|\ker \pi| = 2$, so there is a unique monomorphism $\iota\from \pmone \to \widetilde T$ with $\iota(\pmone) = \ker \pi$. 
    % This proves \eqref{item:there-is-extension}. 
    % Note that, for the particular case $\widetilde \Gamma = \Delta$, we have that this produces the group extension associated to $\tilde \beta$.
    
    % We now claim that $\alpha\from \widetilde T \to \pmone \times_{\tilde\beta} T$ is a group isomorphism. 
    % The proof it is a homomorphism is analogous to the proof $\pi$ is a homomorphism. 
    % Also, $\alpha$ is necessarily a bijection, since every component $\mc E_{(\delta, t)}$ also corresponds to a unique component of the grading $\widetilde \Gamma$. 
    % By definition, it is the only map such ${}^\alpha \widetilde\Gamma = \Delta$. 
    % The isomorphism $\alpha$ is an equivalence between the corresponding group extensions. 
    % In particular, given two gradings, there is a unique equivalence between the corresponding group extensions. 
    

    

    % % From this and the assumption that $\beta$ takes values in $\{ \pm 1 \}$, it follows that we can grade $\mc E$ by the group $\{ \pm 1\} \times_{\tilde\beta} T$ by defining the degree of $(X_t, \delta\overline{X_t})$ to be $(\delta, t)$, for all $t \in T$ and $\delta \in \{ \pm 1 \}$.
    
    % Using again that $\beta$ takes values in $\{ \pm 1 \}$, by Proposition ?? there is a quadratic form $\mu$ on $T$ whose polarization is $\beta$. 
    % Since $\mu$ takes values in $\{ \pm 1 \}$, it follows that $\beta$ is a $2$-coboundary, so by Proposition ??, there is an isomorphism from $\{ \pm 1 \} \times_{\tilde\beta} T$ to $\{ \pm 1 \} \times_{\sigma} T$ preserving the projection on $T$.
    
    
    
    % % Consider the automorphism $\theta\from \D \times \D\sop \to \D \times \D\sop$ given by $\theta (x, \bar y) = (\psi(y), \overline{\psi(x)})$. 
    % % Clearly, $\theta$ is preserves degrees and commutes with the exchange superinvolution. 
    % % Hence, by ??, it corresponds to a refinement of the grading on $(\D \times \D\sop, \psi)$. 
    % % Also, if $\eta\from T \to \FF^\times$ is the map corresponding to $\psi$, then $\theta(X_t, \overline{X_t}) = \eta(t) (X_t, \overline{X_t})$ and $\theta(X_t, -\overline{X_t}) = -\eta(t) (X_t, \overline{X_t})$, hence $(X_t, \overline{X_t})$ and $(X_t, -\overline{X_t})$ lie in different components. 
    % % Therefore each component have dimension at most $1$, completing the proof.
% \end{proof}

\begin{cor}\label{cor:old-item-iv}
    Under the conditions of Theorem \ref{thm:refinement-DxDsop}, the set of all refinements $\Delta$ such that $\supp \Delta = T_\Delta$ and ${}^\pi \Delta = \Gamma$ is in bijection with the group homomorphisms from $T$ to $\{ \pm 1 \}$.
\end{cor}

\begin{proof}
    It follows from item \eqref{item:number-of-extensions} and Corrolary \ref{cor:self-equivalences-are-homomorphisms}.
\end{proof}

It is worth emphasizing that all these refinements are nonisomorphic as graded superalgebras with superinvolution, but they are weakly isomorphic and also isomorphic as graded superalgebras. 
% The parameters are $(T_\Delta, \beta_\Delta, p_\Delta, \eta_\Delta \circ \alpha)$.
% This can be seen by looking on the parameters defining their equivalence class. 

% \begin{remark}
%     Note that quadratic forms could have been avoided if we decided to keep working with the group $\pmone \times_{\tilde\beta} T$. 
%     Nevertheless, the quadratic forms allowed us to to find a more explicit model for the extension, not depending on $\beta$.
% \end{remark}

% \begin{remark}
%     The refinement above could have been construct using the eigenspace decomposition of an automorphism on $\mc E$. 
%     Since $\beta$ takes values in $\{ \pm 1 \}$, there is a super-anti-automorphism $\psi\from \D \to \D$ of order form. 
%     Then the map $\Psi\from \mc E \to \mc E$ defined by $\Psi(x, \bar y) = (\psi (y), \overline{\psi(x)})$ is an automorphism of order $4$ commuting with the exchange superinvolution.
% \end{remark}

We will now present an example of such a refinement. 
Let $\D$ be $M(1,1)$ with the division grading by $T \coloneqq \ZZ_2 \times \ZZ_2$ determined by:
\begin{align*}
    \deg \begin{pmatrix}
        \phantom{.}1 & \phantom{-}0\phantom{.}\\
        \phantom{.}0 & \phantom{-}1\phantom{.}
    \end{pmatrix} = (\bar 0, \bar 0),\quad & \deg \begin{pmatrix}
        \phantom{.}0 & \phantom{-}1\phantom{.} \\
        \phantom{.}1 & \phantom{-}0\phantom{.}
    \end{pmatrix} = (\bar 0, \bar 1),\\
    \deg \begin{pmatrix}
        \phantom{.}1 & \phantom{-}0\phantom{.}\\
        \phantom{.}0 & -1\phantom{.}
    \end{pmatrix} = (\bar 1, \bar 0),\quad &
    \deg \begin{pmatrix}
        \phantom{.}0 & -1\phantom{.} \\
        \phantom{.}1 & \phantom{-}0\phantom{.}
    \end{pmatrix} = (\bar 1, \bar 1).
\end{align*}
%
%
% \begin{center}
%     \begin{tabular}{ c c }
%         $\deg \begin{pmatrix}
%         \phantom{.}1 & \phantom{-}0\phantom{.}\\
%         \phantom{.}0 & \phantom{-}1\phantom{.}
%         \end{pmatrix} = (\bar 0, \bar 0)$, & $\deg \begin{pmatrix}
%         \phantom{.}0 & \phantom{-}1\phantom{.} \\
%         \phantom{.}1 & \phantom{-}0\phantom{.}
%         \end{pmatrix} = (\bar 0, \bar 1)$,\\
%         \rule{0pt}{4ex}   
%         $\deg \begin{pmatrix}
%         \phantom{.}1 & \phantom{-}0\phantom{.}\\
%         \phantom{.}0 & -1\phantom{.}
%         \end{pmatrix} = (\bar 1, \bar 0)$, &
%         $\deg \begin{pmatrix}
%         \phantom{.}0 & -1\phantom{.} \\
%         \phantom{.}1 & \phantom{-}0\phantom{.}
%         \end{pmatrix} = (\bar 1, \bar 1)$.
%     \end{tabular}
% \end{center}
%
From Theorem \ref{thm:refinement-DxDsop}, we get a grading by the subgroup $E \coloneqq \big( \pmone \times \ZZ_2 \times \{ \bar 0 \} \big) \cup \big( \{ \pm i \} \times \ZZ_2 \times \{ \bar 1 \} \big)$ of $\{\pm 1, \pm i\} \times \ZZ_2 \times \ZZ_2$. 
Note that this group is isomorphic to $\ZZ_2 \times \ZZ_4$ via the homomorphism determined by $(1, \bar 1, \bar 0) \mapsto (\bar 1, \bar 0)$ and $(i, \bar 0, \bar 1) \mapsto (\bar 0, \bar 1)$. 

To construct this grading explicitly, we follow the proof of Theorem \ref{thm:refinement-DxDsop}. 
First, we get a grading by $\pmone \times_{\tilde\beta} T$ on $\D\times \D\sop$ given by $\deg (X_t, \delta \overline{X_t}) = (\delta, t)$, for all $\delta \in \pmone$ and $t\in T$. 
Then, to get a simpler model for the group, we follow the proof of Lemma \ref{lemma:tildeT-finally}, where we need to choose a quadratic form $\mu$ on $T$ whose polarization is $\beta$, which is equivalent to choosing an involution on $\D$ as a graded algebra. 
We can choose the involution to be the transposition, \ie, $\mu(\bar 0, \bar 0) = 1$, $\mu(\bar 0, \bar 1) = 1$, $\mu(\bar 1, \bar 0) = 1$ and $\mu(\bar 1, \bar 1) = -1$. 
We then get a grading by $\pmone \times_\sigma T$, where $\sigma(a,b) \coloneqq (-1)^{p(a)p(b)}$, given by $\deg (X_t, \delta \overline{X_t}) = (\mu(t) \delta, t)$, for all $\delta \in \pmone$ and $t\in T$. 
This can be transplanted to the groups $\big(\pmone \times T^+\big) \cup \big(\{\pm i\} \times T^-\big)$ and $\ZZ_2\times \ZZ_4$ via the explicit isomorphisms given in the proof of Lemma \ref{lemma:tildeT-finally} and above. 
To summarize:

\begin{ex}\label{ex:superalgebra-O}
    Let $\mc O$ denote the superalgebra $M(1,1) \times M(1,1)\sop$ endowed with the $\ZZ_2\times \ZZ_4$-grading determined by:
    %
    % We can refine the algebra the natural grading on $\D\times \D\sop$ by the division grading determined by:
    %
    \begin{align*}
        % -- 1st row --
        \deg \left(\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & \phantom{-}1\phantom{.}
        \end{pmatrix}, \overline{\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & \phantom{-}1\phantom{.}
        \end{pmatrix}}\right) = (\bar 0, \bar 0),\,&
        \deg \left(\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & \phantom{-}1\phantom{.}
        \end{pmatrix}, -\overline{\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & \phantom{-}1\phantom{.}
        \end{pmatrix}}\right) = (\bar 0, \bar 2),\\
        % -- 2nd row --
        \deg \left(\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & -1\phantom{.}
        \end{pmatrix}, \overline{\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & -1\phantom{.}
        \end{pmatrix}}\right) = (\bar 1, \bar 0),\,&
        \deg \left(\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & -1\phantom{.}
        \end{pmatrix}, -\overline{\begin{pmatrix}
            \phantom{.}1 & \phantom{-}0\phantom{.}\\
            \phantom{.}0 & -1\phantom{.}
        \end{pmatrix}}\right) = (\bar 1, \bar 2),\\
        % -- 3rd row --
        \deg \left(\begin{pmatrix}
            \phantom{.}0 & \phantom{-}1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}, \overline{\begin{pmatrix}
            \phantom{.}0 & \phantom{-}1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}}\right) = (\bar 0, \bar 1),\,&
        \deg \left(\begin{pmatrix}
            \phantom{.}0 & \phantom{-}1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}, -\overline{\begin{pmatrix}
            \phantom{.}0 & \phantom{-}1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}}\right) = (\bar 0, \bar 3),\\
        % -- 4th row --
        \deg \left(\begin{pmatrix}
            \phantom{.}0 & -1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}, \overline{\begin{pmatrix}
            \phantom{.}0 & -1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}}\right) = (\bar 1, \bar 3),\,&
        \deg \left(\begin{pmatrix}
            \phantom{.}0 & -1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}, -\overline{\begin{pmatrix}
            \phantom{.}0 & -1\phantom{.} \\
            \phantom{.}1 & \phantom{-}0\phantom{.}
        \end{pmatrix}}\right) = (\bar 1, \bar 1).
    \end{align*}
    %
    %
    % \setlength\tabcolsep{2pt}
    %  \begin{center}
    %  \begin{tabular}{c c}
    %  % -- 1st row --
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & \phantom{-}1\phantom{.}
    %  \end{pmatrix}, \overline{\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & \phantom{-}1\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 0, \bar 0),$&
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & \phantom{-}1\phantom{.}
    %  \end{pmatrix}, -\overline{\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & \phantom{-}1\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 0, \bar 2)$\\
    %  % -- 2nd row --
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & -1\phantom{.}
    %  \end{pmatrix}, \overline{\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & -1\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 1, \bar 0),$&
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & -1\phantom{.}
    %  \end{pmatrix}, -\overline{\begin{pmatrix}
    %   \phantom{.}1 & \phantom{-}0\phantom{.}\\
    %   \phantom{.}0 & -1\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 1, \bar 2)$\\
    %  % -- 3rd row --
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}0 & \phantom{-}1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}, \overline{\begin{pmatrix}
    %   \phantom{.}0 & \phantom{-}1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 0, \bar 1),$&
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}0 & \phantom{-}1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}, -\overline{\begin{pmatrix}
    %   \phantom{.}0 & \phantom{-}1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 0, \bar 3)$\\
    %  % -- 4th row --
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}0 & -1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}, \overline{\begin{pmatrix}
    %   \phantom{.}0 & -1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 1, \bar 3),$&
    %  $\deg \left(\begin{pmatrix}
    %   \phantom{.}0 & -1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}, -\overline{\begin{pmatrix}
    %   \phantom{.}0 & -1\phantom{.} \\
    %   \phantom{.}1 & \phantom{-}0\phantom{.}
    %  \end{pmatrix}}\right) = (\bar 1, \bar 1)$
    %  \end{tabular}
    %  \end{center}
    %
    Then $\mc O$ is an odd graded division superalgebra and the exchange superinvolution on it preserves degrees. 
    %  The natural grading can then be recovered by coarsening via the group homomorphism $\pi\from \ZZ_2\times \ZZ_4 \to \ZZ_2\times \ZZ_2$ given by $\pi( \bar k, \bar \ell) \coloneqq ( \bar k, \bar \ell)$, for all $k, \ell \in \ZZ$. 
    %  We will denote this graded-division superalgebra by $\mc O$.
\end{ex}

As we are going to see, $\mc O$ is of special importance among the odd graded division superalgebras with superinvolution of type $M\times M\sop$.

Of course, the construction of $\mc O$ depend on the choice of the involution on $\D$. 
By Corollary \ref{cor:old-item-iv}, there are $4$ different graded superalgebras with superinvolution we could end up with if we took different choices.

% \begin{itemize}
%     \item recall there are $4$ gradings isomorphic to $\mc O$ that are not isomorphic if we consider as algebras with involution;
%     \item we can describe then using automorphisms of $\mc O$.
% \end{itemize}

Recall that we can distinguish among the different types of superinvolution-simple superalgebras by their center (Proposition \ref{prop:types-of-SA-via-center}). 
In the case our superalgebra has a division grading, this information is captured by $\rad \beta$:

\begin{lemma}\label{lemma:types-of-D-via-rad-beta}
    Let $(D, \vphi_0)$ be a graded-division superalgebra with superinvolution associated to $(T, \beta, p, \eta)$.
    \begin{enumerate}[(i)]
        \item If $(D, \vphi_0)$ is of type $M$, then $\rad \beta = (\rad \beta) \cap T^+ = \{e\}$;
        \item If $(D, \vphi_0)$ is of type $M\times M\sop$, then $\rad \beta = (\rad \beta) \cap T^+ = \langle f \rangle$, where $f$ has order $2$ and $\eta(f) = -1$;
        \item If $(D, \vphi_0)$ is of type $Q\times Q\sop$, then $\rad \beta = \langle t_1 \rangle$, where $t_1 \in T^-$ has order $4$ and $\eta(t_1) = 1$, and $(\rad \beta) \cap T^+ = \langle f \rangle$, where $f = t_1^2$ and, hence, $\eta(f) = -1$. \qed
    \end{enumerate}
\end{lemma}

\begin{thm}
    Let $\D$ be a finite dimensional superinvolution-simple superalgebra endowed with an odd division grading. 
    Then $\D \iso \D' \otimes \D''$ as graded superalgebras with superinvolution, where $\D'$ is of type $M$ (and, hence, even) and
    \begin{enumerate}[(i)]
        \item if $\D$ is of type $M\times M\sop$, then $\D''$ is weakly isomorphic to $\mc O$, as in Example \ref{ex:superalgebra-O};
        \item if $\D$ is of type $Q\times Q\sop$, then $\D''$ is weakly isomorphic to $\FF\ZZ_4$, as in Example \ref{ex:FZ4-revisited}.
    \end{enumerate}
\end{thm}

\begin{proof}
    Let $\D$ be associated to $(T, \beta, p, \eta)$. 
    By Lemma \ref{lemma:types-of-D-via-rad-beta}, we can write $\rad \beta \cap T^+ = \{ e, f\}$, with $\eta(e) = 1$ and $\eta(f) = -1$. 
    
    Consider $\overline{T} = \frac{T}{\rad \beta}$ with its induced bicharacter $\bar \beta$. 
    Since $\bar\beta$ takes values in $\{\pm 1\}$ and it is nondegenerate, by Prop ?? we have that $\overline{T}$ is an elementary $2$-group. 
    %We claim that $T^+$ is also an elementary $2$-group. 
    Let $t\in T$. 
    We have that $\bar t^2 = \bar e \in \overline{T}$, so, since $t^2$ is even, $t^2 \in \{ e, f \}$. 
    If $t$ is even, then $\eta(t^2) = \eta(t)^2 = 1$, hence $t^2 = e$. 
    If $t$ is odd, then, $\eta(t^2) = -\eta(t)^2 = -1$, hence $t^2 = f$. 
    Note that, in particular, $T^+$ is an elementary $2$-group.
    
    If $\D \iso Q(n)$, let $t_1$ be an odd element in $\rad \beta$ and complete $\{f\}$ to a $\ZZ_2$-basis $\{f, t_2, \ldots, t_\ell \}$ of $T^+$. 
    Then $T$ is generated by $\{t_1, t_2, \ldots, t_\ell \}$ and this generating set give us an isomorphism $T \iso \ZZ_4 \times (\ZZ_2)^{\ell - 1}$. 
    Restricting $\beta$ and $\eta$ to $\ZZ_4$ and $(\ZZ_2)^{\ell - 1}$ we find $\D'$ and $\D''$, respectively.
    
    If $\D \iso M(m,n) \times M(m,n)\sop$, them there are no odd elements in $\rad \beta$ so, in particular, $p$ induces an homomorphism in $\overline{T}$. 
    Since $\bar \beta$ is nondegenerate, this homomorphism corresponds to a element $\bar {t_0} \in \overline T$ such that $\bar \beta (\bar {t_0}, \bar t) = (-1)^{p(t)}$. 
    We choose $t_0 \in T$ to be a preimage of $\bar {t_0}$ and choose $t_1$ to be any element in $T^-$. 
    Note that $t_0 \in T^+$ since $1 = \beta(\bar {t_0}, \bar {t_0}) = (-1)^{p(t_0)}$. 
    Again, since $T^+$ is an elementary $2$-group, complete $\{t_0, f\}$ to a $\ZZ_2$-basis $\{ t_0, f, t_2, \ldots, t_\ell \}$ of $T^+$. 
    Hence $\{ t_0, t_1, t_2, \ldots, t_\ell \}$ is a generating set for $T$ that gives us an isomorphism $T \iso \ZZ_2 \times \ZZ_4 \times (\ZZ_2)^{\ell - 1}$. 
    If, for some $i$, $2 \leq i \leq \ell$, we have $\beta(t_1, t_i)= -1$, replace $t_i$ for $t_it_0$ and so we have $\beta(t_1, t_it_0) = \beta(t_1, t_i) \beta(t_1, t_0) = +1$. 
    We can, then, assume that the sets $\{ t_0, t_1 \}$ and $\{ t_2, \ldots, t_\ell \}$ are orthogonal with respect to $\beta$.
    Restricting $\beta$ and $\eta$ to $\ZZ_2 \times \ZZ_4$ and to $(\ZZ_2)^{\ell - 1}$ we find $\D'$ and $\D''$, respectively.
\end{proof}


% Let $\mc U = \bigoplus_{g\in G} \mc U_g$ be a graded $\D$-module. 
% In general, $\mc U_g$ is not a $\D$-module, since if $d\in \D$ is a homogeneous element of degree $t\in T$, then $d\cdot \mc U_g \subseteq U_{tg}$. 

\section{$G$-gradings on superinvolution-simple superalgebras up to isomorphism}

In this section we will give a parametrization of the $G$-gradings on finite dimensional superinvolution-simple associative superalgebras and use it to classify them up to isomorphism. 

If not graded simple, then we are in the case $R = S\times S\sop$ with exchange superinvolution $\vphi$ and both $S$ and $S\sop$ are graded ideals. 
Then the grading on $S$ determines the grading on $R$, so we reduce this case to what we had before.

Let $R \coloneqq \End_\D (\U)$ and let $\vphi$ be a superinvolution on $R$. 
From Theorem \ref{thm:vphi-involution-iff-delta-pm-1}, $\vphi$ is determined by a pair $(\vphi_0, B)$, where $\vphi_0$ is a superinvolution on $\D$ and $B\from \U \times \U \to \D$ is a homogeneous $\vphi_0$-sesquilinear form on $\U$ such that $\overline B = \delta B$ with $\delta \in \{ \pm 1 \}$. 
From now on, suppose $(\D, \vphi_0)$ is associated to $(T, \beta, p, \eta)$ and let $g_0\in G^\#$ denote the degree of $B$. 

% In Section ??, we saw that the isomorphism class of $(\D, \vphi_0)$ can be described by $(T, \beta, p, \eta)$. 
Recall that the graded $\D$-supermodule $\U$ can be
written as a direct sum of its isotypic components % $\U_{gT} = \bigoplus_{h \in gT} \U_h$
and that isomorphism class is determined by the map $\kappa\from G^\# \to \ZZ_{\geq 0}$ defined by $\kappa (gT) = \dim_\D \U_{gT}$ (Subsection \ref{U-in-terms-of-GxZZ2}).

% described by a map $\kappa\from G^\#/T \to \ZZ_{\geq 0}$ with finite support. 
The presence of $B$ gives us further restrictions on $\kappa$. 
Since $B$ has degree $g_0$ and takes values in $\D$, if $B(\U_{g}, \U_{g'}) \neq 0$, then $g_0 g g' \in T$, for all $g, g' \in G^\#$. 
In terms of isotypic components, this means that, given $\U_{g T}$, there is at most one isotypic component $\U_{g'T}$ such that $B(\U_{gT}, \U_{g'T}) \neq 0$, namely, $\U_{g_0\inv g\inv T}$. 
% we can only have $B(\U_{g T}, \U_{g' T}) \neq 0$ if $\bar {g'} = \bar g_0\inv \bar g\inv \in G^\#/T$. 
Since $B$ is nondegenerate, we have that $\U_{g T}$ and $\U_{g_0\inv g\inv T}$ are in duality via $B$ and, in particular, $\kappa(g T) = \kappa(g_0\inv g \inv T)$. 

Note that $\U_{g T} = \U_{g_0\inv g\inv T}$ if, and only if, $g_0 g^2 \in T$. 
In this case, we say that $\U_{gT}$ is a \emph{self-dual component}. 
Otherwise, we say that $\U_{gT}$ and $\U_{g_0\inv g\inv T}$ form a \emph{pair of dual components}.

\begin{lemma}\label{lemma:self-dual-components}
    Let $\U_{gT}$ be a self-dual isotypic component of $\U$. 
    The number 
    \begin{equation}
        \mu_{gT} \coloneqq (-1)^{|g|} \eta(g_0 g^2)\delta
    \end{equation}
    % $\mu_{gT} = (-1)^{|g|} \eta(g_0 g^2) \delta \in \pmone$
    does not depend on the choice of the representative $g$ for the coset $gT$. 
    If $\mu_{gT} = +1$, then there is a homogeneous $\D$-basis on $\U_{gT}$ such that $\Phi = I$. 
    If $\mu_{gT} = -1$, then there is a homogeneous $\D$-basis on $\U_{gT}$ such that $\Phi = I$. 
\end{lemma}

\begin{proof}
    To show that $\mu_{gT}$ does not depend on the choice of $g$, let $t' \in T$ and consider $g' \coloneqq gt'$. 
    Then 
    \begin{align*}
        (-1)^{|g'|} \eta(g_0 (g')^2) &= (-1)^{|gt'|} \eta(g_0 g^2 (t')^2) = (-1)^{|g| + |t'|} \eta(g_0 g^2 (t')^2) \\
        &= (-1)^{|g| + |t'|} \sign{g_0 g^2}{(t')^2} \beta(g_0 g^2, (t')^2)\eta(g_0 g^2) \eta((t')^2)\\
        &= (-1)^{|g| + |t'|} (-1)^{|g_0 g^2| \bar{0} } \beta(g_0 g^2, t')^2 \eta(g_0 g^2) \eta((t')^2) \\
        &= (-1)^{|g| + |t'|} \eta(g_0 g^2) \eta((t')^2) \\ 
        &= (-1)^{|g| + |t'|} (-1)^{|t'|} \eta(g_0 g^2) \eta(t')^2 = (-1)^{|g|} \eta(g_0 g^2)
    \end{align*}

    Now lets us fix a representative $g\in G$ for the coset $gT$. 
    We have that $\U_g \subseteq \U_{gT}$ is a $\FF$-vector space and a $\FF$-basis for $\U_g$ is a $\D$-basis for $\U_{gT}$. 
    Let $t=g_0 g^2$ and choose $X_t \in \D_t$. 
    We define $B'\from \U_g \times \U_g \to \FF$ by $B'(u,v) \coloneqq B(u,v) X_t\inv$, for all $u, v \in \U_g$. 
    In other words, $B(u,v) = B'(u,v) X_t$ and, hence, $B'$ determines $B\restriction_{\U_{gT} \times \U_{gT}}$. 
    It follows that $B'(u, \U_g) = 0$ implies that $u=0$, \ie, $B'$ is a nondegenerate bilinear form on $\U_g$. 
    Also, 
    \begin{alignat*}{3}
        \overline{B} (u, v) &= \sign{u}{v} \vphi_0\inv( B(v, u) )
        &&= \sign{g}{g} \vphi_0\inv( B'(v, u)X_t )\\
        &= (-1)^{|g|} B'(v, u) \vphi_0\inv(X_t)
        &&= (-1)^{|g|} B'(v, u) \eta(t)\inv X_t,
    \end{alignat*}
    so we have $\overline{B} (u, v) = \delta B (u, v) = \delta B' (u,v) X_t = (-1)^{|g|} B'(v, u) \eta(t)\inv X_t$ and, hence, $B'(v, u) = \mu_{gT} B'(u,v)$. 
    Therefore $B'$ is either symmetric or skew-symmetric, depending on $\mu_{gT} \in \pmone$.
    Depending on the case we can fix a orthonormal or a symplectic $\FF$-basis for $\U_g$ and we will use it as our choice of $\D$-basis for $\U_{gT}$. 
\end{proof}

The considerations above and Lemma \ref{lemma:self-dual-components} motivate the following:

\begin{defi}
    Let $g_0 \in G^\#$, $\delta \in \pmone$ and $\eta\from T \to \pmone$. 
    We say that a map $\kappa\from G^\#/T \to \ZZ_{\geq 0}$ is $(g_0, \delta, \eta)$-admissible if:
    \begin{enumerate}[(i)]
        \item $\kappa$ has finite support; \label{item:kappa-finite-support}
        \item $\kappa(gT) = \kappa(g_0\inv g\inv T)$ for all $g\in G^\#$; \label{item:kappa-duality}
        \item If $g\in G^\#$ is such that $g_0 g^2 \in T$ and $\kappa (gT)$ is odd, then $(-1)^{|g|} \eta (g_0 g^2) \delta = 1$. \label{item:kappa-parity}
    \end{enumerate}
\end{defi}

\begin{lemma}
    
\end{lemma}

\begin{prop}
    The existence of the map $B$ implies that $\kappa$ is $(g_0, \delta, \eta)$-admissible. 
    Further, $(\kappa, g_0, \delta, \eta)$ determines the isomorphism class of $(\mc U, B)$.
\end{prop}

\begin{proof}
    Item \eqref{item:kappa-finite-support} has already been established. 
    
    For item \eqref{item:kappa-duality}, first note that, since $B$ has degree $g_0$, then $B(\U_{g}, \U_{g'}) \neq 0$ implies $g_0 g g' \in T$, for all $g, g' \in G^\#$. 
    In terms of isotypic components, this means that given $\U_{g T}$, then we can only have $B(\U_{g T}, \U_{g' T}) \neq 0$ if $\bar {g'} = \bar g_0\inv \bar g\inv \in G^\#/T$. 
    Since $B$ is nondegenerate, we have that $\U_{g T}$ and $\U_{g_0\inv g\inv T}$ are in duality via $B$ and, in particular, $\kappa(g T) = \kappa(g_0\inv g \inv T)$ holds. 
    
    We will verify item \eqref{item:kappa-parity} while we prove the ``further'' part. 
    To show the isomorphism, we will choose convenient homogeneous $\D$-bases for each of the isotypic components. 
    We will separate our analysis in two cases, $gT \neq g_0\inv g \inv T$ and $gT = g_0\inv g \inv T$. 
    In the former, $\U_{g T} \neq \U_{g_0\inv g\inv T}$, and we fix a arbitrary basis for one of them and put the corresponding dual basis on the other. 
    For the case $gT = g_0\inv g \inv T$, first note that it means $g_0 g^2 \in T$. 
    % Note that $\bar {g'} = \bar g \iff g_0 g^2 \in T$. 
    Fix a representative $g\in G$ for the coset $gT$. 
    We have that $\U_g \subseteq \U_{gT}$ is a $\FF$-vector space and a $\FF$-basis for $\U_g$ is a $\D$-basis for $\U_{gT}$. 
    Let $t=g_0 g^2$ and choose $X_t \in \D_t$. 
    We define $B'\from \U_g \times \U_g \to \FF$ by $B'(u,v) \coloneqq B(u,v) X_t\inv$, for all $u, v \in \U_g$. 
    In other words, $B(u,v) = B'(u,v) X_t$ and, hence, $B'$ determines $B\restriction_{\U_{gT} \times \U_{gT}}$. 
    It follows that $B'(u, \U_g) = 0$ implies that $u=0$, \ie, $B'$ is a nondegenerate bilinear form on $\U_g$. 
    Also, 
    \begin{alignat*}{3}
        \overline{B} (u, v) &= \sign{u}{v} \vphi_0\inv( B(v, u) )
        &&= \sign{g}{g} \vphi_0\inv( B'(v, u)X_t )\\
        &= (-1)^{|g|} B'(v, u) \vphi_0\inv(X_t)
        &&= (-1)^{|g|} B'(v, u) \eta(t)\inv X_t,
    \end{alignat*}
    so we have $\overline{B} (u, v) = \delta B (u, v) = \delta B' (u,v) X_t = (-1)^{|g|} B'(v, u) \eta(t)\inv X_t$ and, hence, $B'(v, u) = (-1)^{|g|} \eta(t) \delta B'(u,v)$. 
    Therefore $B'$ is either symmetric or skew-symmetric, depending on $(-1)^{|g|} \eta(t) \delta \in \pmone$. 
    Note that $(-1)^{|g|} \eta(t) \delta$ does not depend on the choice of $g$, since we have chosen $g' = gt'$ instead, then 
    \begin{align*}
        (-1)^{|g'|} \eta(g_0 (g')^2) &= (-1)^{|gt'|} \eta(g_0 g^2 (t')^2) = (-1)^{|g| + |t'|} \eta(g_0 g^2 (t')^2) \\
        &= (-1)^{|g| + |t'|} \sign{g_0 g^2}{(t')^2} \beta(g_0 g^2, (t')^2)\eta(g_0 g^2) \eta((t')^2)\\
        &= (-1)^{|g| + |t'|} (-1)^{|g_0 g^2| \bar{0} } \beta(g_0 g^2, t')^2 \eta(g_0 g^2) \eta((t')^2) \\
        &= (-1)^{|g| + |t'|} \eta(g_0 g^2) \eta((t')^2) \\ 
        &= (-1)^{|g| + |t'|} (-1)^{|t'|} \eta(g_0 g^2) \eta(t')^2 = (-1)^{|g|} \eta(g_0 g^2)
    \end{align*}
    Depending on the case we can fix a orthonormal or a symplectic $\FF$-basis for $\U_g$ and we will use it as our choice of $\D$-basis for $\U_{gT}$. 
    In the case $\kappa(gT)$ is odd, then $\dim_\FF \U_g$ is odd, so we cannot have $(-1)^{|g|} \eta(t) \delta = -1$, hence it must be the case that $\eta(t) = (-1)^{|g|} \delta$, proving item \eqref{item:kappa-parity}. 
    
    % In the case $U_{gT} \neq U_{g'T}$, simple take any homogeneous $\D$-basis for one of them and its dual basis on the other.
    
    With these choices of basis, we have that the iso class is determined.
    
    % For item \eqref{item:kappa-parity}, note that the condition $g_0 g^2 \in T$ means that $\bar g' = \bar g \in G^\#/T$, \ie, $\U_{gT}$ is dual to itself via $B$. % and $B\restriction_{\U_{gT} \times \U_{gT}}$ is nondegenerate. 
    % We have that $\U_g \subseteq \U_{gT}$ is a $\FF$-vector space and a $\FF$-basis for $\U_g$ is a $\D$-basis for $\U_{gT}$. 
    % Let $t=g_0 g^2$ and fix $X_t \in \D_t$. 
    % We define $B'\from \U_g \times \U_g \to \FF$ by $B'(u,v) \coloneqq B(u,v) X_t\inv$, for all $u, v \in \U_g$. 
    % In other words, $B(u,v) = B'(u,v) X_t$ and, hence, $B'$ determines $B\restriction_{\U_{gT} \times \U_{gT}}$. 
    % It follows that $B'(u, \U_g) = 0$ implies that $u=0$. 
    % Also, 
    % \begin{align*}
    %     \overline{B} (u, V) &= \vphi_0\inv( B(v, u) )
    %     = \vphi_0\inv( B'(v, u)X_t )
    %     = B'(v, u) \vphi_0\inv(X_t)
    %     = B'(v, u) \eta(t)\inv X_t.
    % \end{align*}
    % Hence, $\overline{B} (u, V) = \delta B (u, V) = \delta B' (u,v) X_t = B'(v, u) \eta(t)\inv X_t$ and, therefore, $B'(v, u) = \delta \eta(t) B'(u,v)$. 
    % Since $\dim_\FF \U_g$ is odd, we cannot have $\delta \eta(t) = -1$, so it must be the case that $\delta \eta(t) = 1$.
\end{proof}

\section{Fine gradings on superinvolution-simple superalgebras up to equivalence}
